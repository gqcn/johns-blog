<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/云原生/Volcano/Volcano Job详解" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Volcano Job详解 | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/cloud-native/volcano-job><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Volcano Job详解 | John's Blog"><meta data-rh=true name=description content="深入解析Volcano Job的核心特性与使用方法，包括批量调度机制、Job状态管理、重试策略配置、任务依赖关系等高级功能。详细介绍minAvailable参数实现的Gang Scheduling、灵活的重试机制以及基于DAG的任务依赖，帮助用户构建可靠的分布式计算和机器学习工作负载。"><meta data-rh=true property=og:description content="深入解析Volcano Job的核心特性与使用方法，包括批量调度机制、Job状态管理、重试策略配置、任务依赖关系等高级功能。详细介绍minAvailable参数实现的Gang Scheduling、灵活的重试机制以及基于DAG的任务依赖，帮助用户构建可靠的分布式计算和机器学习工作负载。"><meta data-rh=true name=keywords content="Volcano Job,Volcano,批量调度,Gang Scheduling,分布式训练,重试策略,任务依赖,minAvailable,minSuccess,PodGroup,云原生,Kubernetes,高性能计算,机器学习,容错机制,工作流,DAG,调度器"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/cloud-native/volcano-job><link data-rh=true rel=alternate href=https://johng.cn/cloud-native/volcano-job hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/cloud-native/volcano-job hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="John's Blog RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="John's Blog Atom Feed"><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.667035e4.css><script src=/assets/js/runtime~main.219d0176.js defer></script><script src=/assets/js/main.1cfa2a3e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/ai>AI技术</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" sidebarid=mainSidebar href=/cloud-native>云原生</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a><a class="navbar__item navbar__link" href=/blog>博客</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ai>AI技术</a><button aria-label="Expand sidebar category 'AI技术'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/cloud-native>云原生</a><button aria-label="Collapse sidebar category '云原生'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/cloud-native/container>Container</a><button aria-label="Expand sidebar category 'Container'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/cloud-native/kubernetes>Kubernetes</a><button aria-label="Expand sidebar category 'Kubernetes'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/cloud-native/argo-workflow>Argo Workflow</a><button aria-label="Expand sidebar category 'Argo Workflow'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/cloud-native/volcano>Volcano</a><button aria-label="Collapse sidebar category 'Volcano'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-introduction>Volcano基本介绍</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-startup-parameters>Volcano启动参数</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-examples>Volcano使用示例</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-annotations>Volcano常用注解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-queue>Volcano Queue详解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/cloud-native/volcano-job>Volcano Job详解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-queue-job-pod-preemption>Volcano Queue&Job&Pod资源抢占设计</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-scheduler-actions-plugins>Volcano Actions&Plugins详解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-session-plugins-fns>Volcano Session Plugins方法介绍</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-hierarchy-queue-scheduling-issue>Volcano层级队列配置引发的调度器系统性故障问题</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-hierarchy-queue-notes>Volcano层级队列使用的一些笔记</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/volcano-accelerator-card-quota-improvement>Volcano调度器支持智算卡Quota改进方案</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/cloud-native/kind>Kind</a><button aria-label="Expand sidebar category 'Kind'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/helm>Helm常用指令</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/cloud-native/dragonfly>Dragonfly介绍</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/observability>可观测性</a><button aria-label="Expand sidebar category '可观测性'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/cloud-native><span itemprop=name>云原生</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/cloud-native/volcano><span itemprop=name>Volcano</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Volcano Job详解</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>本文详细介绍<code>Volcano</code>中<code>Job</code>核心对象的关键设计以及使用。关于<code>Job</code>的基础介绍，请参考<code>Volcano</code>基本介绍章节 <a href=/cloud-native/volcano-introduction>Volcano介绍</a>。</p>
<p><code>Volcano Job</code>是<code>Volcano</code>调度系统中的核心工作负载对象，用于定义和管理复杂的分布式、批处理和高性能计算任务。与原生<code>Kubernetes Job</code>相比，<code>Volcano Job</code>提供了更丰富的功能和更灵活的调度策略，特别适合机器学习、大数据分析、科学计算等领域。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=基本结构>基本结构<a href=#基本结构 class=hash-link aria-label="Direct link to 基本结构" title="Direct link to 基本结构">​</a></h2>
<p><code>Volcano Job</code>的数据结构如下：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> distributed</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training  </span><span class="token comment" style=color:#8292a2;font-style:italic># 作业名称</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain">             </span><span class="token comment" style=color:#8292a2;font-style:italic># 最小可用Pod数量，作业启动所需的最小资源数量</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minSuccess</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain">               </span><span class="token comment" style=color:#8292a2;font-style:italic># 最小成功Pod数量，任务被认为完成所需的最小成功数量</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano      </span><span class="token comment" style=color:#8292a2;font-style:italic># 指定使用volcano调度器</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">priorityClassName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> high     </span><span class="token comment" style=color:#8292a2;font-style:italic># 作业优先级（可选）</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">queue</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ai</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training          </span><span class="token comment" style=color:#8292a2;font-style:italic># 所属队列</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">maxRetry</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>5</span><span class="token plain">                 </span><span class="token comment" style=color:#8292a2;font-style:italic># 最大重试次数</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">ttlSecondsAfterFinished</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3600</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 作业完成后保留时间（秒）</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">plugins</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">                    </span><span class="token comment" style=color:#8292a2;font-style:italic># 使用的插件</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">ssh</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">                   </span><span class="token comment" style=color:#8292a2;font-style:italic># SSH插件配置</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">                   </span><span class="token comment" style=color:#8292a2;font-style:italic># 环境变量插件配置</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">svc</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">                   </span><span class="token comment" style=color:#8292a2;font-style:italic># 服务插件配置</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">                   </span><span class="token comment" style=color:#8292a2;font-style:italic># 策略配置</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodEvicted       </span><span class="token comment" style=color:#8292a2;font-style:italic># 触发事件</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RestartJob      </span><span class="token comment" style=color:#8292a2;font-style:italic># 对应动作</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">                      </span><span class="token comment" style=color:#8292a2;font-style:italic># 任务定义，一个Job可以包含多个任务</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain">             </span><span class="token comment" style=color:#8292a2;font-style:italic># 副本数</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ps                </span><span class="token comment" style=color:#8292a2;font-style:italic># 任务名称</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">               </span><span class="token comment" style=color:#8292a2;font-style:italic># 任务级别策略</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> TaskCompleted </span><span class="token comment" style=color:#8292a2;font-style:italic># 触发事件</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> CompleteJob </span><span class="token comment" style=color:#8292a2;font-style:italic># 对应动作</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">               </span><span class="token comment" style=color:#8292a2;font-style:italic># Pod模板</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">labels</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">role</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ps</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tensorflow</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tensorflow/tensorflow</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.4.0</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">cpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 8Gi</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain">             </span><span class="token comment" style=color:#8292a2;font-style:italic># 副本数</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker            </span><span class="token comment" style=color:#8292a2;font-style:italic># 任务名称</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">               </span><span class="token comment" style=color:#8292a2;font-style:italic># Pod模板</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">labels</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">role</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tensorflow</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tensorflow/tensorflow</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.4.0</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">cpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 4Gi</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=jobpodgrouptaskpod关系模型>Job、PodGroup、Task、Pod关系模型<a href=#jobpodgrouptaskpod关系模型 class=hash-link aria-label="Direct link to Job、PodGroup、Task、Pod关系模型" title="Direct link to Job、PodGroup、Task、Pod关系模型">​</a></h2>
<ul>
<li><code>Job</code> ← 直接管理 → <code>Task</code>（定义、创建、管理<code>Pod</code>）</li>
<li><code>Job</code> ← 创建 → <code>PodGroup</code>（调度协调）</li>
<li><code>PodGroup</code> ← 存储 → <code>Task</code>元信息（<code>MinTaskMember</code>字段）</li>
</ul>
<p>关系模型如下：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">Job (控制器层面)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">├── PodGroup (调度层面) - 存储Task的调度元信息</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">└── Tasks (逻辑分组) - Job直接管理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    └── Pods (实际资源) - 由Task创建</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>以<code>tensorflow-training</code>为例：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">Job (tensorflow-training)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">├── PodGroup (tensorflow-training-abc123def456) [1:1关系]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   ├── minAvailable: 4</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   ├── minTaskMember: {ps: 2, worker: 3}  ← Task信息存储在这里</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   ├── queue: default</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   └── status: Running</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">├── Task: ps (replicas: 2) [Job直接管理]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   ├── Pod: tensorflow-training-ps-0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">│   └── Pod: tensorflow-training-ps-1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">└── Task: worker (replicas: 3) [Job直接管理]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    ├── Pod: tensorflow-training-worker-0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    ├── Pod: tensorflow-training-worker-1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    └── Pod: tensorflow-training-worker-2</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=jobpodgrouptask状态>Job、PodGroup、Task状态<a href=#jobpodgrouptask状态 class=hash-link aria-label="Direct link to Job、PodGroup、Task状态" title="Direct link to Job、PodGroup、Task状态">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=job状态>Job状态<a href=#job状态 class=hash-link aria-label="Direct link to Job状态" title="Direct link to Job状态">​</a></h3>
<p><code>Volcano Job</code>是一个更高级别的抽象。</p>
<p><code>Job</code>的状态定义如下：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>// JobPhase defines the phase of the job.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> JobPhase </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Pending is the phase that job is pending in the queue, waiting for scheduling decision</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Pending JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Pending"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Aborting is the phase that job is aborted, waiting for releasing pods</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Aborting JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Aborting"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Aborted is the phase that job is aborted by user or error handling</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Aborted JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Aborted"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Running is the phase that minimal available tasks of Job are running</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Running JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Running"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Restarting is the phase that the Job is restarted, waiting for pod releasing and recreating</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Restarting JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Restarting"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Completing is the phase that required tasks of job are completed, job starts to clean up</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Completing JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Completing"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Completed is the phase that all tasks of Job are completed</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Completed JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Completed"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Terminating is the phase that the Job is terminated, waiting for releasing pods</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Terminating JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Terminating"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Terminated is the phase that the job is finished unexpected, e.g. events</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Terminated JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Terminated"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Failed is the phase that the job is restarted failed reached the maximum number of retries.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Failed JobPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Failed"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>Job</code>有以下几种状态：</p>
<table><thead><tr><th>状态<th>说明<th>描述<tbody><tr><td><code>Pending</code><td>等待中<td><code>Job</code>正在调度排队中或者已调度但不满足<code>spec.minMember</code>要求<tr><td><code>Aborting</code><td>中止中<td><code>Job</code>正在被中止，等待释放<code>Pod</code><tr><td><code>Aborted</code><td>已中止<td><code>Job</code>已被中止，所有<code>Pod</code>已被释放<tr><td><code>Running</code><td>运行中<td><code>Job</code>中的最小可用任务正在运行<tr><td><code>Restarting</code><td>重启中<td><code>Job</code>正在重启，等待<code>Pod</code>释放和重新创建<tr><td><code>Completing</code><td>完成中<td><code>Job</code>的必需任务已完成，开始清理工作<tr><td><code>Completed</code><td>已完成<td><code>Job</code>的所有任务都已完成<tr><td><code>Terminating</code><td>终止中<td><code>Job</code>正在终止，等待释放<code>Pod</code><tr><td><code>Terminated</code><td>已终止<td><code>Job</code>意外结束，如由于事件触发<tr><td><code>Failed</code><td>失败<td><code>Job</code>重启失败，达到最大重试次数</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=podgroup状态>PodGroup状态<a href=#podgroup状态 class=hash-link aria-label="Direct link to PodGroup状态" title="Direct link to PodGroup状态">​</a></h3>
<p><code>PodGroup</code>是<code>Volcano</code>中用于管理<code>Pod</code>集合的抽象，<code>PodGroup</code>的<code>ownerReferences</code>指向<code>Job</code>。
每个<code>Job</code>生成的<code>PodGroup</code>名称是唯一的，是一对一关系，<code>PodGroup</code>名称格式为<code>{JobName}-{JobUID}</code>。</p>
<p><code>PodGroup</code>的状态定义如下：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupPhase is the phase of a pod group at the current time.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> PodGroupPhase </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>// These are the valid phase of podGroups.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupPending means the pod group has been accepted by the system, but scheduler can not allocate</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// enough resources to it.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	PodGroupPending PodGroupPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Pending"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupRunning means `spec.minMember` pods of PodGroup has been in running phase.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	PodGroupRunning PodGroupPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Running"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupUnknown means part of `spec.minMember` pods are running but the other part can not</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// be scheduled, e.g. not enough resource; scheduler will wait for related controller to recover it.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	PodGroupUnknown PodGroupPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Unknown"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupInqueue means controllers can start to create pods,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// is a new state between PodGroupPending and PodGroupRunning</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	PodGroupInqueue PodGroupPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Inqueue"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// PodGroupCompleted means all the pods of PodGroup are completed</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	PodGroupCompleted PodGroupPhase </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Completed"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>PodGroup</code>有以下几种状态：</p>
<table><thead><tr><th>状态<th>说明<th>描述<tbody><tr><td><code>Pending</code><td>等待中<td><code>PodGroup</code>刚创建的初始状态，还未被调度器处理，此时不会创建任何<code>Pod</code><tr><td><code>Running</code><td>运行中<td><code>PodGroup</code>的<code>spec.minMember</code>个<code>Pod</code>已处于运行状态<tr><td><code>Unknown</code><td>未知<td>部分<code>spec.minMember</code>的<code>Pod</code>正在运行，但其他部分无法调度（如资源不足）<tr><td><code>Inqueue</code><td>入队<td>控制器可以开始创建<code>Pod</code>，是<code>Pending</code>和<code>Running</code>之间的新状态，处于该状态的<code>PodGroup</code>可能已经被创建出了部分<code>Pod</code><tr><td><code>Completed</code><td>已完成<td><code>PodGroup</code>的所有<code>Pod</code>都已完成</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=task状态>Task状态<a href=#task状态 class=hash-link aria-label="Direct link to Task状态" title="Direct link to Task状态">​</a></h3>
<p><code>Job</code>直接包含一个或多个<code>Task</code>，每个<code>Task</code>可以有多个<code>Pod</code>副本，<code>Pod</code>的<code>ownerReferences</code>指向<code>Job</code>。
<code>Task</code>是<code>Volcano</code>中用于管理<code>Pod</code>集合的抽象。</p>
<p><code>Task</code>的状态定义如下：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>// TaskStatus defines the status of a task/pod.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> TaskStatus </span><span class="token builtin" style=color:#e6db74>int</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Pending means the task is pending in the apiserver.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Pending TaskStatus </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>&lt;&lt;</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>iota</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Allocated means the scheduler assigns a host to it.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Allocated</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Pipelined means the scheduler assigns a host to wait for releasing resource.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Pipelined</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Binding means the scheduler send Bind request to apiserver.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Binding</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Bound means the task/Pod bounds to a host.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Bound</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Running means a task is running on the host.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Running</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Releasing means a task/pod is deleted.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Releasing</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Succeeded means that all containers in the pod have voluntarily terminated</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// with a container exit code of 0, and the system is not going to restart any of these containers.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Succeeded</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Failed means that all containers in the pod have terminated, and at least one container has</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// terminated in a failure (exited with a non-zero exit code or was stopped by the system).</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Failed</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#8292a2;font-style:italic>// Unknown means the status of task/pod is unknown to the scheduler.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	Unknown</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>Task</code>有以下几种状态：</p>
<table><thead><tr><th>状态<th>说明<th>描述<tbody><tr><td><code>Pending</code><td>等待中<td><code>Task</code>在<code>apiserver</code>中等待处理<tr><td><code>Allocated</code><td>已分配<td>调度器为<code>Task</code>分配了主机节点<tr><td><code>Pipelined</code><td>流水线<td>调度器为<code>Task</code>分配了主机，等待释放资源<tr><td><code>Binding</code><td>绑定中<td>调度器向<code>apiserver</code>发送绑定请求<tr><td><code>Bound</code><td>已绑定<td><code>Task/Pod</code>已绑定到主机节点<tr><td><code>Running</code><td>运行中<td><code>Task</code>正在主机上运行<tr><td><code>Releasing</code><td>释放中<td><code>Task/Pod</code>正在被删除<tr><td><code>Succeeded</code><td>成功<td><code>Pod</code>中所有容器都以退出码0自愿终止，系统不会重启这些容器<tr><td><code>Failed</code><td>失败<td><code>Pod</code>中所有容器都已终止，至少一个容器以非零退出码终止或被系统停止<tr><td><code>Unknown</code><td>未知<td><code>Task/Pod</code>的状态对调度器来说是未知的</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=批量调度>批量调度<a href=#批量调度 class=hash-link aria-label="Direct link to 批量调度" title="Direct link to 批量调度">​</a></h2>
<p><code>minAvailable</code>属性是<code>Volcano Job</code>中的核心功能之一，用于实现"批量调度"或"整体调度"机制。这一机制在分布式计算、机器学习等领域特别重要，因为这些应用通常需要多个<code>Pod</code>同时启动才能正常工作。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=工作原理>工作原理<a href=#工作原理 class=hash-link aria-label="Direct link to 工作原理" title="Direct link to 工作原理">​</a></h3>
<ol>
<li>
<p><strong>调度保证</strong>：</p>
<ul>
<li>当设置<code>minAvailable=N</code>时，<code>Volcano</code>调度器会确保至少有<code>N</code>个<code>Pod</code>同时被调度</li>
<li>如果集群资源不足以满足这一要求，所有<code>Pod</code>将保持在<code>Pending</code>状态，而不是部分调度</li>
</ul>
</li>
<li>
<p><strong>PodGroup集成</strong>：</p>
<ul>
<li><code>Volcano</code>会为每个<code>Job</code>创建一个<code>PodGroup</code>对象</li>
<li><code>minAvailable</code>值会设置到<code>PodGroup</code>中，用于指导调度决策</li>
</ul>
</li>
<li>
<p><strong>资源等待机制</strong>：</p>
<ul>
<li>当资源不足时，作业将进入等待状态</li>
<li>一旦有足够资源可以满足<code>minAvailable</code>要求，作业将被调度</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=应用场景示例>应用场景示例<a href=#应用场景示例 class=hash-link aria-label="Direct link to 应用场景示例" title="Direct link to 应用场景示例">​</a></h3>
<ol>
<li>
<p><strong>分布式机器学习</strong>：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tf</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 1个PS + 2个Worker最小要求</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ps</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>MPI并行计算</strong>：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>5</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 1个Launcher + 4个Worker</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> launcher</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=与其他属性的配合>与其他属性的配合<a href=#�与其他属性的配合 class=hash-link aria-label="Direct link to 与其他属性的配合" title="Direct link to 与其他属性的配合">​</a></h3>
<ul>
<li>
<p><strong>与minSuccess的区别</strong>：<code>minAvailable</code>关注的是<strong>调度启动</strong>时的最小要求，而<code>minSuccess</code>关注的是<strong>任务成功</strong>所需的最小成功<code>Pod</code>数量。这里的成功是指Pod处于<code>Succeeded</code>状态（即<code>Pod</code>内所有容器都成功终止，退出码为<code>0</code>）</p>
</li>
<li>
<p><strong>与policies的结合</strong>：可以配合<code>PodFailed</code>策略，当<code>Pod</code>失败导致可用<code>Pod</code>数量小于<code>minAvailable</code>时触发重启或终止操作</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=重试策略>重试策略<a href=#重试策略 class=hash-link aria-label="Direct link to 重试策略" title="Direct link to 重试策略">​</a></h2>
<p><code>Volcano Job</code>提供了灵活的重试机制，允许用户配置在作业失败时的处理方式。这一机制对于提高分布式任务的可靠性和容错能力至关重要。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重试控制参数>重试控制参数<a href=#重试控制参数 class=hash-link aria-label="Direct link to 重试控制参数" title="Direct link to 重试控制参数">​</a></h3>
<ol>
<li>
<p><strong>maxRetry</strong>：</p>
<ul>
<li>定义作业失败时的最大重试次数</li>
<li>当作业失败次数超过该值时，作业将被标记为最终失败状态</li>
<li>默认值为<code>3</code></li>
</ul>
</li>
<li>
<p><strong>policies</strong>：</p>
<ul>
<li>通过<code>event</code>和<code>action</code>对定义特定事件发生时的处理方式</li>
<li>可以在作业级别或任务级别配置</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=支持的事件类型event>支持的事件类型(event)<a href=#支持的事件类型event class=hash-link aria-label="Direct link to 支持的事件类型(event)" title="Direct link to 支持的事件类型(event)">​</a></h3>
<p><code>Volcano</code>支持以下事件类型来触发重试策略：</p>
<table><thead><tr><th style=text-align:left>事件<th style=text-align:left>描述<th style=text-align:left>备注<tbody><tr><td style=text-align:left><code>PodFailed</code><td style=text-align:left>当<code>Pod</code>失败时触发<td style=text-align:left>适用于容器崩溃、内存溢出等异常情况<tr><td style=text-align:left><code>PodEvicted</code><td style=text-align:left>当<code>Pod</code>被驱逐时触发<td style=text-align:left>适用于资源抢占、节点维护等情况<tr><td style=text-align:left><code>PodPending</code><td style=text-align:left>当<code>Pod</code>处于等待状态时触发<td style=text-align:left>通常与<code>timeout</code>参数配合使用，适用于检测调度卡住的情况<tr><td style=text-align:left><code>PodRunning</code><td style=text-align:left>当<code>Pod</code>进入运行状态时触发<td style=text-align:left>适用于监控<code>Pod</code>状态变化，可用于取消其他延迟操作<tr><td style=text-align:left><code>JobUnknown</code> (<code>Unknown</code>)<td style=text-align:left>当作业状态未知时触发<td style=text-align:left>适用于处理异常情况，如部分Pod无法调度而其他已运行<tr><td style=text-align:left><code>TaskCompleted</code><td style=text-align:left>当任务中所有Pod成功完成时触发<td style=text-align:left>适用于一个任务完成后触发作业级别的动作<tr><td style=text-align:left><code>TaskFailed</code><td style=text-align:left>当任务意外失败时触发<td style=text-align:left>适用于检测任务级别的失败<tr><td style=text-align:left><code>OutOfSync</code><td style=text-align:left>当<code>Pod</code>或<code>Job</code>状态更新时触发<td style=text-align:left>系统内部事件，用于处理添加/更新/删除操作<tr><td style=text-align:left><code>CommandIssued</code><td style=text-align:left>当用户发出命令时触发<td style=text-align:left>系统内部事件，用于响应外部命令<tr><td style=text-align:left><code>JobUpdated</code><td style=text-align:left>当<code>Job</code>被更新时触发<td style=text-align:left>系统内部事件，主要用于扩容/缩容操作<tr><td style=text-align:left><code>*</code> (<code>AnyEvent</code>)<td style=text-align:left>匹配任何事件<td style=text-align:left>通配符，可用于捕获所有类型的事件</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=支持的动作类型action>支持的动作类型(action)<a href=#支持的动作类型action class=hash-link aria-label="Direct link to 支持的动作类型(action)" title="Direct link to 支持的动作类型(action)">​</a></h3>
<p><code>Volcano</code>支持以下动作类型来处理重试：</p>
<table><thead><tr><th style=text-align:left>动作<th style=text-align:left>描述<th style=text-align:left>备注<tbody><tr><td style=text-align:left><code>AbortJob</code><td style=text-align:left>中止作业，但不清理资源<td style=text-align:left>作业可以恢复<tr><td style=text-align:left><code>RestartJob</code><td style=text-align:left>重启整个作业<td style=text-align:left>所有<code>Pod</code>将被终止并重新创建<tr><td style=text-align:left><code>RestartTask</code><td style=text-align:left>只重启特定任务<td style=text-align:left>只能用于任务级别的策略<tr><td style=text-align:left><code>RestartPod</code><td style=text-align:left>只重启特定的<code>Pod</code><td style=text-align:left>提供更精细的重启控制<tr><td style=text-align:left><code>TerminateJob</code><td style=text-align:left>终止作业并清理所有资源<td style=text-align:left>作业将无法恢复<tr><td style=text-align:left><code>CompleteJob</code><td style=text-align:left>将作业标记为完成<td style=text-align:left>适用于关键任务完成时结束整个作业</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重试策略配置示例>重试策略配置示例<a href=#重试策略配置示例 class=hash-link aria-label="Direct link to 重试策略配置示例" title="Direct link to 重试策略配置示例">​</a></h3>
<ol>
<li>
<p><strong>基本重试配置</strong>：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> job</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">retry</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">example</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">maxRetry</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>5</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 最多重试五次</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodFailed  </span><span class="token comment" style=color:#8292a2;font-style:italic># 当Pod失败时</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RestartJob  </span><span class="token comment" style=color:#8292a2;font-style:italic># 重启整个作业</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>任务级别重试策略</strong>：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> task</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">retry</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">example</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">maxRetry</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> master</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodFailed  </span><span class="token comment" style=color:#8292a2;font-style:italic># 当master失败时</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RestartJob  </span><span class="token comment" style=color:#8292a2;font-style:italic># 重启整个作业</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodFailed  </span><span class="token comment" style=color:#8292a2;font-style:italic># 当worker失败时</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RestartTask  </span><span class="token comment" style=color:#8292a2;font-style:italic># 只重启该任务</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>带超时的重试策略</strong>：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> timeout</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">retry</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">example</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodPending  </span><span class="token comment" style=color:#8292a2;font-style:italic># 当Pod长时间处于等待状态</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> AbortJob  </span><span class="token comment" style=color:#8292a2;font-style:italic># 中止作业</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">timeout</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 1h  </span><span class="token comment" style=color:#8292a2;font-style:italic># 超过1小时后触发</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重试策略最佳实践>重试策略最佳实践<a href=#重试策略最佳实践 class=hash-link aria-label="Direct link to 重试策略最佳实践" title="Direct link to 重试策略最佳实践">​</a></h3>
<ol>
<li>
<p><strong>区分关键任务和非关键任务</strong>：</p>
<ul>
<li>对于关键任务（如主节点）的失败，应触发<code>RestartJob</code></li>
<li>对于非关键任务（如工作节点）的失败，可以使用<code>RestartTask</code>或<code>RestartPod</code></li>
</ul>
</li>
<li>
<p><strong>考虑超时设置</strong>：</p>
<ul>
<li>对于可能长时间卡住的情况，添加<code>timeout</code>参数</li>
<li>超时时间应根据任务的复杂度和资源需求合理设置</li>
</ul>
</li>
<li>
<p><strong>限制最大重试次数</strong>：</p>
<ul>
<li><code>maxRetry</code>值不应设置过大，避免资源浪费</li>
<li>对于大型作业，建议设置为<code>3-5</code>次</li>
</ul>
</li>
<li>
<p><strong>与队列策略的协调</strong>：</p>
<ul>
<li>考虑队列的<code>reclaimable</code>属性对重试策略的影响</li>
<li>如果作业在可回收的队列中，可能需要更强大的重试策略</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=与其他特性的结合>与其他特性的结合<a href=#与其他特性的结合 class=hash-link aria-label="Direct link to 与其他特性的结合" title="Direct link to 与其他特性的结合">​</a></h3>
<ul>
<li>
<p><strong>与minAvailable的结合</strong>：当<code>Pod</code>失败导致可用<code>Pod</code>数量小于<code>minAvailable</code>时，可以触发重试</p>
</li>
<li>
<p><strong>与minSuccess的结合</strong>：当成功的<code>Pod</code>数量无法达到<code>minSuccess</code>时，可以触发重试</p>
</li>
<li>
<p><strong>与插件的结合</strong>：重试时会重新应用插件配置，确保环境变量、SSH密钥等正确重新配置</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=任务依赖关系>任务依赖关系<a href=#任务依赖关系 class=hash-link aria-label="Direct link to 任务依赖关系" title="Direct link to 任务依赖关系">​</a></h2>
<p><code>Volcano Job</code>支持在不同任务之间定义依赖关系，这一功能在复杂的工作流程中非常有用，如数据处理管道、模型训练和评估流程等。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=依赖关系配置>依赖关系配置<a href=#依赖关系配置 class=hash-link aria-label="Direct link to 依赖关系配置" title="Direct link to 依赖关系配置">​</a></h3>
<p><code>Volcano Job</code>使用<code>dependsOn</code>字段定义任务之间的依赖关系：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> task</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">A</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> task</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">B</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"task-A"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># task-B依赖于task-A</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> task</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">C</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"task-A"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"task-B"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># task-C依赖于task-A和task-B</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=工作原理-1>工作原理<a href=#工作原理-1 class=hash-link aria-label="Direct link to 工作原理" title="Direct link to 工作原理">​</a></h3>
<ol>
<li>
<p><strong>依赖解析</strong>：</p>
<ul>
<li><code>Volcano Job</code>控制器在创建作业时解析任务之间的依赖关系</li>
<li>构建一个有向无环图（DAG）来表示任务执行顺序</li>
</ul>
</li>
<li>
<p><strong>执行顺序</strong>：</p>
<ul>
<li>只有当所有依赖的任务完成后，一个任务才会启动</li>
<li>没有依赖关系的任务可以并行启动</li>
</ul>
</li>
<li>
<p><strong>状态传递</strong>：</p>
<ul>
<li>当一个任务失败时，依赖于它的任务不会启动</li>
<li>这确保了工作流程的完整性</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=应用场景>应用场景<a href=#应用场景 class=hash-link aria-label="Direct link to 应用场景" title="Direct link to 应用场景">​</a></h3>
<ol>
<li><strong>数据处理管道</strong>：</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> data</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pipeline</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> data</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">collection</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> data</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">preprocessing</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"data-collection"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> model</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"data-preprocessing"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ol start=2>
<li><strong>复杂的模型训练流程</strong>：</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ml</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">workflow</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> data</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">preparation</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> feature</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">extraction</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"data-preparation"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> model</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"feature-extraction"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> model</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">evaluation</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"model-training"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> model</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">deployment</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">dependsOn</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"model-evaluation"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic># ...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=注意事项与最佳实践>注意事项与最佳实践<a href=#注意事项与最佳实践 class=hash-link aria-label="Direct link to 注意事项与最佳实践" title="Direct link to 注意事项与最佳实践">​</a></h3>
<ol>
<li>
<p><strong>避免循环依赖</strong>：</p>
<ul>
<li>不能创建循环依赖，如A依赖B，B依赖C，C依赖A</li>
<li>这将导致作业创建失败</li>
</ul>
</li>
<li>
<p><strong>考虑资源需求</strong>：</p>
<ul>
<li>当使用依赖关系时，要考虑<code>minAvailable</code>的设置</li>
<li>如果同时运行的任务很少，可以将<code>minAvailable</code>设置得较小</li>
</ul>
</li>
<li>
<p><strong>与重试策略的结合</strong>：</p>
<ul>
<li>当使用依赖关系时，要为关键任务配置适当的重试策略</li>
<li>关键任务的失败可能会导致整个工作流程卡住</li>
</ul>
</li>
<li>
<p><strong>使用有意义的任务名称</strong>：</p>
<ul>
<li>任务名称应清晰地反映其功能和在工作流程中的位置</li>
<li>这有助于理解和维护复杂的依赖关系</li>
</ul>
</li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/cloud-native/volcano-queue><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Volcano Queue详解</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/cloud-native/volcano-queue-job-pod-preemption><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Volcano Queue&Job&Pod资源抢占设计</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class=tocContainer_PXzm><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#基本结构 class="table-of-contents__link toc-highlight">基本结构</a><li><a href=#jobpodgrouptaskpod关系模型 class="table-of-contents__link toc-highlight">Job、PodGroup、Task、Pod关系模型</a><li><a href=#jobpodgrouptask状态 class="table-of-contents__link toc-highlight">Job、PodGroup、Task状态</a><ul><li><a href=#job状态 class="table-of-contents__link toc-highlight">Job状态</a><li><a href=#podgroup状态 class="table-of-contents__link toc-highlight">PodGroup状态</a><li><a href=#task状态 class="table-of-contents__link toc-highlight">Task状态</a></ul><li><a href=#批量调度 class="table-of-contents__link toc-highlight">批量调度</a><ul><li><a href=#工作原理 class="table-of-contents__link toc-highlight">工作原理</a><li><a href=#应用场景示例 class="table-of-contents__link toc-highlight">应用场景示例</a><li><a href=#与其他属性的配合 class="table-of-contents__link toc-highlight">与其他属性的配合</a></ul><li><a href=#重试策略 class="table-of-contents__link toc-highlight">重试策略</a><ul><li><a href=#重试控制参数 class="table-of-contents__link toc-highlight">重试控制参数</a><li><a href=#支持的事件类型event class="table-of-contents__link toc-highlight">支持的事件类型(event)</a><li><a href=#支持的动作类型action class="table-of-contents__link toc-highlight">支持的动作类型(action)</a><li><a href=#重试策略配置示例 class="table-of-contents__link toc-highlight">重试策略配置示例</a><li><a href=#重试策略最佳实践 class="table-of-contents__link toc-highlight">重试策略最佳实践</a><li><a href=#与其他特性的结合 class="table-of-contents__link toc-highlight">与其他特性的结合</a></ul><li><a href=#任务依赖关系 class="table-of-contents__link toc-highlight">任务依赖关系</a><ul><li><a href=#依赖关系配置 class="table-of-contents__link toc-highlight">依赖关系配置</a><li><a href=#工作原理-1 class="table-of-contents__link toc-highlight">工作原理</a><li><a href=#应用场景 class="table-of-contents__link toc-highlight">应用场景</a><li><a href=#注意事项与最佳实践 class="table-of-contents__link toc-highlight">注意事项与最佳实践</a></ul></ul></div><div class=tocAdBanner_imxD></div></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>