(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["4802"],{92341:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_16-15-19.3a2ae9e.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_16-15-19.6da95a3.2964.png 2964w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_16-15-19.3a2ae9e.640.png",width:640,height:370},{path:o.p+"assets/ideal-img/image2021-7-6_16-15-19.6da95a3.2964.png",width:2964,height:1712}],src:o.p+"assets/ideal-img/image2021-7-6_16-15-19.3a2ae9e.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_16-15-19.3a2ae9e.640.png"},placeholder:void 0,width:640,height:370},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiUlEQVR4nE2OUQ7EIAhEvf85+1mtgKhV6zSw2aSTTELgAROO40DvHaUUEBFExD3GwFoL13Xhvm8EA/beDsXzREoJOWdIKRhjeq2qCJQznmehaEVMyS8Isw/nnIgx/sBMjNYaWh9gUfAHArZ/MwdmyzOhtYFIPKtltmXL9lewpklrR3ZQUWt1f8EXUETonK8lpaMAAAAASUVORK5CYII="}},56158:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_16-42-1.0f51056.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_16-42-1.d18b777.1936.png 1936w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_16-42-1.0f51056.640.png",width:640,height:552},{path:o.p+"assets/ideal-img/image2021-7-6_16-42-1.d18b777.1936.png",width:1936,height:1670}],src:o.p+"assets/ideal-img/image2021-7-6_16-42-1.0f51056.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_16-42-1.0f51056.640.png"},placeholder:void 0,width:640,height:552},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVR4nF2QW0sCURSF/fv9CB/sQoRBGCFR4CWxAnGo9EEKRJ2LZ5zGuZ7L2xdzpGR6WC97f+y11m6khUYbg7NMOOmsaPY9kkKRlbqmRgVKZfj0c9rPAQ9vO6pZLg+qg9qwcHPOhh5305Ak10Spsqr2tYsLL+N06NF1QlYiozXwOB8FBHFJIf9ZX40DHt8j/O+CzkRwOxGIvbQRLFgqw1eQ0x679D5CtntJdyq4dwRhoo7gIWNGq7+xgBuVXDz5XI58glgerauLS1Fw8+IymO1sidk6Zb5OiTNF/ltGacN8k9LseVy/bm3T6rfKmL/3/ADLp0sfERStkQAAAABJRU5ErkJggg=="}},82750:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_16-47-1.dcca7df.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_16-47-1.c03aee8.3456.png 3456w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_16-47-1.dcca7df.640.png",width:640,height:232},{path:o.p+"assets/ideal-img/image2021-7-6_16-47-1.c03aee8.3456.png",width:3456,height:1252}],src:o.p+"assets/ideal-img/image2021-7-6_16-47-1.dcca7df.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_16-47-1.dcca7df.640.png"},placeholder:void 0,width:640,height:232},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAY0lEQVR4nDWNSQ6DQBDEeM909cYwSuD//3IECoe6uextrcV5nexzpyrJKrISz2RIDDPMjK16chyT7sYjkETJnrVEmF6wua3fz6IiKHfKRbjIcFz+nB/QPUiJtEGYoX/uzd7GH7K8PZ51qf80AAAAAElFTkSuQmCC"}},12125:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_16-50-23.25ad714.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_16-50-23.ee955b1.3052.png 3052w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_16-50-23.25ad714.640.png",width:640,height:481},{path:o.p+"assets/ideal-img/image2021-7-6_16-50-23.ee955b1.3052.png",width:3052,height:2292}],src:o.p+"assets/ideal-img/image2021-7-6_16-50-23.25ad714.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_16-50-23.25ad714.640.png"},placeholder:void 0,width:640,height:481},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVR4nHWPW25CMQxE73oaPxLncUMpSN3/og7KhRb44OPIljzyzGytD07nyfwelAjMHXdHVd/Y1jGK4a6YCiaCpPRPerCVqFQ3uglDhalrJkISLi/CqI1WK6UE6n5YW3Y8Z0T0KWy18dOD3x607Md3M0VF0Bf7rdbGeXSue+Wyd2YUejamL5TdhWGrTAl6OMWVfJS5Z3O5738cQlmhH8G/PnADOEd7zDTOttkAAAAASUVORK5CYII="}},65645:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_17-12-0.3c3a3ad.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_17-12-0.9afd77a.2020.png 2020w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_17-12-0.3c3a3ad.640.png",width:640,height:347},{path:o.p+"assets/ideal-img/image2021-7-6_17-12-0.9afd77a.2020.png",width:2020,height:1096}],src:o.p+"assets/ideal-img/image2021-7-6_17-12-0.3c3a3ad.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_17-12-0.3c3a3ad.640.png"},placeholder:void 0,width:640,height:347},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiUlEQVR4nC3MSQ7CMBBE0dwGcHfbbk/ERAwSK+5/oI8SZVGqzataemlMdz6j8y6RXxK+UXma8tLAUwM1BBavjRSNba70Mdlap5tRVKgqR6sIS6kdCYHWKuu4k5NzU+UicuQqguxwf4xmuDsxGjElihnThIcJQ09YasNO6DlTitPdGTkzUj5GO/wDRWROJkKUN1MAAAAASUVORK5CYII="}},34576:function(e,i,o){e.exports={src:{srcSet:o.p+"assets/ideal-img/image2021-7-6_17-14-46.e55df34.640.png 640w,"+o.p+"assets/ideal-img/image2021-7-6_17-14-46.911d9ea.1772.png 1772w",images:[{path:o.p+"assets/ideal-img/image2021-7-6_17-14-46.e55df34.640.png",width:640,height:210},{path:o.p+"assets/ideal-img/image2021-7-6_17-14-46.911d9ea.1772.png",width:1772,height:582}],src:o.p+"assets/ideal-img/image2021-7-6_17-14-46.e55df34.640.png",toString:function(){return o.p+"assets/ideal-img/image2021-7-6_17-14-46.e55df34.640.png"},placeholder:void 0,width:640,height:210},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAUUlEQVR4nDWM2w3AIAwDmSdJaXgZ6P57uSISH5Zl+XSp9kFTJbC49xc9sdg6+JZCVY2kA4oq3Z1zgh2DAFhr4+tOM7sgYhR/mLOF/RwiErnGHzozLrt6iR9PAAAAAElFTkSuQmCC"}},19904:function(e,i,o){"use strict";o.r(i),o.d(i,{metadata:()=>a,contentTitle:()=>g,default:()=>c,assets:()=>A,toc:()=>n,frontMatter:()=>r});var a=JSON.parse('{"id":"docs/\u4E91\u539F\u751F/Argo Workflow/Argo Workflow\u5E38\u89C1\u95EE\u9898/Argo Workflow\u7684GC\u7B56\u7565\uFF0C\u4EC0\u4E48\u65F6\u5019\u4F1A\u53BB\u6E05\u7406Pod","title":"Argo Workflow\u7684GC\u7B56\u7565\uFF0C\u4EC0\u4E48\u65F6\u5019\u4F1A\u53BB\u6E05\u7406Pod","description":"\u8BE6\u7EC6\u8BF4\u660E Argo Workflow \u7684\u5783\u573E\u56DE\u6536\u7B56\u7565\uFF0C\u5305\u62EC Pod \u7684\u751F\u547D\u5468\u671F\u7BA1\u7406\u3001\u6E05\u7406\u65F6\u673A\u548C\u76F8\u5173\u914D\u7F6E\u53C2\u6570\u7684\u89E3\u6790","source":"@site/docs/docs/2000-\u4E91\u539F\u751F/300-Argo Workflow/3-Argo Workflow\u5E38\u89C1\u95EE\u9898/3-Argo Workflow\u7684GC\u7B56\u7565\uFF0C\u4EC0\u4E48\u65F6\u5019\u4F1A\u53BB\u6E05\u7406Pod.mdx","sourceDirName":"docs/2000-\u4E91\u539F\u751F/300-Argo Workflow/3-Argo Workflow\u5E38\u89C1\u95EE\u9898","slug":"/cloud-native/argo-workflow-gc-policy","permalink":"/cloud-native/argo-workflow-gc-policy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"slug":"/cloud-native/argo-workflow-gc-policy","title":"Argo Workflow\u7684GC\u7B56\u7565\uFF0C\u4EC0\u4E48\u65F6\u5019\u4F1A\u53BB\u6E05\u7406Pod","hide_title":true,"keywords":["Argo Workflow","GC\u7B56\u7565","Pod\u6E05\u7406","\u8D44\u6E90\u7BA1\u7406","\u5783\u573E\u56DE\u6536","\u6027\u80FD\u4F18\u5316"],"description":"\u8BE6\u7EC6\u8BF4\u660E Argo Workflow \u7684\u5783\u573E\u56DE\u6536\u7B56\u7565\uFF0C\u5305\u62EC Pod \u7684\u751F\u547D\u5468\u671F\u7BA1\u7406\u3001\u6E05\u7406\u65F6\u673A\u548C\u76F8\u5173\u914D\u7F6E\u53C2\u6570\u7684\u89E3\u6790"},"sidebar":"mainSidebar","previous":{"title":"Argo Workflow\u53CATemplate\u6570\u636E\u662F\u5982\u4F55\u5B58\u50A8\u7684","permalink":"/cloud-native/argo-workflow-template-storage"},"next":{"title":"Argo Workflow\u5F00\u53D1\u73AF\u5883\u642D\u5EFA","permalink":"/cloud-native/argo-workflow-development-setup"}}'),s=o("85893"),d=o("50065"),t=o("85874");let r={slug:"/cloud-native/argo-workflow-gc-policy",title:"Argo Workflow\u7684GC\u7B56\u7565\uFF0C\u4EC0\u4E48\u65F6\u5019\u4F1A\u53BB\u6E05\u7406Pod",hide_title:!0,keywords:["Argo Workflow","GC\u7B56\u7565","Pod\u6E05\u7406","\u8D44\u6E90\u7BA1\u7406","\u5783\u573E\u56DE\u6536","\u6027\u80FD\u4F18\u5316"],description:"\u8BE6\u7EC6\u8BF4\u660E Argo Workflow \u7684\u5783\u573E\u56DE\u6536\u7B56\u7565\uFF0C\u5305\u62EC Pod \u7684\u751F\u547D\u5468\u671F\u7BA1\u7406\u3001\u6E05\u7406\u65F6\u673A\u548C\u76F8\u5173\u914D\u7F6E\u53C2\u6570\u7684\u89E3\u6790"},g=void 0,A={},n=[{value:"<code>TTLStrategy</code>",id:"ttlstrategy",level:2},{value:"<code>PodGC</code>",id:"podgc",level:2}];function l(e){let i={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,d.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:["\u6211\u4EEC\u53D1\u73B0\uFF0C\u521B\u5EFA\u7684Workflow\u5728\u6267\u884C\u6210\u529F\u540E\u5E76\u6CA1\u6709\u6E05\u7406\uFF0C\u800C\u662F\u5168\u90E8\u90FD\u4FDD\u7559\u4E86\u4E0B\u6765\uFF0C\u9020\u6210\u7A7A\u95F4\u4E0B\u7684Pod\u8D8A\u79EF\u8D8A\u591A\u3002\u5176\u5B9EArgo Workflow\u662F\u6709\u6E05\u7406\u7B56\u7565\u7684\uFF0C\u6211\u4EEC\u5148\u770B\u770B\u5B98\u65B9\u6587\u6863\u4ECB\u7ECD\uFF1A",(0,s.jsx)(i.a,{href:"https://argoproj.github.io/argo-workflows/cost-optimisation/#limit-the-total-number-of-workflows-and-pods",children:"https://argoproj.github.io/argo-workflows/cost-optimisation/#limit-the-total-number-of-workflows-and-pods"})]}),"\n",(0,s.jsx)(t.Z,{img:o(92341),alt:"",loading:"eager"}),"\n",(0,s.jsxs)(i.p,{children:["\u5B98\u65B9\u63D0\u4F9B\u4E86\u4E09\u79CD\u5EFA\u8BAE\u6027\u7684\u65B9\u6848\uFF0C\u5176\u4E2D",(0,s.jsx)(i.code,{children:"TTLStrategy"}),"\u548C",(0,s.jsx)(i.code,{children:"PodGC"}),"\u6BD4\u8F83\u5E38\u7528\u4E00\u4E9B\uFF0C\u4E00\u4E2A\u662F",(0,s.jsx)(i.code,{children:"Workflow\u6E05\u7406\u7B56\u7565"}),"\uFF0C\u4E00\u4E2A\u662F",(0,s.jsx)(i.code,{children:"Pod\u6E05\u7406\u7B56\u7565"}),"\u3002\u6211\u4EEC\u6765\u770B\u770B\u8FD9\u4E24\u79CD\u6E05\u7406\u7B56\u7565\u7684\u5177\u4F53\u903B\u8F91\u662F\u600E\u4E48\u6837\u7684\u5427\u3002"]}),"\n",(0,s.jsx)(i.h2,{id:"ttlstrategy",children:(0,s.jsx)(i.code,{children:"TTLStrategy"})}),"\n",(0,s.jsx)(i.p,{children:"\u6267\u884C\u6D41\u7A0B\u56FE\uFF1A"}),"\n",(0,s.jsx)(t.Z,{img:o(56158),alt:"",loading:"eager"}),"\n",(0,s.jsx)(i.p,{children:"\u6D41\u7A0B\u7B80\u8981\u4ECB\u7ECD\uFF1A"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"wfc.runTTLController"})," \u662F\u4F34\u968F\u7740",(0,s.jsx)(i.code,{children:"Argo Workflow Controller"}),"\u4E3B\u6D41\u7A0B\u542F\u52A8\uFF0C\u4F46\u662F\u662F\u5F02\u6B65\u6267\u884C\u7684\u4EFB\u52A1\u3002\u8BE5\u4EFB\u52A1\u8D1F\u8D23TTL\u64CD\u4F5C\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["\u901A\u8FC7",(0,s.jsx)(i.code,{children:"ttlcontroller.NewController"}),"\u65B9\u6CD5\u521B\u5EFA",(0,s.jsx)(i.code,{children:"TTLController"}),"\uFF0C\u5E76\u4E14\u5728\u8FD9\u91CC\u4F1A\u6CE8\u518C\u5BF9\u5E94\u7684",(0,s.jsx)(i.code,{children:"EventHandler"}),"\u7528\u4E8E\u5904\u7406\u5B8C\u6210\u7684",(0,s.jsx)(i.code,{children:"Workflow"}),"\u5BF9\u8C61\uFF1A"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.Z,{img:o(82750),alt:"",loading:"eager"}),"\n",(0,s.jsx)(t.Z,{img:o(12125),alt:"",loading:"eager"}),"\n",(0,s.jsx)(i.h2,{id:"podgc",children:(0,s.jsx)(i.code,{children:"PodGC"})}),"\n",(0,s.jsxs)(i.p,{children:["\u6211\u4EEC\u5728\u4E4B\u524D\u7684\u6E90\u7801\u5206\u6790\u4E2D\u5DF2\u7ECF\u53D1\u73B0\u6709",(0,s.jsx)(i.code,{children:"podCleanQueue"}),"\u8FD9\u4E48\u4E00\u4E2A\u961F\u5217\uFF0C\u7528\u4E8E\u6E05\u7406",(0,s.jsx)(i.code,{children:"Pod"}),"\u8D44\u6E90\u3002\u5728\u4E4B\u524D\u5BF9",(0,s.jsx)(i.code,{children:"Argo Workflow Controller"}),"\u7684\u6838\u5FC3\u6D41\u7A0B\u7684\u4ECB\u7ECD\u4E2D\u6709\u4E00\u4E2A",(0,s.jsx)(i.code,{children:"woc.operate"}),"\u64CD\u4F5C\uFF0C\u8BE5\u64CD\u4F5C\u6267\u884C\u5B8C\u6210\u540E",(0,s.jsx)(i.code,{children:"Workflow"}),"\u6838\u5FC3\u6D41\u7A0B\u4FBF\u6267\u884C\u5B8C\u6210\u4E86\u3002\u5728\u8FD9\u4E4B\u540E\u8FD8\u6709\u4E00\u4E2A\u64CD\u4F5C\u4FBF\u662F",(0,s.jsx)(i.code,{children:"PodGC\u5904\u7406\u903B\u8F91"}),"\u3002"]}),"\n",(0,s.jsx)(t.Z,{img:o(65645),alt:"",loading:"eager"}),"\n",(0,s.jsxs)(i.p,{children:["\u6DFB\u52A0\u5230\u961F\u5217\u7684\u64CD\u4F5C\u884C\u4E3A\u662F",(0,s.jsx)(i.code,{children:"deletePod"}),"\uFF0C\u6267\u884C\u903B\u8F91\u4FBF\u662F\u76F4\u63A5\u5220\u9664",(0,s.jsx)(i.code,{children:"Kubernetes"}),"\u4E2D\u5BF9\u5E94\u7684",(0,s.jsx)(i.code,{children:"Pod"}),"\uFF1A"]}),"\n",(0,s.jsx)(t.Z,{img:o(34576),alt:"",loading:"eager"}),"\n",(0,s.jsx)(i.admonition,{type:"tip",children:(0,s.jsxs)(i.p,{children:["\u8FD9\u91CC\u9700\u8981\u6CE8\u610F",(0,s.jsx)(i.code,{children:"Completion"}),"\u548C",(0,s.jsx)(i.code,{children:"Success"}),"\u7684\u533A\u522B\u3002\n",(0,s.jsx)(i.code,{children:"Completion"}),"\u8868\u793A",(0,s.jsx)(i.code,{children:"Workflow"}),"\u6267\u884C\u5B8C\u6210\uFF0C",(0,s.jsx)(i.code,{children:"Workflow"}),"\u7684\u72B6\u6001\u4E0D\u662F",(0,s.jsx)(i.code,{children:"Running/Appending/Unknown"}),"\u963B\u585E\u72B6\u6001\u3002\n",(0,s.jsx)(i.code,{children:"Success"}),"\u8868\u793A",(0,s.jsx)(i.code,{children:"Workflow"}),"\u6267\u884C\u5B8C\u6210\uFF0C\u5E76\u4E14",(0,s.jsx)(i.code,{children:"exit code"}),"\u4E3A",(0,s.jsx)(i.code,{children:"0"}),"\uFF0C\u8868\u793A\u6CA1\u6709\u9519\u8BEF\u4EA7\u751F\u3002"]})})]})}function c(e={}){let{wrapper:i}={...(0,d.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);