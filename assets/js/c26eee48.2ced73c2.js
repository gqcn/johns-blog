"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["7649"],{45028:function(e,o,n){n.r(o),n.d(o,{metadata:()=>r,contentTitle:()=>s,default:()=>u,assets:()=>i,toc:()=>a,frontMatter:()=>d});var r=JSON.parse('{"id":"docs/\u4E91\u539F\u751F/Container/\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898","title":"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898","description":"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898\uFF0C\u5305\u62EC\u6DFB\u52A0\u7528\u6237\u5230docker\u7EC4\u7684\u65B9\u6CD5","source":"@site/docs/docs/2000-\u4E91\u539F\u751F/1000-Container/\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898.md","sourceDirName":"docs/2000-\u4E91\u539F\u751F/1000-Container","slug":"/cloud-native/docker-permission-issue","permalink":"/cloud-native/docker-permission-issue","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"/cloud-native/docker-permission-issue","title":"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898","hide_title":true,"description":"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898\uFF0C\u5305\u62EC\u6DFB\u52A0\u7528\u6237\u5230docker\u7EC4\u7684\u65B9\u6CD5","keywords":["Docker","\u6743\u9650","Unix socket","\u7528\u6237\u7EC4","Linux","\u975Eroot\u7528\u6237"]},"sidebar":"mainSidebar","previous":{"title":"\u5728K8S\u6307\u5B9A\u547D\u540D\u63A7\u5236\u8FD0\u884C\u6307\u5B9A\u955C\u50CF","permalink":"/cloud-native/kubernetes-namespace-deployment"},"next":{"title":"Dragonfly\u4ECB\u7ECD","permalink":"/cloud-native/dragonfly"}}'),t=n("85893"),c=n("50065");let d={slug:"/cloud-native/docker-permission-issue",title:"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898",hide_title:!0,description:"\u89E3\u51B3\u975Eroot\u7528\u6237\u6CA1\u6709\u6743\u9650\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u95EE\u9898\uFF0C\u5305\u62EC\u6DFB\u52A0\u7528\u6237\u5230docker\u7EC4\u7684\u65B9\u6CD5",keywords:["Docker","\u6743\u9650","Unix socket","\u7528\u6237\u7EC4","Linux","\u975Eroot\u7528\u6237"]},s=void 0,i={},a=[{value:"\u95EE\u9898\u63CF\u8FF0",id:"\u95EE\u9898\u63CF\u8FF0",level:2},{value:"\u539F\u56E0\uFF08\u6458\u81EAdocker\u624B\u518C\uFF09",id:"\u539F\u56E0\u6458\u81EAdocker\u624B\u518C",level:2},{value:"\u65B9\u6CD51",id:"\u65B9\u6CD51",level:2},{value:"\u65B9\u6CD52",id:"\u65B9\u6CD52",level:2}];function l(e){let o={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,c.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h2,{id:"\u95EE\u9898\u63CF\u8FF0",children:"\u95EE\u9898\u63CF\u8FF0"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"Got permission denied while trying to connect to the Docker daemon\nsocket at unix:///var/run/docker.sock: Get\nhttp://%2Fvar%2Frun%2Fdocker.sock/v1.26/images/json: dial unix\n/var/run/docker.sock: connect: permission denied\n"})}),"\n",(0,t.jsx)(o.h2,{id:"\u539F\u56E0\u6458\u81EAdocker\u624B\u518C",children:"\u539F\u56E0\uFF08\u6458\u81EAdocker\u624B\u518C\uFF09"}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"Manage Docker as a non-root user"}),"\n",(0,t.jsx)(o.p,{children:"The docker daemon binds to a Unix socket instead of a TCP port. By\ndefault that Unix socket is owned by the user root and other users can\nonly access it using sudo. The docker daemon always runs as the root\nuser."}),"\n",(0,t.jsx)(o.p,{children:"If you don\u2019t want to use sudo when you use the docker command, create\na Unix group called docker and add users to it. When the docker daemon\nstarts, it makes the ownership of the Unix socket read/writable by the\ndocker group."}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"\u7B54\u6848\u663E\u800C\u6613\u89C1\uFF0C\u8981\u4E0D\u7528root\u7528\u6237\uFF0C\u8981\u4E0D\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3Adocker\u7684\u7528\u6237\u7EC4\uFF0C\u5E76\u628A\u4F60\u9700\u8981\u4F7F\u7528docker\u7684\u975Eroot\u7528\u6237\u6DFB\u52A0\u5230\u8BE5\u7EC4\u4E2D\uFF0C\u5982\u679C\u8FD8\u4E0D\u4F1A\u641E\uFF0C\u7EE7\u7EED\u5F80\u4E0B\u770B\u3002"}),"\n",(0,t.jsx)(o.h2,{id:"\u65B9\u6CD51",children:"\u65B9\u6CD51"}),"\n",(0,t.jsxs)(o.p,{children:["\u4F7F\u7528",(0,t.jsx)(o.code,{children:"sudo"}),"\u83B7\u53D6\u7BA1\u7406\u5458\u6743\u9650\uFF0C\u8FD0\u884C",(0,t.jsx)(o.code,{children:"docker"}),"\u547D\u4EE4\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u5728\u901A\u8FC7\u811A\u672C\u6267\u884C",(0,t.jsx)(o.code,{children:"docker"}),"\u547D\u4EE4\u7684\u65F6\u5019\u4F1A\u6709\u5F88\u591A\u5C40\u9650\u6027"]}),"\n",(0,t.jsx)(o.h2,{id:"\u65B9\u6CD52",children:"\u65B9\u6CD52"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.code,{children:"docker"}),"\u5B88\u62A4\u8FDB\u7A0B\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u9ED8\u8BA4\u8D4B\u4E88\u540D\u4E3A",(0,t.jsx)(o.code,{children:"docker"}),"\u7684\u7528\u6237\u7EC4\u8BFB\u5199",(0,t.jsx)(o.code,{children:"Unix socket"}),"\u7684\u6743\u9650\uFF0C\u56E0\u6B64\u53EA\u8981\u521B\u5EFA",(0,t.jsx)(o.code,{children:"docker"}),"\u7528\u6237\u7EC4\uFF0C\u5E76\u5C06\u5F53\u524D\u7528\u6237\u52A0\u5165\u5230",(0,t.jsx)(o.code,{children:"docker"}),"\u7528\u6237\u7EC4\u4E2D\uFF0C\u90A3\u4E48\u5F53\u524D\u7528\u6237\u5C31\u6709\u6743\u9650\u8BBF\u95EE",(0,t.jsx)(o.code,{children:"Unix socket"}),"\u4E86\uFF0C\u8FDB\u800C\u4E5F\u5C31\u53EF\u4EE5\u6267\u884C",(0,t.jsx)(o.code,{children:"docker"}),"\u76F8\u5173\u547D\u4EE4"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"sudo groupadd docker         #\u6DFB\u52A0docker\u7528\u6237\u7EC4\nsudo gpasswd -a $USER docker #\u5C06\u767B\u9646\u7528\u6237\u52A0\u5165\u5230docker\u7528\u6237\u7EC4\u4E2D\nnewgrp docker                #\u66F4\u65B0\u7528\u6237\u7EC4\n"})})]})}function u(e={}){let{wrapper:o}={...(0,c.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},50065:function(e,o,n){n.d(o,{Z:function(){return s},a:function(){return d}});var r=n(67294);let t={},c=r.createContext(t);function d(e){let o=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(c.Provider,{value:o},e.children)}}}]);