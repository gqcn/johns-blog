"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["3205"],{99236:function(e,d,n){n.r(d),n.d(d,{metadata:()=>i,contentTitle:()=>r,default:()=>x,assets:()=>o,toc:()=>h,frontMatter:()=>l});var i=JSON.parse('{"id":"docs/\u4E91\u539F\u751F/Kubernetes/Kubelet\u9A71\u9010Pod\u8BE6\u7EC6\u6D41\u7A0B","title":"Kubelet\u9A71\u9010Pod\u8BE6\u7EC6\u6D41\u7A0B","description":"\u6DF1\u5165\u89E3\u6790Kubernetes\u4E2Dkubelet\u7684Pod\u9A71\u9010\u673A\u5236\uFF0C\u5305\u62EC\u9A71\u9010\u4FE1\u53F7\u3001\u9608\u503C\u914D\u7F6E\u3001QoS\u7EA7\u522B\u5206\u7C7B\u3001\u9A71\u9010\u4F18\u5148\u7EA7\u903B\u8F91\u7B49\u3002\u8BE6\u7EC6\u8BF4\u660Erequests\u548Climits\u914D\u7F6E\u5BF9\u9A71\u9010\u987A\u5E8F\u7684\u5F71\u54CD\uFF0C\u4EE5\u53CA\u5185\u5B58\u3001\u78C1\u76D8\u3001PID\u7B49\u4E0D\u540C\u8D44\u6E90\u538B\u529B\u4E0B\u7684\u9A71\u9010\u7B56\u7565\u3002\u7ED3\u5408\u6E90\u7801\u5206\u6790\u9A71\u9010\u6D41\u7A0B\u7684\u5177\u4F53\u5B9E\u73B0\u3002","source":"@site/docs/docs/2000-\u4E91\u539F\u751F/200-Kubernetes/10000-Kubelet\u9A71\u9010Pod\u8BE6\u7EC6\u6D41\u7A0B.md","sourceDirName":"docs/2000-\u4E91\u539F\u751F/200-Kubernetes","slug":"/cloud-native/kubernetes-kubelet-pod-eviction-process","permalink":"/cloud-native/kubernetes-kubelet-pod-eviction-process","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10000,"frontMatter":{"slug":"/cloud-native/kubernetes-kubelet-pod-eviction-process","title":"Kubelet\u9A71\u9010Pod\u8BE6\u7EC6\u6D41\u7A0B","hide_title":true,"keywords":["Kubelet","Pod\u9A71\u9010","\u8D44\u6E90\u538B\u529B","\u5185\u5B58\u538B\u529B","\u78C1\u76D8\u538B\u529B","QoS\u7EA7\u522B","Guaranteed","Burstable","BestEffort","\u9A71\u9010\u4FE1\u53F7","\u9A71\u9010\u9608\u503C","\u8F6F\u9A71\u9010","\u786C\u9A71\u9010","\u8282\u70B9\u8D44\u6E90\u7BA1\u7406","\u5BB9\u5668\u8D44\u6E90\u9650\u5236","requests","limits","\u4F18\u5148\u7EA7\u8C03\u5EA6","\u8D44\u6E90\u56DE\u6536","\u5783\u573E\u56DE\u6536"],"description":"\u6DF1\u5165\u89E3\u6790Kubernetes\u4E2Dkubelet\u7684Pod\u9A71\u9010\u673A\u5236\uFF0C\u5305\u62EC\u9A71\u9010\u4FE1\u53F7\u3001\u9608\u503C\u914D\u7F6E\u3001QoS\u7EA7\u522B\u5206\u7C7B\u3001\u9A71\u9010\u4F18\u5148\u7EA7\u903B\u8F91\u7B49\u3002\u8BE6\u7EC6\u8BF4\u660Erequests\u548Climits\u914D\u7F6E\u5BF9\u9A71\u9010\u987A\u5E8F\u7684\u5F71\u54CD\uFF0C\u4EE5\u53CA\u5185\u5B58\u3001\u78C1\u76D8\u3001PID\u7B49\u4E0D\u540C\u8D44\u6E90\u538B\u529B\u4E0B\u7684\u9A71\u9010\u7B56\u7565\u3002\u7ED3\u5408\u6E90\u7801\u5206\u6790\u9A71\u9010\u6D41\u7A0B\u7684\u5177\u4F53\u5B9E\u73B0\u3002"},"sidebar":"mainSidebar","previous":{"title":"Kubernetes Device Plugin","permalink":"/cloud-native/kubernetes-device-plugin"},"next":{"title":"Kubernetes\u751F\u6210Bearer Token\u65B9\u5F0F","permalink":"/cloud-native/kubernetes-generate-bearer-token"}}'),s=n("85893"),c=n("50065");let l={slug:"/cloud-native/kubernetes-kubelet-pod-eviction-process",title:"Kubelet\u9A71\u9010Pod\u8BE6\u7EC6\u6D41\u7A0B",hide_title:!0,keywords:["Kubelet","Pod\u9A71\u9010","\u8D44\u6E90\u538B\u529B","\u5185\u5B58\u538B\u529B","\u78C1\u76D8\u538B\u529B","QoS\u7EA7\u522B","Guaranteed","Burstable","BestEffort","\u9A71\u9010\u4FE1\u53F7","\u9A71\u9010\u9608\u503C","\u8F6F\u9A71\u9010","\u786C\u9A71\u9010","\u8282\u70B9\u8D44\u6E90\u7BA1\u7406","\u5BB9\u5668\u8D44\u6E90\u9650\u5236","requests","limits","\u4F18\u5148\u7EA7\u8C03\u5EA6","\u8D44\u6E90\u56DE\u6536","\u5783\u573E\u56DE\u6536"],description:"\u6DF1\u5165\u89E3\u6790Kubernetes\u4E2Dkubelet\u7684Pod\u9A71\u9010\u673A\u5236\uFF0C\u5305\u62EC\u9A71\u9010\u4FE1\u53F7\u3001\u9608\u503C\u914D\u7F6E\u3001QoS\u7EA7\u522B\u5206\u7C7B\u3001\u9A71\u9010\u4F18\u5148\u7EA7\u903B\u8F91\u7B49\u3002\u8BE6\u7EC6\u8BF4\u660Erequests\u548Climits\u914D\u7F6E\u5BF9\u9A71\u9010\u987A\u5E8F\u7684\u5F71\u54CD\uFF0C\u4EE5\u53CA\u5185\u5B58\u3001\u78C1\u76D8\u3001PID\u7B49\u4E0D\u540C\u8D44\u6E90\u538B\u529B\u4E0B\u7684\u9A71\u9010\u7B56\u7565\u3002\u7ED3\u5408\u6E90\u7801\u5206\u6790\u9A71\u9010\u6D41\u7A0B\u7684\u5177\u4F53\u5B9E\u73B0\u3002"},r=void 0,o={},h=[{value:"1. \u524D\u8A00",id:"1-\u524D\u8A00",level:2},{value:"2. \u9A71\u9010\u4FE1\u53F7\u548C\u9608\u503C\uFF1A\u4EC0\u4E48\u65F6\u5019\u4F1A\u9A71\u9010 Pod?",id:"2-\u9A71\u9010\u4FE1\u53F7\u548C\u9608\u503C\u4EC0\u4E48\u65F6\u5019\u4F1A\u9A71\u9010-pod",level:2},{value:"2.1 \u9A71\u9010\u4FE1\u53F7\u4E0E\u8282\u70B9condition",id:"21-\u9A71\u9010\u4FE1\u53F7\u4E0E\u8282\u70B9condition",level:3},{value:"2.1.1 \u9A71\u9010\u4FE1\u53F7",id:"211-\u9A71\u9010\u4FE1\u53F7",level:4},{value:"2.1.2 \u8282\u70B9condition\u4E0E\u6C61\u70B9",id:"212-\u8282\u70B9condition\u4E0E\u6C61\u70B9",level:4},{value:"2.2 \u9A71\u9010\u9608\u503C\uFF1A\u5224\u65AD\u6761\u4EF6",id:"22-\u9A71\u9010\u9608\u503C\u5224\u65AD\u6761\u4EF6",level:3},{value:"2.2.1 \u8F6F\u9A71\u9010 eviction-soft",id:"221-\u8F6F\u9A71\u9010-eviction-soft",level:4},{value:"2.2.2 \u786C\u9A71\u9010 eviction-hard",id:"222-\u786C\u9A71\u9010-eviction-hard",level:4},{value:"2.3 \u72B6\u6001\u68C0\u6D4B &amp; \u9A71\u9010\u9891\u7387",id:"23-\u72B6\u6001\u68C0\u6D4B--\u9A71\u9010\u9891\u7387",level:3},{value:"3. \u56DE\u6536\u8282\u70B9\u7EA7\u8D44\u6E90",id:"3-\u56DE\u6536\u8282\u70B9\u7EA7\u8D44\u6E90",level:2},{value:"4. \u9A71\u9010\u5BF9\u8C61\uFF1A\u54EA\u4E9B Pod \u4F1A\u88AB\u9A71\u9010",id:"4-\u9A71\u9010\u5BF9\u8C61\u54EA\u4E9B-pod-\u4F1A\u88AB\u9A71\u9010",level:2},{value:"4.1 \u5185\u5B58\u8D44\u6E90\u5BFC\u81F4\u7684\u9A71\u9010",id:"41-\u5185\u5B58\u8D44\u6E90\u5BFC\u81F4\u7684\u9A71\u9010",level:3},{value:"4.1.1 QoS \u7EA7\u522B\u4ECB\u7ECD",id:"411-qos-\u7EA7\u522B\u4ECB\u7ECD",level:4},{value:"4.1.2 \u9A71\u9010\u4F18\u5148\u7EA7\u5173\u7CFB",id:"412-\u9A71\u9010\u4F18\u5148\u7EA7\u5173\u7CFB",level:4},{value:"4.2 inode &amp; pid \u5BFC\u81F4\u7684\u9A71\u9010",id:"42-inode--pid-\u5BFC\u81F4\u7684\u9A71\u9010",level:3},{value:"4.3 \u5C0F\u7ED3",id:"43-\u5C0F\u7ED3",level:3},{value:"4.4 \u6700\u5C11\u8D44\u6E90\u56DE\u6536\u91CF",id:"44-\u6700\u5C11\u8D44\u6E90\u56DE\u6536\u91CF",level:3},{value:"5. \u53C2\u8003\u8D44\u6599",id:"5-\u53C2\u8003\u8D44\u6599",level:2}];function t(e){let d={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.h2,{id:"1-\u524D\u8A00",children:"1. \u524D\u8A00"}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"kubelet"}),"\u76D1\u63A7\u96C6\u7FA4\u8282\u70B9\u7684\u5185\u5B58\u3001\u78C1\u76D8\u7A7A\u95F4\u548C\u6587\u4EF6\u7CFB\u7EDF\u7684",(0,s.jsx)(d.code,{children:"inode"}),"\u7B49\u8D44\u6E90\u3002 \u5F53\u8FD9\u4E9B\u8D44\u6E90\u4E2D\u7684\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u8FBE\u5230\u7279\u5B9A\u7684\u6D88\u8017\u6C34\u5E73\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u53EF\u4EE5\u4E3B\u52A8\u9A71\u9010\u8282\u70B9\u4E0A\u4E00\u4E2A\u6216\u8005\u591A\u4E2A",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF0C\u4EE5\u56DE\u6536\u8D44\u6E90\u9632\u6B62\u8282\u70B9\u6700\u7EC8\u5D29\u6E83\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.strong,{children:"\u9700\u8981\u6CE8\u610F\u7684\u662F"}),"\uFF1A\u7531",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u53D1\u8D77\u7684\u9A71\u9010\u5E76\u4E0D\u4F1A\u9075\u5FAA",(0,s.jsx)(d.code,{children:"PodDisruptionBudget"}),"\u548C",(0,s.jsx)(d.code,{children:"terminationGracePeriodSeconds"}),"\u7684\u914D\u7F6E\u3002\u5BF9",(0,s.jsx)(d.code,{children:"K8S"}),"\u6765\u8BF4\uFF0C\u4FDD\u8BC1\u8282\u70B9\u8D44\u6E90\u5145\u8DB3\u4F18\u5148\u7EA7\u66F4\u9AD8\uFF0C\u727A\u7272\u5C0F\u90E8\u5206",(0,s.jsx)(d.code,{children:"Pod"}),"\u6765\u4FDD\u8BC1\u5269\u4F59\u7684\u5927\u90E8\u5206",(0,s.jsx)(d.code,{children:"Pod"}),"\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u53E6\u5916",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u5728\u771F\u6B63\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u4E4B\u524D\u4F1A\u6267\u884C\u4E00\u6B21\u5783\u573E\u56DE\u6536\uFF0C\u5C1D\u8BD5\u56DE\u6536\u8282\u70B9\u8D44\u6E90\uFF0C\u5982\u679C\u56DE\u6536\u540E\u8D44\u6E90\u5145\u8DB3\u4E86\uFF0C\u5C31\u53EF\u4EE5\u907F\u514D\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5728",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4E2D\u5B9E\u73B0",(0,s.jsx)(d.code,{children:"Pod"}),"\u9A71\u9010\u903B\u8F91\u7684\u5177\u4F53\u6E90\u7801\u4F4D\u4E8E\uFF1A",(0,s.jsx)(d.a,{href:"https://github.com/kubernetes/kubernetes/blob/4096c9209cbf20c51d184e83ab6ffa3853bd2ee6/pkg/kubelet/eviction/eviction_manager.go",children:"https://github.com/kubernetes/kubernetes/blob/4096c9209cbf20c51d184e83ab6ffa3853bd2ee6/pkg/kubelet/eviction/eviction_manager.go"})]}),"\n",(0,s.jsx)(d.h2,{id:"2-\u9A71\u9010\u4FE1\u53F7\u548C\u9608\u503C\u4EC0\u4E48\u65F6\u5019\u4F1A\u9A71\u9010-pod",children:"2. \u9A71\u9010\u4FE1\u53F7\u548C\u9608\u503C\uFF1A\u4EC0\u4E48\u65F6\u5019\u4F1A\u9A71\u9010 Pod?"}),"\n",(0,s.jsxs)(d.p,{children:["\u9996\u5148\uFF0C\u65B0\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u8C03\u5EA6\u4E0D\u4F1A\u5F15\u53D1\u9A71\u9010\u52A8\u4F5C\uFF0C\u9A71\u9010\u52A8\u4F5C\u53EA\u4F1A\u5728\u8282\u70B9\u8D44\u6E90\u7D27\u5F20\u65F6\u624D\u4F1A\u53D1\u751F\uFF0C\u4F8B\u5982\u67D0\u4E9B",(0,s.jsx)(d.code,{children:"Pod"}),"\u7684\u8D44\u6E90\u4F7F\u7528\u7387\uFF08",(0,s.jsx)(d.code,{children:"CPU/Memory/Disk/PID"}),"\u7B49\uFF09\u98D9\u5347\uFF08\u56E0\u4E3A",(0,s.jsx)(d.code,{children:"Container limits"}),"\u53EF\u4EE5\u8D85\u8FC7\u8282\u70B9\u53EF\u5206\u914D\u8D44\u6E90\u603B\u91CF\uFF09\uFF0C\u6216\u8005\u8282\u70B9\u4E0A\u5176\u4ED6\u8FDB\u7A0B\u5F15\u53D1\u7684\u8282\u70B9\u8D44\u6E90\u538B\u529B\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"kubelet"}),"\u4F7F\u7528\u5404\u79CD\u53C2\u6570\u6765\u505A\u51FA\u9A71\u9010\u51B3\u5B9A\uFF0C\u5177\u4F53\u5305\u542B\u4EE5\u4E0B",(0,s.jsx)(d.code,{children:"3"}),"\u4E2A\u90E8\u5206\uFF1A"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsx)(d.li,{children:"1\uFF09\u9A71\u9010\u4FE1\u53F7"}),"\n",(0,s.jsx)(d.li,{children:"2\uFF09\u9A71\u9010\u6761\u4EF6"}),"\n",(0,s.jsx)(d.li,{children:"3\uFF09\u76D1\u63A7\u95F4\u9694"}),"\n"]}),"\n",(0,s.jsx)(d.h3,{id:"21-\u9A71\u9010\u4FE1\u53F7\u4E0E\u8282\u70B9condition",children:"2.1 \u9A71\u9010\u4FE1\u53F7\u4E0E\u8282\u70B9condition"}),"\n",(0,s.jsx)(d.h4,{id:"211-\u9A71\u9010\u4FE1\u53F7",children:"2.1.1 \u9A71\u9010\u4FE1\u53F7"}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsxs)(d.strong,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u4F7F\u7528\u9A71\u9010\u4FE1\u53F7\u6765\u4EE3\u8868\u7279\u5B9A\u8D44\u6E90\u5728\u7279\u5B9A\u65F6\u95F4\u70B9\u7684\u72B6\u6001"]}),"\uFF0C\u6839\u636E\u4E0D\u540C\u8D44\u6E90\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"})," \u4E2D\u5B9A\u4E49\u4E86",(0,s.jsx)(d.code,{children:"5"}),"\u79CD\u9A71\u9010\u4FE1\u53F7\u3002"]}),"\n",(0,s.jsxs)(d.blockquote,{children:["\n",(0,s.jsxs)(d.p,{children:["\u9A71\u9010\u4FE1\u53F7\u8FD9\u4E2A\u8BCD\u611F\u89C9\u6709\u70B9\u8FF7\uFF0C\u5B9E\u9645\u770B\u4E0B\u6765\u5C31\u662F\u68C0\u6D4B\u4E86\u8FD9\u51E0\u79CD\u8D44\u6E90\u7684\u4F59\u91CF\u7528\u4E8E\u5224\u65AD\u662F\u5426\u9700\u8981\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"})]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5728",(0,s.jsx)(d.code,{children:"Linux"}),"\u7CFB\u7EDF\u4E2D\uFF0C",(0,s.jsx)(d.code,{children:"5"}),"\u79CD\u4FE1\u53F7\u5206\u522B\u4E3A\uFF1A"]}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"\u9A71\u9010\u4FE1\u53F7"}),(0,s.jsx)(d.th,{children:"\u63CF\u8FF0"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"memory.available"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"memory.available := node.status.capacity[memory] - node.stats.memory.workingSet"})})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nodefs.available"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nodefs.available := node.stats.fs.available"})})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nodefs.inodesFree"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nodefs.inodesFree := node.stats.fs.inodesFree"})})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"imagefs.available"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"imagefs.available := node.stats.runtime.imagefs.available"})})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"imagefs.inodesFree"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"imagefs.inodesFree := node.stats.runtime.imagefs.inodesFree"})})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"pid.available"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"pid.available := node.stats.rlimit.maxpid - node.stats.rlimit.curproc"})})]})]})]}),"\n",(0,s.jsxs)(d.p,{children:["\u53EF\u4EE5\u770B\u5230\uFF0C\u4E3B\u8981\u662F\u5BF9 ",(0,s.jsx)(d.code,{children:"\u5185\u5B58"}),"\u3001",(0,s.jsx)(d.code,{children:"\u78C1\u76D8"}),"\u3001",(0,s.jsx)(d.code,{children:"PID"})," \u8FD9\u4E09\u79CD\u7C7B\u578B\u8D44\u6E90\u8FDB\u884C\u68C0\u6D4B\u3002\u5176\u4E2D\u78C1\u76D8\u8D44\u6E90\u53C8\u5206\u4E3A\u4E24\u7C7B\uFF1A"]}),"\n",(0,s.jsxs)(d.ol,{children:["\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"nodefs"}),"\uFF1A\u8282\u70B9\u7684\u4E3B\u8981\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u7528\u4E8E\u672C\u5730\u78C1\u76D8\u5377\u3001\u4E0D\u53D7\u5185\u5B58\u652F\u6301\u7684",(0,s.jsx)(d.code,{children:"emptyDir"}),"\u5377\u3001\u65E5\u5FD7\u5B58\u50A8\u7B49\u3002 \u4F8B\u5982\uFF0C",(0,s.jsx)(d.code,{children:"nodefs"})," \u5305\u542B ",(0,s.jsx)(d.code,{children:"/var/lib/kubelet/"}),"\u3002"]}),"\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"imagefs"}),"\uFF1A\u53EF\u9009\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4F9B\u5BB9\u5668\u8FD0\u884C\u65F6\u5B58\u50A8\u5BB9\u5668\u955C\u50CF\u548C\u5BB9\u5668\u53EF\u5199\u5C42\u3002"]}),"\n"]}),"\n",(0,s.jsx)(d.h4,{id:"212-\u8282\u70B9condition\u4E0E\u6C61\u70B9",children:"2.1.2 \u8282\u70B9condition\u4E0E\u6C61\u70B9"}),"\n",(0,s.jsxs)(d.p,{children:["\u9664\u4E86\u7528\u9A71\u9010\u4FE1\u53F7\u6765\u5224\u65AD\u662F\u5426\u9700\u8981\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u4E4B\u5916\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"})," \u8FD8\u4F1A\u628A\u9A71\u9010\u4FE1\u53F7\u53CD\u5E94\u4E3A\u8282\u70B9\u7684\u72B6\u6001\u3002"]}),"\n",(0,s.jsxs)(d.blockquote,{children:["\n",(0,s.jsxs)(d.p,{children:["\u5373\uFF1A\u66F4\u65B0\u5230",(0,s.jsx)(d.code,{children:"node"}),"\u5BF9\u8C61\u7684",(0,s.jsx)(d.code,{children:"status.condition"}),"\u5B57\u6BB5\u91CC"]}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"\u5BF9\u5E94\u5173\u7CFB\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"Node Condition"}),(0,s.jsx)(d.th,{children:"Eviction Signal"}),(0,s.jsx)(d.th,{children:"Description"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"MemoryPressure"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"memory.available"})}),(0,s.jsx)(d.td,{children:"\u8282\u70B9\u53EF\u7528\u5185\u5B58\u4F59\u91CF\u6EE1\u8DB3\u9A71\u9010\u9608\u503C"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DiskPressure"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nodefs.available, nodefs.inodesFree, imagefs.available, or imagefs.inodesFree"})}),(0,s.jsxs)(d.td,{children:["\u8282\u70B9\u4E3B\u6587\u4EF6\u7CFB\u7EDF\u6216\u8005\u955C\u50CF\u6587\u4EF6\u7CFB\u7EDF\u5269\u4F59\u78C1\u76D8\u7A7A\u95F4\u6216\u8005",(0,s.jsx)(d.code,{children:"inodes"}),"\u6570\u91CF\u6EE1\u8DB3\u9A71\u9010\u9608\u503C"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"PIDPressure"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"pid.available"})}),(0,s.jsxs)(d.td,{children:["\u8282\u70B9\u4E0A\u53EF\u7528\u8FDB\u7A0B\u6807\u8BC6\u7B26(",(0,s.jsx)(d.code,{children:"processes identifiers"}),") \u4F4E\u4E8E\u9A71\u9010\u9608\u503C"]})]})]})]}),"\n",(0,s.jsxs)(d.p,{children:["\u603B\u7684\u6765\u8BF4\u5C31\u662F\u8282\u70B9\u4E0A\u5BF9\u5E94\u8D44\u6E90\u4E0D\u8DB3\u65F6",(0,s.jsx)(d.code,{children:"kubelet"}),"\u5C31\u4F1A\u88AB\u8282\u70B9\u6253\u4E0A\u5BF9\u5E94\u7684\u6807\u8BB0\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u540C\u65F6 ",(0,s.jsx)(d.code,{children:"control plane(\u5177\u4F53\u4E3A node controller)"})," \u4F1A\u81EA\u52A8\u628A\u8282\u70B9\u4E0A\u76F8\u5173",(0,s.jsx)(d.code,{children:"condition"}),"\u8F6C\u6362\u4E3A",(0,s.jsx)(d.code,{children:"taint"}),"\u6807\u8BB0\uFF0C\u5177\u4F53\u89C1\uFF1A",(0,s.jsx)(d.a,{href:"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/#taint-nodes-by-condition",children:"#taint-nodes-by-condition"}),"\uFF0C\u8FD9\u6837\u53EF\u4EE5\u907F\u514D\u628A",(0,s.jsx)(d.code,{children:"Pod"}),"\u8C03\u5EA6\u5230\u672C\u6765\u5C31\u8D44\u6E90\u4E0D\u8DB3\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u4E0A\u3002"]}),"\n",(0,s.jsxs)(d.blockquote,{children:["\n",(0,s.jsxs)(d.p,{children:["\u5982\u679C\u4E0D\u7ED9\u8D44\u6E90\u4E0D\u8DB3\u7684\u8282\u70B9\u6253\u4E0A\u6807\u8BB0\uFF0C\u53EF\u80FD\u53D1\u751F",(0,s.jsx)(d.code,{children:"Pod"}),"\u521A\u8C03\u5EA6\u8FC7\u53BB\u5C31\u88AB\u9A71\u9010\u7684\u60C5\u51B5\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.strong,{children:"\u6574\u4F53\u8FD0\u4F5C\u6D41\u7A0B"}),"\uFF1A"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["1\uFF09\u9996\u5148",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u68C0\u6D4B\u5230\u8282\u70B9\u4E0A\u5269\u4F59\u78C1\u76D8\u7A7A\u95F4\u4E0D\u8DB3\uFF0C\u66F4\u65B0",(0,s.jsx)(d.code,{children:"Node Condition"}),"\u589E\u52A0 ",(0,s.jsx)(d.code,{children:"DiskPressure"})," \u72B6\u6001"]}),"\n",(0,s.jsxs)(d.li,{children:["2\uFF09\u7136\u540E",(0,s.jsx)(d.code,{children:"node controller"}),"\u81EA\u52A8\u5C06",(0,s.jsx)(d.code,{children:"Condition"}),"\u8F6C\u6362\u4E3A",(0,s.jsx)(d.code,{children:"\u6C61\u70B9"})," ",(0,s.jsx)(d.code,{children:"node.kubernetes.io/disk-pressure"})]}),"\n",(0,s.jsxs)(d.li,{children:["3\uFF09\u6700\u540E",(0,s.jsx)(d.code,{children:"Pod"}),"\u8C03\u5EA6\u7684\u65F6\u5019\uFF0C\u7531\u4E8E\u6CA1\u6709\u6DFB\u52A0\u5BF9\u5E94\u7684\u5BB9\u5FCD\uFF0C\u56E0\u6B64\u4F1A\u4F18\u5148\u8C03\u5EA6\u5230\u5176\u4ED6\u8282\u70B9\uFF0C\u6216\u8005\u6700\u7EC8\u8C03\u5EA6\u5931\u8D25"]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u6709\u65F6\u5019\u8282\u70B9\u72B6\u6001\u5904\u4E8E\u9608\u503C\u9644\u8FD1\u4E0A\u4E0B\u6CE2\u52A8\uFF0C\u5BFC\u81F4\u8F6F\u9A71\u9010\u6761\u4EF6\u4E5F\u5728",(0,s.jsx)(d.code,{children:"true"}),"\u548C",(0,s.jsx)(d.code,{children:"false"}),"\u4E4B\u95F4\u53CD\u590D\u5207\u6362\uFF0C\u4E3A\u4E86\u8FC7\u6EE4\u6389\u8FD9\u79CD\u8BEF\u5DEE\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"})," \u63D0\u4F9B\u4E86 ",(0,s.jsx)(d.code,{children:"eviction-pressure-transition-period"})," \u53C2\u6570\u6765\u9650\u5236\uFF0C\u8282\u70B9\u72B6\u6001\u8F6C\u6362\u524D\u5FC5\u987B\u8981\u7B49\u5F85\u5BF9\u5E94\u7684\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u4E3A",(0,s.jsx)(d.code,{children:"5m"}),"\u3002"]}),"\n",(0,s.jsxs)(d.blockquote,{children:["\n",(0,s.jsxs)(d.p,{children:["\u4E00\u822C\u8FD9\u79CD\u68C0\u6D4B\u72B6\u6001\u7684\u4E3A\u4E86\u63D0\u5347\u7A33\u5B9A\u6027\uFF0C\u90FD\u4F1A\u7ED9\u4E00\u4E2A\u9759\u9ED8\u671F\uFF0C\u6BD4\u5982",(0,s.jsx)(d.code,{children:"K8S"}),"\u4E2D\u7684",(0,s.jsx)(d.code,{children:"HPA"}),"\u6269\u7F29\u5BB9\u4E5F\u4F1A\u8BBE\u7F6E\u9759\u9ED8\u671F\uFF0C\u9632\u6B62\u9891\u7E41\u89E6\u53D1\u6269\u7F29\u5BB9\u52A8\u4F5C\u3002"]}),"\n"]}),"\n",(0,s.jsx)(d.h3,{id:"22-\u9A71\u9010\u9608\u503C\u5224\u65AD\u6761\u4EF6",children:"2.2 \u9A71\u9010\u9608\u503C\uFF1A\u5224\u65AD\u6761\u4EF6"}),"\n",(0,s.jsx)(d.p,{children:"\u62FF\u5230\u8D44\u6E90\u5F53\u524D\u72B6\u6001\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u6839\u636E\u9608\u503C\u5224\u65AD\u662F\u5426\u9700\u8981\u89E6\u53D1\u9A71\u9010\u52A8\u4F5C\u4E86\u3002"}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u4F7F\u7528",(0,s.jsx)(d.code,{children:"[eviction-signal][operator][quantity]"}),"\u683C\u5F0F\u5B9A\u4E49\u9A71\u9010\u6761\u4EF6\uFF0C\u5176\u4E2D\uFF1A"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"eviction-signal"})," \u662F\u8981\u4F7F\u7528\u7684\u9A71\u9010\u4FE1\u53F7","\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u6BD4\u5982\u5269\u4F59\u5185\u5B58 ",(0,s.jsx)(d.code,{children:"memory.available"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"operator"})," \u662F\u4F60\u60F3\u8981\u7684\u5173\u7CFB\u8FD0\u7B97\u7B26","\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u6BD4\u5982 ",(0,s.jsx)(d.code,{children:"<"}),"\uFF08\u5C0F\u4E8E\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"quantity"})," \u662F\u9A71\u9010\u6761\u4EF6\u6570\u91CF\uFF0C\u4F8B\u5982 ",(0,s.jsx)(d.code,{children:"1Gi"}),"\u3002","\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"quantity"})," \u7684\u503C\u5FC5\u987B\u4E0E",(0,s.jsx)(d.code,{children:"Kubernetes"}),"\u4F7F\u7528\u7684\u6570\u91CF\u8868\u793A\u76F8\u5339\u914D\u3002"]}),"\n",(0,s.jsxs)(d.li,{children:["\u4F60\u53EF\u4EE5\u4F7F\u7528\u6587\u5B57\u503C\u6216\u767E\u5206\u6BD4\uFF08",(0,s.jsx)(d.code,{children:"%"}),"\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u8282\u70B9\u7684\u603B\u5185\u5B58\u4E3A",(0,s.jsx)(d.code,{children:"10GiB"}),"\u5E76\u4E14\u4F60\u5E0C\u671B\u5728\u53EF\u7528\u5185\u5B58\u4F4E\u4E8E",(0,s.jsx)(d.code,{children:"1GiB"}),"\u65F6\u89E6\u53D1\u9A71\u9010\uFF0C \u5219\u53EF\u4EE5\u5C06\u9A71\u9010\u6761\u4EF6\u5B9A\u4E49\u4E3A ",(0,s.jsx)(d.code,{children:"memory.available < 10%"})," \u6216 ",(0,s.jsx)(d.code,{children:"memory.available < 1G"}),"\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u6839\u636E\u7D27\u6025\u7A0B\u5EA6\u9A71\u9010\u6761\u4EF6\u53C8\u5206\u4E3A",(0,s.jsxs)(d.strong,{children:["\u8F6F\u9A71\u9010 ",(0,s.jsx)(d.code,{children:"eviction-soft"})]})," \u548C ",(0,s.jsxs)(d.strong,{children:["\u786C\u9A71\u9010 ",(0,s.jsx)(d.code,{children:"eviction-hard"})]}),"\uFF1A"]}),"\n",(0,s.jsx)(d.h4,{id:"221-\u8F6F\u9A71\u9010-eviction-soft",children:"2.2.1 \u8F6F\u9A71\u9010 eviction-soft"}),"\n",(0,s.jsxs)(d.p,{children:["\u4E00\u822C\u9A71\u9010\u6761\u4EF6\u6BD4\u8F83\u4FDD\u5B88\uFF0C\u6B64\u65F6\u8FD8\u53EF\u4EE5\u7B49\u5F85",(0,s.jsx)(d.code,{children:"Pod"}),"\u4F18\u96C5\u7EC8\u6B62\uFF0C\u9700\u8981\u914D\u7F6E\u4EE5\u4E0B\u53C2\u6570"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"eviction-soft"}),"\uFF1A\u8F6F\u9A71\u9010\u6761\u4EF6\uFF0C\u4F8B\u5982 ",(0,s.jsx)(d.code,{children:"memory.available<1.5Gi"})]}),"\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"eviction-soft-grace-period"}),"\uFF1A\u8F6F\u9A71\u9010\u5BBD\u9650\u671F\uFF0C\u9700\u8981\u4FDD\u6301\u9A71\u9010\u6761\u4EF6\u8FD9\u4E48\u4E45\u4E4B\u540E\u624D\u5F00\u59CB\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF08\u5FC5\u987B\u6307\u5B9A\uFF0C\u5426\u5219",(0,s.jsx)(d.code,{children:"kubelet"}),"\u542F\u52A8\u65F6\u4F1A\u76F4\u63A5\u62A5\u9519\uFF09"]}),"\n",(0,s.jsxs)(d.li,{children:[(0,s.jsx)(d.code,{children:"eviction-max-pod-grace-period"}),"\uFF1A\u8F6F\u9A71\u9010\u6700\u5927",(0,s.jsx)(d.code,{children:"Pod"}),"\u5BBD\u9650\u671F\uFF0C\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u7684\u65F6\u5019\u7ED9",(0,s.jsx)(d.code,{children:"Pod"}),"\u4F18\u96C5\u7EC8\u6B62\u7684\u65F6\u95F4"]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5728 ",(0,s.jsx)(d.a,{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination",children:"Pod \u751F\u547D\u5468\u671F\u90E8\u5206"})," \u6211\u4EEC\u53EF\u4EE5\u914D\u7F6E ",(0,s.jsx)(d.code,{children:"spec.terminationGracePeriodSeconds"}),"\u6765\u63A7\u5236",(0,s.jsx)(d.code,{children:"Pod"}),"\u4F18\u96C5\u7EC8\u6B62\u65F6\u95F4\uFF0C\u5C31\u50CF\u8FD9\u6837\uFF1A"]}),"\n",(0,s.jsx)(d.pre,{children:(0,s.jsx)(d.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: example\nspec:\n  containers:  \n  - name: my-container    \n    image: my-image  \n    terminationGracePeriodSeconds: 60  # \u8BBE\u7F6E\u7EC8\u6B62\u671F\u9650\u4E3A 60 \u79D2\n"})}),"\n",(0,s.jsxs)(d.p,{children:["\u7136\u540E\u9A71\u9010\u8FD9\u91CC\u53C8\u914D\u7F6E\u4E86\u4E00\u4E2A ",(0,s.jsx)(d.code,{children:"eviction-max-pod-grace-period"}),",\u5B9E\u9645\u9A71\u9010\u53D1\u751F\u65F6\uFF0C",(0,s.jsxs)(d.strong,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u4F1A\u53D6\u4E8C\u8005\u4E2D\u7684\u8F83\u5C0F\u503C\u6765\u4F5C\u4E3A\u6700\u7EC8\u4F18\u96C5\u7EC8\u6B62\u5BBD\u9650\u671F"]}),"\u3002"]}),"\n",(0,s.jsx)(d.h4,{id:"222-\u786C\u9A71\u9010-eviction-hard",children:"2.2.2 \u786C\u9A71\u9010 eviction-hard"}),"\n",(0,s.jsx)(d.p,{children:"\u76F8\u6BD4\u4E4B\u4E0B\u5219\u662F\u6BD4\u8F83\u7D27\u6025\uFF0C\u914D\u7F6E\u6761\u4EF6\u90FD\u5F88\u6781\u9650\uFF0C\u5728\u5F80\u4E0A\u8282\u70B9\u53EF\u80FD\u4F1A\u5D29\u6E83\u7684\u90A3\u79CD\u3002"}),"\n",(0,s.jsxs)(d.p,{children:["\u6BD4\u5982 \u5185\u5B58\u5C0F\u4E8E",(0,s.jsx)(d.code,{children:"100Mi"}),"\u8FD9\u79CD\uFF0C\u56E0\u6B64\u786C\u9A71\u9010\u6CA1\u6709\u5BB9\u5FCD\u65F6\u95F4\uFF0C\u9700\u8981\u914D\u7F6E\u786C\u9A71\u9010\u6761\u4EF6 ",(0,s.jsx)(d.code,{children:"eviction-hard"}),"\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u53EA\u8981\u6EE1\u8DB3\u9A71\u9010\u6761\u4EF6 ",(0,s.jsx)(d.code,{children:"kubelet"})," \u5C31\u4F1A\u7ACB\u9A6C\u5C06 ",(0,s.jsx)(d.code,{children:"pod kill"})," \u6389\uFF0C\u800C\u4E0D\u662F\u53D1\u9001 ",(0,s.jsx)(d.code,{children:"SIGTERM"})," \u4FE1\u53F7\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u63D0\u4F9B\u4E86\u4EE5\u4E0B\u7684\u9ED8\u8BA4\u786C\u9A71\u9010\u6761\u4EF6\uFF1A"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"memory.available < 100Mi"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"nodefs.available < 10%"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"imagefs.available < 15%"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"nodefs.inodesFree < 5%"})}),"\n"]}),"\n",(0,s.jsx)(d.p,{children:"\u4F8B\u5982\u4E0B\u9762\u8FD9\u4E2A\u914D\u7F6E\uFF1A"}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"eviction-soft: memory.available < 1 Gi"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"eviction-soft-grace-period: 60s"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"eviction-max-pod-grace-period: 30s"})}),"\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.code,{children:"eviction-hard: memory.available < 100 Mi"})}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5F53\u8282\u70B9\u53EF\u7528\u5185\u5B58\u4F59\u91CF\u4F4E\u4E8E",(0,s.jsx)(d.code,{children:"1Gi"}),"\u8FDE\u7EED\u6301\u7EED",(0,s.jsx)(d.code,{children:"60s"}),"\u4E4B\u540E\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u5C31\u4F1A\u5F00\u59CB\u8F6F\u9A71\u9010\uFF0C\u7ED9\u88AB\u9009\u62E9\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u53D1\u9001",(0,s.jsx)(d.code,{children:"SIGTERM"}),"\uFF0C\u4F7F\u5176\u4F18\u5316\u7EC8\u6B62\uFF0C\u5982\u679C\u7EC8\u6B62\u65F6\u95F4\u8D85\u8FC7",(0,s.jsx)(d.code,{children:"30s"}),"\u5219\u5F3A\u5236",(0,s.jsx)(d.code,{children:"kill"}),"\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5982\u679C\u8282\u70B9\u5185\u5B58\u53EF\u7528\u4F59\u91CF\u4F4E\u4E8E",(0,s.jsx)(d.code,{children:"100Mi"}),"\uFF0C\u5219",(0,s.jsx)(d.code,{children:"kubelet"}),"\u8FDB\u5165\u786C\u9A71\u9010\uFF0C\u7ACB\u9A6C",(0,s.jsx)(d.code,{children:"kill"}),"\u6389\u88AB\u9009\u4E2D\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u3002"]}),"\n",(0,s.jsx)(d.h3,{id:"23-\u72B6\u6001\u68C0\u6D4B--\u9A71\u9010\u9891\u7387",children:"2.3 \u72B6\u6001\u68C0\u6D4B & \u9A71\u9010\u9891\u7387"}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u9ED8\u8BA4\u6BCF",(0,s.jsx)(d.code,{children:"10s"}),"\u4F1A\u68C0\u6D4B\u4E00\u6B21\u8282\u70B9\u72B6\u6001\uFF0C\u5373\u9A71\u9010\u5224\u65AD\u6761\u4EF6\u4E3A",(0,s.jsx)(d.code,{children:"10s"}),"\u4E00\u6B21\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u901A\u8FC7",(0,s.jsx)(d.code,{children:"housekeeping-interval"}),"\u53C2\u6570\u8FDB\u884C\u914D\u7F6E\u3002"]}),"\n",(0,s.jsx)(d.h2,{id:"3-\u56DE\u6536\u8282\u70B9\u7EA7\u8D44\u6E90",children:"3. \u56DE\u6536\u8282\u70B9\u7EA7\u8D44\u6E90"}),"\n",(0,s.jsxs)(d.p,{children:["\u4E3A\u4E86\u63D0\u5347\u7A33\u5B9A\u6027\uFF0C\u51CF\u5C11",(0,s.jsx)(d.code,{children:"Pod"}),"\u9A71\u9010\u6B21\u6570\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u5728\u6267\u884C\u9A71\u9010\u524D\u4F1A\u8FDB\u884C\u4E00\u6B21\u5783\u573E\u56DE\u6536\u3002\u5982\u679C\u672C\u5730\u5783\u573E\u56DE\u6536\u540E\u8D44\u6E90\u5145\u8DB3\u4E86\u5C31\u4E0D\u518D\u9A71\u9010\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5BF9\u4E8E\u78C1\u76D8\u8D44\u6E90\u53EF\u4EE5\u901A\u8FC7\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u4EE5\u5916\u7684\u65B9\u5F0F\u8FDB\u884C\u56DE\u6536\uFF1A"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5982\u679C\u8282\u70B9\u6709\u4E00\u4E2A\u4E13\u7528\u7684 ",(0,s.jsx)(d.code,{children:"imagefs"}),"\u6587\u4EF6\u7CFB\u7EDF\u4F9B\u5BB9\u5668\u8FD0\u884C\u65F6\u4F7F\u7528\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u4F1A\u6267\u884C\u4EE5\u4E0B\u64CD\u4F5C\uFF1A"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u5982\u679C ",(0,s.jsx)(d.code,{children:"nodefs"}),"\u6587\u4EF6\u7CFB\u7EDF\u6EE1\u8DB3\u9A71\u9010\u6761\u4EF6\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u5783\u573E\u6536\u96C6\u6B7B\u4EA1",(0,s.jsx)(d.code,{children:"Pod"}),"\u548C\u5BB9\u5668\u3002"]}),"\n",(0,s.jsxs)(d.li,{children:["\u5982\u679C ",(0,s.jsx)(d.code,{children:"imagefs"}),"\u6587\u4EF6\u7CFB\u7EDF\u6EE1\u8DB3\u9A71\u9010\u6761\u4EF6\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u5C06\u5220\u9664\u6240\u6709\u672A\u4F7F\u7528\u7684\u955C\u50CF\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5982\u679C\u8282\u70B9\u53EA\u6709\u4E00\u4E2A\u6EE1\u8DB3\u9A71\u9010\u6761\u4EF6\u7684",(0,s.jsx)(d.code,{children:"nodefs"}),"\u6587\u4EF6\u7CFB\u7EDF\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u6309\u4EE5\u4E0B\u987A\u5E8F\u91CA\u653E\u78C1\u76D8\u7A7A\u95F4\uFF1A"]}),"\n",(0,s.jsxs)(d.ol,{children:["\n",(0,s.jsxs)(d.li,{children:["\u5BF9\u6B7B\u4EA1\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u548C\u5BB9\u5668\u8FDB\u884C\u5783\u573E\u6536\u96C6"]}),"\n",(0,s.jsx)(d.li,{children:"\u5220\u9664\u672A\u4F7F\u7528\u7684\u955C\u50CF"}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u5BF9\u4E8ECPU\u3001\u5185\u5B58\u8D44\u6E90\u5219\u662F\u53EA\u80FD\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u65B9\u5F0F\u8FDB\u884C\u56DE\u6536\u3002"]}),"\n",(0,s.jsx)(d.h2,{id:"4-\u9A71\u9010\u5BF9\u8C61\u54EA\u4E9B-pod-\u4F1A\u88AB\u9A71\u9010",children:"4. \u9A71\u9010\u5BF9\u8C61\uFF1A\u54EA\u4E9B Pod \u4F1A\u88AB\u9A71\u9010"}),"\n",(0,s.jsxs)(d.p,{children:["\u5982\u679C\u8FDB\u884C\u5783\u573E\u56DE\u6536\u540E\uFF0C\u8282\u70B9\u8D44\u6E90\u4E5F\u6EE1\u8DB3\u9A71\u9010\u6761\u4EF6\uFF0C\u90A3\u4E48\u4E3A\u4E86\u4FDD\u8BC1\u5F53\u524D\u8282\u70B9\u4E0D\u88AB\u538B\u57AE\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u53EA\u80FD\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u4E86\u3002"]}),"\n",(0,s.jsx)(d.p,{children:"\u6839\u636E\u89E6\u53D1\u9A71\u9010\u7684\u8D44\u6E90\u4E0D\u540C\uFF0C\u9A71\u9010\u76EE\u6807\u7B5B\u9009\u903B\u8F91\u4E5F\u6709\u4E0D\u540C\u3002"}),"\n",(0,s.jsx)(d.h3,{id:"41-\u5185\u5B58\u8D44\u6E90\u5BFC\u81F4\u7684\u9A71\u9010",children:"4.1 \u5185\u5B58\u8D44\u6E90\u5BFC\u81F4\u7684\u9A71\u9010"}),"\n",(0,s.jsxs)(d.p,{children:["\u5BF9\u4E8E\u5185\u5B58\u8D44\u6E90",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4F7F\u7528\u4EE5\u4E0B\u53C2\u6570\u6765\u786E\u5B9A",(0,s.jsx)(d.code,{children:"Pod"}),"\u9A71\u9010\u987A\u5E8F\uFF1A",(0,s.jsx)(d.a,{href:"https://github.com/kubernetes/kubernetes/blob/4096c9209cbf20c51d184e83ab6ffa3853bd2ee6/pkg/kubelet/eviction/eviction_manager.go#L254",children:"https://github.com/kubernetes/kubernetes/blob/4096c9209cbf20c51d184e83ab6ffa3853bd2ee6/pkg/kubelet/eviction/eviction_manager.go#L254"})]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["1\uFF09",(0,s.jsx)(d.strong,{children:(0,s.jsx)(d.code,{children:"Pod"})})," ",(0,s.jsx)(d.strong,{children:"\u4F7F\u7528\u7684\u8D44\u6E90\u662F\u5426\u8D85\u8FC7\u8BF7\u6C42\u503C"}),"\uFF1A\u5373\u5F53\u524D\u5360\u7528\u8D44\u6E90\u662F\u5426\u9AD8\u4E8E",(0,s.jsx)(d.code,{children:"yaml"}),"\u4E2D\u6307\u5B9A\u7684",(0,s.jsx)(d.code,{children:"requests"}),"\u503C"]}),"\n",(0,s.jsxs)(d.li,{children:["2\uFF09",(0,s.jsx)(d.strong,{children:(0,s.jsx)(d.code,{children:"Pod"})})," ",(0,s.jsx)(d.strong,{children:"\u7684\u4F18\u5148\u7EA7"}),"\uFF1A\u8FD9\u91CC\u4E0D\u662F",(0,s.jsx)(d.code,{children:"QoS"}),"\u4F18\u5148\u7EA7\uFF0C\u800C\u662F ",(0,s.jsx)(d.a,{href:"https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/pod-priority-preemption/",children:"priority-class"})," \u8FD9\u4E2A\u4F18\u5148\u7EA7"]}),"\n",(0,s.jsxs)(d.li,{children:["3\uFF09",(0,s.jsx)(d.strong,{children:(0,s.jsx)(d.code,{children:"Pod"})})," ",(0,s.jsx)(d.strong,{children:"\u4F7F\u7528\u8D44\u6E90\u76F8\u5BF9\u4E8E\u8BF7\u6C42\u8D44\u6E90\u7684\u767E\u5206\u6BD4"}),"\uFF1A\u767E\u5206\u6BD4\u8D8A\u9AD8\u5219\u8D8A\u5BB9\u6613\u522B\u9A71\u9010\uFF0C\u6BD4\u5982\u8BF7\u6C42",(0,s.jsx)(d.code,{children:"100Mi"}),"\uFF0C\u4F7F\u7528\u4E86",(0,s.jsx)(d.code,{children:"60Mi"}),"\u5219\u5360\u7528\u4E86",(0,s.jsx)(d.code,{children:"60%"}),"\uFF0C\u5982\u679C\u6CA1\u6709",(0,s.jsx)(d.code,{children:"limits"}),"\u5BFC\u81F4",(0,s.jsx)(d.code,{children:"Pod"}),"\u4F7F\u7528\u4E86",(0,s.jsx)(d.code,{children:"200Mi"}),"\uFF0C\u90A3\u5C31\u662F",(0,s.jsx)(d.code,{children:"200%"})]}),"\n"]}),"\n",(0,s.jsxs)(d.p,{children:["\u56E0\u6B64\uFF0C\u867D\u7136\u6CA1\u6709\u4E25\u683C\u6309\u7167",(0,s.jsx)(d.code,{children:"QoS"}),"\u6765\u6392\u5E8F\uFF0C\u4F46\u662F\u6574\u4E2A\u9A71\u9010\u987A\u5E8F\u548C",(0,s.jsx)(d.code,{children:"Pod"}),"\u7684",(0,s.jsx)(d.code,{children:"QoS"}),"\u662F\u6709\u5F88\u5927\u5173\u7CFB\u7684\uFF1A"]}),"\n",(0,s.jsx)(d.h4,{id:"411-qos-\u7EA7\u522B\u4ECB\u7ECD",children:"4.1.1 QoS \u7EA7\u522B\u4ECB\u7ECD"}),"\n",(0,s.jsxs)(d.p,{children:["\u5728",(0,s.jsx)(d.code,{children:"Kubernetes"}),"\u4E2D\uFF0C",(0,s.jsx)(d.code,{children:"Pod"}),"\u6839\u636E\u5176\u8D44\u6E90\u914D\u7F6E\u88AB\u5206\u4E3A\u4E09\u4E2A",(0,s.jsx)(d.code,{children:"QoS"}),"\uFF08",(0,s.jsx)(d.code,{children:"Quality of Service"}),"\uFF09\u7EA7\u522B\uFF1A"]}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)(d.strong,{children:"1. Guaranteed\uFF08\u4FDD\u8BC1\u7EA7\u522B\uFF09"})}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u6240\u6709\u5BB9\u5668\u90FD\u5FC5\u987B\u8BBE\u7F6ECPU\u548C\u5185\u5B58\u7684",(0,s.jsx)(d.code,{children:"requests"}),"\u548C",(0,s.jsx)(d.code,{children:"limits"})]}),"\n",(0,s.jsxs)(d.li,{children:["\u6BCF\u4E2A\u5BB9\u5668\u7684",(0,s.jsx)(d.code,{children:"requests"}),"\u5FC5\u987B\u7B49\u4E8E",(0,s.jsx)(d.code,{children:"limits"})]}),"\n",(0,s.jsxs)(d.li,{children:["\u8FD9\u7C7B",(0,s.jsx)(d.code,{children:"Pod"}),"\u62E5\u6709\u6700\u9AD8\u7684\u670D\u52A1\u8D28\u91CF\u4FDD\u8BC1\uFF0C\u5728\u8D44\u6E90\u7D27\u5F20\u65F6\u6700\u4E0D\u5BB9\u6613\u88AB\u9A71\u9010"]}),"\n"]}),"\n",(0,s.jsx)(d.pre,{children:(0,s.jsx)(d.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nspec:\n  containers:\n  - name: app\n    resources:\n      requests:\n        memory: "1Gi"\n        cpu: "500m"\n      limits:\n        memory: "1Gi"    # \u5FC5\u987B\u7B49\u4E8Erequests\n        cpu: "500m"      # \u5FC5\u987B\u7B49\u4E8Erequests\n'})}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)(d.strong,{children:"2. Burstable\uFF08\u7A81\u53D1\u7EA7\u522B\uFF09"})}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u81F3\u5C11\u6709\u4E00\u4E2A\u5BB9\u5668\u8BBE\u7F6E\u4E86CPU\u6216\u5185\u5B58\u7684",(0,s.jsx)(d.code,{children:"requests"})]}),"\n",(0,s.jsxs)(d.li,{children:["\u4E0D\u6EE1\u8DB3",(0,s.jsx)(d.code,{children:"Guaranteed"}),"\u7EA7\u522B\u7684\u6761\u4EF6\uFF08\u5373",(0,s.jsx)(d.code,{children:"requests"}),"\u4E0D\u7B49\u4E8E",(0,s.jsx)(d.code,{children:"limits"}),"\uFF0C\u6216\u8005\u90E8\u5206\u5BB9\u5668\u672A\u8BBE\u7F6E",(0,s.jsx)(d.code,{children:"limits"}),"\uFF09"]}),"\n",(0,s.jsxs)(d.li,{children:["\u8FD9\u7C7B",(0,s.jsx)(d.code,{children:"Pod"}),"\u53EF\u4EE5\u5728\u8D44\u6E90\u5145\u8DB3\u65F6\u4F7F\u7528\u8D85\u8FC7",(0,s.jsx)(d.code,{children:"requests"}),"\u7684\u8D44\u6E90"]}),"\n"]}),"\n",(0,s.jsx)(d.pre,{children:(0,s.jsx)(d.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nspec:\n  containers:\n  - name: app\n    resources:\n      requests:\n        memory: "512Mi"\n        cpu: "250m"\n      limits:\n        memory: "1Gi"    # \u5927\u4E8Erequests\uFF0C\u5141\u8BB8\u7A81\u53D1\u4F7F\u7528\n        cpu: "1000m"     # \u5927\u4E8Erequests\uFF0C\u5141\u8BB8\u7A81\u53D1\u4F7F\u7528\n'})}),"\n",(0,s.jsx)(d.p,{children:(0,s.jsx)(d.strong,{children:"3. BestEffort\uFF08\u5C3D\u529B\u800C\u4E3A\u7EA7\u522B\uFF09"})}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u6240\u6709\u5BB9\u5668\u90FD\u6CA1\u6709\u8BBE\u7F6ECPU\u548C\u5185\u5B58\u7684",(0,s.jsx)(d.code,{children:"requests"}),"\u548C",(0,s.jsx)(d.code,{children:"limits"})]}),"\n",(0,s.jsxs)(d.li,{children:["\u8FD9\u7C7B",(0,s.jsx)(d.code,{children:"Pod"}),"\u5728\u8D44\u6E90\u7D27\u5F20\u65F6\u6700\u5BB9\u6613\u88AB\u9A71\u9010"]}),"\n"]}),"\n",(0,s.jsx)(d.pre,{children:(0,s.jsx)(d.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nspec:\n  containers:\n  - name: app\n    resources: {}  # \u6CA1\u6709\u8BBE\u7F6E\u4EFB\u4F55\u8D44\u6E90\u9650\u5236\n"})}),"\n",(0,s.jsx)(d.h4,{id:"412-\u9A71\u9010\u4F18\u5148\u7EA7\u5173\u7CFB",children:"4.1.2 \u9A71\u9010\u4F18\u5148\u7EA7\u5173\u7CFB"}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u9996\u5148\u8003\u8651\u8D44\u6E90\u4F7F\u7528\u91CF\u8D85\u8FC7\u5176\u8BF7\u6C42\u7684",(0,s.jsx)(d.code,{children:"QoS"}),"\u7EA7\u522B\u4E3A",(0,s.jsx)(d.code,{children:"BestEffort"}),"\u6216",(0,s.jsx)(d.code,{children:"Burstable"}),"\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u3002 \u8FD9\u4E9B",(0,s.jsx)(d.code,{children:"Pod"}),"\u4F1A\u6839\u636E\u5B83\u4EEC\u7684\u4F18\u5148\u7EA7\u4EE5\u53CA\u5B83\u4EEC\u7684\u8D44\u6E90\u4F7F\u7528\u7EA7\u522B\u8D85\u8FC7\u5176\u8BF7\u6C42\u7684\u7A0B\u5EA6\u88AB\u9A71\u9010\u3002"]}),"\n",(0,s.jsxs)(d.li,{children:["\u8D44\u6E90\u4F7F\u7528\u91CF\u5C11\u4E8E\u8BF7\u6C42\u91CF\u7684",(0,s.jsx)(d.code,{children:"Guaranteed"}),"\u7EA7\u522B\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\u548C",(0,s.jsx)(d.code,{children:"Burstable Pod"}),"\u6839\u636E\u5176\u4F18\u5148\u7EA7\u88AB\u6700\u540E\u9A71\u9010\u3002"]}),"\n"]}),"\n",(0,s.jsx)(d.h3,{id:"42-inode--pid-\u5BFC\u81F4\u7684\u9A71\u9010",children:"4.2 inode & pid \u5BFC\u81F4\u7684\u9A71\u9010"}),"\n",(0,s.jsxs)(d.p,{children:["\u5F53",(0,s.jsx)(d.code,{children:"kubelet"}),"\u56E0 ",(0,s.jsx)(d.strong,{children:"inode"})," \u6216 ",(0,s.jsx)(d.strong,{children:"\u8FDB\u7A0B\u6807\u8BC6\u7B26(pid)"})," \u4E0D\u8DB3\u800C\u9A71\u9010",(0,s.jsx)(d.code,{children:"Pod"}),"\u65F6\uFF0C \u5B83\u4F7F\u7528",(0,s.jsx)(d.code,{children:"Pod"}),"\u7684\u76F8\u5BF9\u4F18\u5148\u7EA7\u6765\u786E\u5B9A\u9A71\u9010\u987A\u5E8F\uFF0C\u56E0\u4E3A",(0,s.jsx)(d.code,{children:"inode"}),"\u548C",(0,s.jsx)(d.code,{children:"PID"}),"\u6CA1\u6709\u5BF9\u5E94\u7684\u8BF7\u6C42\u5B57\u6BB5\u3002"]}),"\n",(0,s.jsx)(d.p,{children:"\u76F8\u5BF9\u4F18\u5148\u7EA7\u6392\u5E8F\u65B9\u5F0F\u5982\u4E0B\uFF1A"}),"\n",(0,s.jsxs)(d.ol,{children:["\n",(0,s.jsxs)(d.li,{children:["\u8282\u70B9\u6709 ",(0,s.jsx)(d.code,{children:"imagefs"}),"\uFF1A"]}),"\n"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u5982\u679C ",(0,s.jsx)(d.code,{children:"nodefs"})," \u89E6\u53D1\u9A71\u9010\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4F1A\u6839\u636E ",(0,s.jsx)(d.code,{children:"nodefs"})," \u4F7F\u7528\u60C5\u51B5\uFF08",(0,s.jsx)(d.code,{children:"\u672C\u5730\u5377 + \u6240\u6709\u5BB9\u5668\u7684\u65E5\u5FD7"}),"\uFF09\u5BF9",(0,s.jsx)(d.code,{children:"Pod"}),"\u8FDB\u884C\u6392\u5E8F\u3002"]}),"\n",(0,s.jsxs)(d.li,{children:["\u5982\u679C ",(0,s.jsx)(d.code,{children:"imagefs"})," \u89E6\u53D1\u9A71\u9010\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4F1A\u6839\u636E\u6240\u6709\u5BB9\u5668\u7684\u53EF\u5199\u5C42\u4F7F\u7528\u60C5\u51B5\u5BF9",(0,s.jsx)(d.code,{children:"Pod"}),"\u8FDB\u884C\u6392\u5E8F\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(d.ol,{start:"2",children:["\n",(0,s.jsxs)(d.li,{children:["\u8282\u70B9\u6CA1\u6709 ",(0,s.jsx)(d.code,{children:"imagefs"}),"\uFF1A"]}),"\n"]}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsxs)(d.li,{children:["\u5982\u679C ",(0,s.jsx)(d.code,{children:"nodefs"})," \u89E6\u53D1\u9A71\u9010\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4F1A\u6839\u636E\u78C1\u76D8\u603B\u7528\u91CF\uFF08",(0,s.jsx)(d.code,{children:"\u672C\u5730\u5377 + \u65E5\u5FD7\u548C\u6240\u6709\u5BB9\u5668\u7684\u53EF\u5199\u5C42"}),"\uFF09\u5BF9",(0,s.jsx)(d.code,{children:"Pod"}),"\u8FDB\u884C\u6392\u5E8F\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(d.ol,{start:"3",children:["\n",(0,s.jsxs)(d.li,{children:["\u5373\uFF1A",(0,s.jsx)(d.code,{children:"inode\u3001pid"}),"\u5BFC\u81F4\u7684\u9A71\u9010\uFF0C",(0,s.jsx)(d.code,{children:"Kubelet"}),"\u4F1A\u4F18\u5148\u9A71\u9010\u78C1\u76D8\u6D88\u8017\u5927\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF0C\u800C\u4E0D\u662F\u6839\u636E",(0,s.jsx)(d.code,{children:"Pod QoS"}),"\u6765\u3002"]}),"\n"]}),"\n",(0,s.jsx)(d.h3,{id:"43-\u5C0F\u7ED3",children:"4.3 \u5C0F\u7ED3"}),"\n",(0,s.jsxs)(d.p,{children:[(0,s.jsx)(d.code,{children:"Kubelet"}),"\u5E76\u6CA1\u6709\u4F7F\u7528",(0,s.jsx)(d.code,{children:"QoS"}),"\u6765\u4F5C\u4E3A\u9A71\u9010\u987A\u5E8F\uFF0C\u4F46\u662F\u5BF9\u4E8E",(0,s.jsx)(d.strong,{children:"\u5185\u5B58\u8D44\u6E90\u56DE\u6536"}),"\u7684\u573A\u666F\uFF0C\u9A71\u9010\u987A\u5E8F\u548C",(0,s.jsx)(d.code,{children:"QoS"}),"\u662F\u76F8\u5DEE\u4E0D\u5927\u7684\u3002\u4E0D\u8FC7\u5BF9\u4E8E ",(0,s.jsx)(d.strong,{children:"\u78C1\u76D8\u548C PID"})," \u8D44\u6E90\u7684\u56DE\u6536\u5219\u5B8C\u5168\u4E0D\u4E00\u6837\u7684\uFF0C\u4F1A\u4F18\u5148\u8003\u8651\u9A71\u9010\u78C1\u76D8\u5360\u7528\u591A\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF0C\u5373\u4F7F",(0,s.jsx)(d.code,{children:"Pod QoS"}),"\u7B49\u7EA7\u4E3A ",(0,s.jsx)(d.code,{children:"Guaranteed"}),"\u3002"]}),"\n",(0,s.jsxs)(d.blockquote,{children:["\n",(0,s.jsxs)(d.p,{children:["\u6BD5\u7ADF\u4E0D\u662F\u6240\u6709\u8D44\u6E90\u90FD\u6709",(0,s.jsx)(d.code,{children:"requests"}),"\u548C",(0,s.jsx)(d.code,{children:"limits"}),"\uFF0C\u53EA\u80FD\u5148\u9A71\u9010\u5360\u7528\u91CF\u5927\u7684\u3002"]}),"\n"]}),"\n",(0,s.jsx)(d.h3,{id:"44-\u6700\u5C11\u8D44\u6E90\u56DE\u6536\u91CF",children:"4.4 \u6700\u5C11\u8D44\u6E90\u56DE\u6536\u91CF"}),"\n",(0,s.jsxs)(d.p,{children:["\u4E3A\u4E86\u4FDD\u8BC1\u5C3D\u91CF\u5C11\u7684",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u6BCF\u6B21\u53EA\u4F1A\u9A71\u9010\u4E00\u4E2A",(0,s.jsx)(d.code,{children:"Pod"}),"\uFF0C\u9A71\u9010\u540E\u5C31\u4F1A\u5224\u65AD\u4E00\u6B21\u8D44\u6E90\u662F\u5426\u5145\u8DB3\u3002"]}),"\n",(0,s.jsxs)(d.p,{children:["\u8FD9\u6837\u53EF\u80FD\u5BFC\u81F4\u8BE5\u8282\u70B9\u8D44\u6E90\u4E00\u76F4\u5904\u4E8E\u9A71\u9010\u9608\u503C\uFF0C\u53CD\u590D\u8FBE\u5230\u9A71\u9010\u6761\u4EF6\u4ECE\u800C\u89E6\u53D1\u591A\u6B21\u9A71\u9010\uFF0C",(0,s.jsx)(d.code,{children:"kubelet"}),"\u4E5F\u63D0\u4F9B\u4E86\u53C2\u6570 ",(0,s.jsx)(d.code,{children:"--eviction-minimum-reclaim"})," \u6765\u6307\u5B9A\u6BCF\u6B21\u9A71\u9010\u6700\u4F4E\u56DE\u6536\u8D44\u6E90\uFF0C\u8FBE\u5230\u8BE5\u503C\u540E\u624D\u505C\u6B62\u9A71\u9010\u3002\u4ECE\u800C\u51CF\u5C11\u89E6\u53D1\u9A71\u9010\u7684\u6B21\u6570\u3002"]}),"\n",(0,s.jsx)(d.h2,{id:"5-\u53C2\u8003\u8D44\u6599",children:"5. \u53C2\u8003\u8D44\u6599"}),"\n",(0,s.jsxs)(d.ul,{children:["\n",(0,s.jsx)(d.li,{children:(0,s.jsx)(d.a,{href:"https://www.lixueduan.com/posts/kubernetes/20-pod-eviction",children:"https://www.lixueduan.com/posts/kubernetes/20-pod-eviction"})}),"\n"]})]})}function x(e={}){let{wrapper:d}={...(0,c.a)(),...e.components};return d?(0,s.jsx)(d,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},50065:function(e,d,n){n.d(d,{Z:function(){return r},a:function(){return l}});var i=n(67294);let s={},c=i.createContext(s);function l(e){let d=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function r(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(c.Provider,{value:d},e.children)}}}]);