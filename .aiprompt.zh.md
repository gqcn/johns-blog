
# windsurf
我正在编写一篇技术文章，介绍如何使用GoFrame实现权限认证，文件路径为 "docs/hidden/0-GoFrame/2-权限认证.md"。
该文章主要描述以下内容：
1. 创建一个简单的权限认证模块。至少包含以下功能：
    - 用于管理权限的录入和验证
    - 支持HTTP路由规则的验证，比如http method和route path，其中route path为路由注册时的路由规则，例如"/user/{id}"。
    - 为了保证接口权限认证和自定义权限认证可以使用同一个表，那么我们可以使用一个auth_key字段来标识权限。如果是接口权限那么存储内容形如"GET:/user/{id}"，如果是自定义权限那么存储内容为"custom:permission_name"。
    - 支持自定义权限的控制
    - 不使用casbin组件，那个太复杂了
    - 不编写代码，只设计数据表结构即可，用表格展示出来。
2. 最新的goframe框架功能新增了`HandlerItemParsed.GetMetaTag`方法，用于通过`GetServeHandler`获取当前路由执行方法后，通过`GetMetaTag`方法获取接口定义的元数据信息，增强路由元数据管理能力。该功能可以用于权限认证中，在中间件中实现很灵活和自动的权限认证。
3. 介绍如何将该权限认证模块整合到goframe框架中，通过goframe中间件来实现自动的权限认证。不用编写详细的权限管理数据表的增删改查接口代码。仅描述权限认证即可。
4. 通过goframe的http server的路由获取方法可以在启动时获取所有的路由信息，并更新到权限认证模块中的数据表中。
5. 启动时获取路由信息并更新到权限模块数据表的逻辑，可以使用goframe http server的Plugin接口来实现，这里可以简单介绍下Plugin接口。
6. goframe不支持注释的方式管理元数据，在编写接口定义时，使用goframe的规范路由定义方式，使用g.Meta的元数据标签管理方式。在权限认证中，中间件可以通过GetMetaTag方法获取到g.Meta元数据标签中的method和path元数据，以此来做权限认证。元数据定义在api输入结构体中，例如以下结构体中，`g.Meta`中所有的标签内容即为元数据，标签中的`path`和`method`字段可以用于权限认证：
```go
type GetUserReq struct {
    g.Meta `path:"/user/{id}" tags:"User" method:"get" summary:"Get user list with basic info."`
    Id   int `dc:"User ID"`
}
```
7. 提供一些实战案例和最佳实践经验介绍。
8. 你觉得必要的内容可以尽量补充，保证文章完善、内容丰富。

请根据我的描述，思考大纲，并生成文章内容到文件中。如果你需要生成的内容较多，你可以分段写入到文档中。


# trae


