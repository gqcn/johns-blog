
# windsurf

## SQL Migrate数据库迁移与版本管理：管理数据库结构变更的有效方法
我正在编写一篇关于【SQL Migrate数据库迁移与版本管理：管理数据库结构变更的有效方法】的文章，文章的文件路径：/Users/john/Workspace/github/gqcn/johns-blog/docs/hidden/0-GoFrame/SQL Migrate数据库迁移与版本管理：管理数据库结构变更的有效方法.md
该文章需要：
1. 介绍几个数据库迁移与版本管理的业务场景，以及必要性
2. 介绍数据库迁移与版本管理的常见集中方式
3. 介绍使用工具进行migrate的优缺点
4. 介绍推荐的数据库迁移与版本管理方式




## 数据校验
我正在编写一篇关于【关联表查询的最佳实践，避免联表查询，以电商系统最佳实践为例】的文章，文章的文件路径：docs/hidden/0-GoFrame/0-关联表查询.md
该文章需要：
1. 介绍几个关联表查询的业务场景，以及必要性
2. 需要使用goframe orm来实现关联表查询，展示几个使用goframe orm实现关联表查询的示例
3. 代码示例中，仅展示代码核心逻辑即可，其他逻辑使用注释忽略
4. 文章需要说明针对大数据量的表不适合使用关联表查询，会有性能问题，并介绍会存在哪些性能问题
5. 推荐使用单表查询，在代码逻辑层做数据聚合。特别是针对高并发，大数据量的业务场，会有性能问题。
6. 介绍goframe orm实现关联表查询的一些注意事项

## 多租户隔离
我正在编写一篇关于使用Goframe来实现多租户隔离的文章，文章的文件路径：/Users/john/Workspace/github/gqcn/johns-blog/docs/hidden/0-GoFrame/0-多租户隔离.md
该文章需要：
1. 主要针对SaaS平台的多数据库隔离以及共享数据库的表隔离方案
2. 示例中的数据库需要使用mysql
3. 介绍多租户的相关基础知识点，比如为什么需要多租户，多租户的业务场景，以及必要性。
4. 介绍多租户的业务场景，以及必要性。例如，有哪些场景需要用到多租户。
5. 使用一个案例介绍多租户的设计和实现。



## Kubernetes Kind

我正在编写一篇关于使用Kubernetes Kind搭建本地测试集群的文章，文章的文件路径："/Users/john/Workspace/github/gqcn/johns-blog/docs/docs/3000-云原生/3000-使用Kubernetes Kind搭建本地测试集群.md"
该文章需要：
1. 介绍Kind的背景和用途
1. 介绍Kind与使用minikube搭建本地测试用Kubernetes的区别
2. 介绍Kind的安装和配置
3. 介绍Kind的使用方法
4. 介绍Kind的常见问题，例如docker镜像拉取失败需要设置国内镜像地址的问题

# NVIDIA: Dynamo

我正在编写一篇文章，介绍NVIDIA Dynamo项目，文章的文件路径: /Users/john/Workspace/github/gqcn/johns-blog/docs/docs/4000-AI技术/NVIDIA Dynamo: 分布式AI推理的高效引擎.md 。我需要你去查阅相关的互联网资料，至少包含以下资料：
- Dynamo github 文档：https://github.com/ai-dynamo/dynamo/tree/main/docs
- 我找到的一篇关于Dynamo的互联网资料：https://cloud.tencent.com/developer/article/2508888?policyId=1004
按照以下要求完成文章的编写：
1. 介绍Dynamo的背景和用途，为了解决什么业务场景和痛点
2. 介绍Dynamo的架构设计，包括整体架构设计、每个组件的简要介绍。
3. 介绍Dynamo的各个组件、作用、原理，在介绍时需要添加上开源项目上的图片，以便用户更好地理解。
4. 其他内容你觉得重要的话可以自行补充到文章中。


# goframe v3 


goframe框架目前的版本是v2版本，v2版本的源码在这里：/Users/john/Workspace/github/gogf/gf

我正在对goframe框架进行v3版本的开发，以下是v3版本中需要进行非兼容性修改的主要内容。你结合goframe v2版本的源码分析，评估以下修改的必要性，以及主要价值，并更新到文档中：/Users/john/Workspace/github/gqcn/johns-blog/docs/hidden/0-GoFrame/GoFramev3.md

#### 【设计】1. `ORM`操作强制增加`ctx`参数  ✅

目前`ORM`的`Model`操作并不强制需要`ctx`参数，虽然可以通过`dao`代码生成工具规范使用`Ctx(ctx)`方法创建`Model`对象，但这样不是很优雅。

同时`ORM`组件内部处理`ctx`性能不是很高效，`ctx`参数作为`DB`实现对象的属性保存了起来，如果作为方法参数传递，这样别扭的设计可以去掉，也可以简化逻辑处理。

#### 【设计】2. `http server slice`参数传递方式与标准库统一
`http server`的`slice`参数传递参考的是`PHP`的习惯，通过`k[]`的方式传递，这块需要参考`golang`标准库实现，以便于更统一的`Golang`处理逻辑。

#### 【设计】3. `gtime.Format`和标准库的`time.Format`不一致
目前`gtime.Format`参考的是PHP的时间格式化方式，但该方法与标准库的`time.Format`冲突，建议改名。

#### 【解耦】4. 完整废除`gredis`组件
目前主库虽然已经通过接口化解耦了`Redis`组件的设计，但是仍然耦合较重。需要完整删除`gredis`组件，在主库使用`Redis`的组件中（例如`gcache`, `gsession`）增加对应的接口定义，具体的实现还是通过社区组件的形式来提供，但是需要提供十分简化的接口定义。

#### 【性能】5. 去掉对GET Body的支持
GET Body通常不需要传递参数，去掉去掉对GET Body的支持以提高性能。

#### 【性能】6. 不再默认允许Request Body可重复读
保留现有的可重复读设置方法，用户若有需要可以通过中间件设置可重复读。

#### 【性能】7. `HTTP Server`仅支持`Query String`及表单类型参数自动解析
服务端需要根据客户端提交的`ContentType`来解析参数内容，客户端提交若无指定`ContentType`，那么不再自动解析提交参数。

#### 【设计、易用性】8. HTTP Client不再支持@file的特殊参数名称方式
通过提供明确的方法来管理客户端的文件上传功能，而不是通过参数前缀的方式。

#### 【设计】9. `gjson`组件需要明确职责仅作为`json`的扩展组件，不再支持`xml/yaml`等其他数据类型
- 可以考虑使用第三方的`gjson`组件，需要充分评估功能和性能对比。
- 若要支持其他数据类型，增加`gparser`组件，功能与现有`gjson`功能类似，但需要做减法，不能提供太多别名方法。

#### 【设计】10. 评估去掉`gres`组件而直接使用`embed.FS`的可能性
`embed.FS`已被广泛使用，评估是否能直接替换到`gres`，降低框架职责。

#### 【性能】11. 去掉内置的链路跟踪中间件，改为用户配置
- 由用户选择接入链路跟踪，不再内置链路跟踪判断逻辑（`http/grpc client&server`）。
- 现有的内置的`traceid`功能通过中间件方式提供，由用户自行选择配置。

#### 【设计】12. `gtype`组件改为`gatomic`以更好明确组件职责 ✅

#### 【性能】13. `orm`不再对参数中字段与表不存在字段做自动过滤功能，考虑让用户自定配置过滤策略

#### 【性能】14. 评估去掉ORM的`Safe`功能，让开发者使用`Clone`功能来实现模型复用  ✅

#### 【设计】15. 工具链所有生成的代码，默认加上`.gen.go`的文件名后缀