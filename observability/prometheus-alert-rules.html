<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/可观测性/监控技术/prometheus: 常用告警PromeQL" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>prometheus: 常用告警PromeQL | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/observability/prometheus-alert-rules><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="prometheus: 常用告警PromeQL | John's Blog"><meta data-rh=true name=description content="总结 Prometheus 常用的告警规则和 PromQL 查询语句，帮助运维人员快速配置和管理监控告警"><meta data-rh=true property=og:description content="总结 Prometheus 常用的告警规则和 PromQL 查询语句，帮助运维人员快速配置和管理监控告警"><meta data-rh=true name=keywords content=Prometheus,AlertManager,PromQL,监控告警,告警规则,监控运维><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/observability/prometheus-alert-rules><link data-rh=true rel=alternate href=https://johng.cn/observability/prometheus-alert-rules hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/observability/prometheus-alert-rules hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.a5309560.css><script src=/assets/js/runtime~main.51bb800f.js defer></script><script src=/assets/js/main.8752d2b3.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/cloud-native>云原生</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/observability>可观测性</a><button aria-label="Collapse sidebar category '可观测性'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/observability/tracing>链路跟踪</a><button aria-label="Expand sidebar category '链路跟踪'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/observability/monitoring>监控技术</a><button aria-label="Collapse sidebar category '监控技术'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/opentelemetry-metrics-introduction>OpenTelemetry Metrics介绍</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/prometheus-rate-irate>promtheus: rate与irate</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/observability/prometheus-alert-rules>prometheus: 常用告警PromeQL</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/prometheus-exporter-metrics-samples>常用exporter指标samples</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/linux-memory-cgroup-statistics>Linux中进程内存及cgroup内存统计差异</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/cadvisor-working-set-bytes-oom-killer>Cadvisor working set bytes与linux oom killer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/kubelet-cadvisor-metrics-missing>从kubelet获取cadvisor指标偶现丢失container*相关指标</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/kubelet-cadvisor-metrics-collection>如何从kubelet拉取cadvisor指标</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/ebpf-learning-guide>eBPF学习</a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/observability><span itemprop=name>可观测性</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/observability/monitoring><span itemprop=name>监控技术</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>prometheus: 常用告警PromeQL</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=告警梳理>告警梳理<a href=#告警梳理 class=hash-link aria-label="Direct link to 告警梳理" title="Direct link to 告警梳理">​</a></h2>
<p>梳理需要用于监控的指标以及规则。告警规则前置设定如下：</p>
<ul>
<li>
<p><strong>执行间隔</strong>：以 <code>1</code> 分钟作为默认的告警规则执行间隔。</p>
</li>
<li>
<p><strong>触发阈值</strong>：以连续<code>3</code>次达到触发阈值为前提才触发一次告警。<strong>阈值触发在未特殊提醒的前提下，统一使用</strong> <code>>=</code> <strong>的计算方式</strong>。</p>
</li>
<li>
<p><strong>告警分级</strong>：告警分<code>3</code>个优先级，<strong>普通</strong>告警(<code>info</code>)、<strong>严重</strong>告警(<code>warn</code>)、<strong>致命</strong>告警(<code>crit</code>)，分别对应<code>3</code>个不同的阈值。</p>
</li>
</ul>
<p>以下告警阈值初始值为经验设定，在现网配置时会需要根据实际情况进行适当调整，并不断完善该文档。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=集群��纬度>集群纬度<a href=#集群纬度 class=hash-link aria-label="Direct link to 集群纬度" title="Direct link to 集群纬度">​</a></h2>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><strong>集群CPU使用率</strong><br><br><code>alert.cluster.cpu.usage_rate</code><br><br>重要程序：一般<td>集群的<code>CPU</code>使用率过高时，意味着需要排查个别容器是否有异常，亦或需要扩展节点资源。<br><br>单位<code>%</code>。<td><code>sum(rate(container_cpu_usage_seconds_total{id="/"}[5m])) by (khaos_product,khaos_cluster) / sum (machine_cpu_cores{}) by (khaos_product,khaos_cluster) * 100</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>集群内存使用率</strong><br><br><code>alert.cluster.memory.usage_rate</code><br><br>重要程序：一般<td>集群的内存使用率过高时，意味着需要排查个别容器是否有异常，抑或需要扩展节点资源。<br><br>单位<code>%</code>。<td><code>sum (container_memory_working_set_bytes{id="/"}) by (khaos_product,khaos_cluster) / sum (machine_memory_bytes{}) by (khaos_product,khaos_cluster) * 100</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>集群Pods使用率</strong><br><br><code>alert.cluster.pods.usage_rate</code><br><br>重要程序：可有可无<td>每个<code>Node</code>节点能够维护的<code>Pods</code>数量是有限制的，当每个<code>Node</code>的<code>Pods</code>使用率过高时会引发集群的<code>Pods</code>使用率过高，会影响<code>Pod</code>的调度，甚至无法创建<code>Pod</code>。<br><br>单位<code>%</code>。<br><br>该规则默认不启用。<td><code>sum(kube_pod_status_phase{phase="Running"})) by (khaos_product,khaos_cluster) / sum(kube_node_status_allocatable{resource="pods"}) by (khaos_product,khaos_cluster) * 100</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=节点纬度>节点纬度<a href=#节点纬度 class=hash-link aria-label="Direct link to 节点纬度" title="Direct link to 节点纬度">​</a></h2>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><strong>节点CPU使用率</strong><br><br><code>alert.node.cpu.usage_rate</code><br><br>重要程序：重要<td><code>CPU</code>使用率过高会导致进程响应慢。<br><br>单位<code>%</code>。<td><code>sum by(khaos_product,khaos_cluster,instance) (irate(node_cpu_seconds_total{mode!="idle"}[5m])) / on(khaos_product,khaos_cluster,instance) group_left sum by (khaos_product,khaos_cluster,instance)((irate(node_cpu_seconds_total{}[5m]))) * 100</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>节点内存使用率</strong><br><br><code>alert.node.memory.usage_rate</code><br><br>重要程序：重要<td>主机内存利用率高会导致进程响应慢。<br><br>单位<code>%</code>。<td><code>100 - ((avg_over_time(node_memory_MemAvailable_bytes{}[5m]) * 100) / avg_over_time(node_memory_MemTotal_bytes{}[5m]))</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>节点磁盘使用率</strong><br><br><code>alert.node.storage.usage_rate</code><br><br>重要程序：可有可无<td>由于节点上挂载的磁盘比较多，我们并不需要关心所有挂载点的磁盘使用率，因此该规则默认不启用。<br><br>单位<code>%</code>。<td><code>100 - 100*(sum(node_filesystem_avail_bytes{device=~"/dev.*", mountpoint!~".*pods.*|.*pvc.*"}) by(khaos_product,khaos_cluster, instance, device) / sum(node_filesystem_size_bytes{device=~"/dev.*", mountpoint!~".*pods.*|.*pvc.*"}) by (khaos_product,khaos_cluster, instance, device))</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>节点系统磁盘使用率</strong><br><br><code>alert.node.storage.root.usage_rate</code><br><br>重要程序：重要<td><strong>系统盘</strong>使用率过高会影响系统稳定性。<br><br>单位<code>%</code>。<td><code>100 - 100*(sum(node_filesystem_avail_bytes{device=~"/dev.*", mountpoint="/"}) by(khaos_product,khaos_cluster, instance, device) / sum(node_filesystem_size_bytes{device=~"/dev.*", mountpoint="/"}) by (khaos_product,khaos_cluster, instance, device))</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>磁盘</strong> <code>inode</code> <strong>使用率</strong><br><br><code>alert.node.storage.inode.usage_rate</code><br><br>重要程序：重要<td>使用率如果达到<code>100%</code>会影响磁盘文件的创建。<br><br>单位<code>%</code>。<td><code>100 - node_filesystem_files_free{fstype=~"ext4|xfs"}/node_filesystem_files{fstype=~"ext4|xfs"} * 100</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>磁盘读延迟过高</strong><br><br><code>alert.node.storage.io_delay_ms.read</code><br><br>重要程序：重要<td>影响磁盘内容读取。<br><br>单位<code>ms</code>。<td><code>rate(node_disk_read_time_seconds_total{}[5m]) / (rate(node_disk_reads_completed_total{}[5m])>0) * 1000</code><td><code>info: 1000</code><br><br><code>warn: 3000</code><br><br><code>crit: 5000</code><tr><td><strong>磁盘写延迟过高</strong><br><br><code>alert.node.storage.io_delay_ms.write</code><br><br>重要程序：重要<td>影响磁盘内容写入。<br><br>单位<code>ms</code>。<td><code>rate(node_disk_write_time_seconds_total{}[5m]) / (rate(node_disk_writes_completed_total{}[5m])>0) * 1000</code><td><code>info: 1000</code><br><br><code>warn: 3000</code><br><br><code>crit: 5000</code><tr><td><strong>节点TCP每秒出包错误率</strong><br><br><code>alert.node.network.tcp.error_rate.out</code><br><br>重要程序：重要<td>网络出入包错误率过高会严重影响数据面及管控面网络访问。<br><br><code>5m</code>内的平均网络出包错误率。<br><br>单位<code>%</code>。<td><code>100*(sum(node_network_transmit_errs_total{device="eth0"}[5m]) by (khaos_product,khaos_cluster, device, instance)/sum(node_network_transmit_packets_total{device="eth0"}[5m]) by (khaos_product,khaos_cluster, device, instance))</code><td><code>info: 5</code><br><br><code>warn: 10</code><br><br><code>crit: 30</code><tr><td><strong>节点TCP每秒入包错误率</strong><br><br><a href=http://alert.node.network.tcp.error_rate.in target=_blank rel="noopener noreferrer">alert.node.network.tcp.error_rate.in</a><br><br>重要程序：重要<td>网络出入包错误率过高会严重影响数据面及管控面网络访问。<br><br><code>5m</code>内的平均网络入包错误率。<br><br>单位<code>%</code>。<td><code>100*(sum(node_network_receive_errs_total{device="eth0"}[5m]) by (khaos_product,khaos_cluster, device, instance)/sum(node_network_receive_packets_total{device="eth0"}[5m]) by (khaos_product,khaos_cluster, device, instance))</code><td><code>info: 5</code><br><br><code>warn: 10</code><br><br><code>crit: 30</code><tr><td><strong>节点网络流量过大</strong><br><br><code>alert.node.network.flow</code><br><br>重要程序：重要<td>流量过大可能会影响节点上所有进程的网络通信。原理是<code>1</code>分钟内<strong>对外网卡</strong>的<strong>平均流量</strong>，包含<strong>出+入</strong>的流量。流量阈值根据集群硬件条件灵活配置。<br><br>单位<code>mb/s</code>。<td><code>(rate(node_network_receive_bytes_total{device=~"eth.+"}[1m])+rate(node_network_transmit_bytes_total{device=~"eth.+"}[1m]))/1024/1024</code><td><code>info: 5000</code><br><br><code>warn: 8000</code><br><br><code>crit: 9000</code><tr><td><strong>节点网络带宽使用率</strong><br><br><code>alert.node.network.bandwidth_usage_rate</code><br><br>重要程序：重要<td>流量过大可能会影响节点上所有进程的网络通信。原理是<code>1</code>分钟内<strong>对外网卡</strong>的平均流量占用总体网卡带宽的百分比。<br><br>单位<code>%</code>。<br><br><strong>注意事项：</strong><br><br><code>node_network_speed_bytes</code> <strong>指标仅在物理机下有效，虚拟机下的该指标可能会负值或者无效。因此该告警作为流量告警的辅助告警规则。</strong><td><code>100*(rate(node_network_receive_bytes_total{device=~"eth.+"}[1m])+rate(node_network_transmit_bytes_total{device=~"eth.+"}[1m]))/(node_network_speed_bytes{device=~"eth.+"} > 0)</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>节点</strong> <code>NotReady</code> <strong>持续时间(5分钟)</strong><br><br><code>alert.node.status.not_ready5</code><br><br>重要程序：重要<td>主机上的<code>kubelet</code>无法上报主机状态，可能主机宕机或者不稳定，可能会引发后续<code>Kubernetes</code>集群内部针对该节点的调度、网络访问等问题。<br><br><strong>按照持续时间划分不同告警级别。</strong><td><code>kube_node_status_condition{condition="Ready",status="true"} == 0</code><td><code>info: 1</code><tr><td><strong>节点</strong> <code>NotReady</code> <strong>持续时间(10分钟)</strong><br><br><code>alert.node.status.not_ready10</code><br><br>重要程序：重要<td><code>warn: 1</code><td><td><tr><td><strong>节点</strong> <code>NotReady</code> <strong>持续时间(15分钟)</strong><br><br><code>alert.node.status.not_ready15</code><br><br>重要程序：重要<td><code>crit: 1</code><td><td><tr><td><strong>节点Pods使用率</strong><br><br><code>alert.node.status.pods.usage_rate</code><br><br>重要程序：可有可无<td>每个<code>Node</code>节点能够维护的<code>Pods</code>数量是有限制的，当使用率过高时，<code>Kuberntes</code>调度器将法调度新的<code>Pod</code>到该节点，从而影响节点上的<code>Pod</code>装箱。<br><br>该规则默认不启用。<br><br>单位<code>%</code>。<td><code>100*sum(kube_pod_info{}) by (khaos_product,khaos_cluster,node) / sum(kube_node_status_allocatable{resource="pods"}) by (khaos_product,khaos_cluster,node)</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>节点异常关机或重启</strong><br><br><code>alert.node.status.shut_reboot</code><br><br>重要程序：重要<td>节点<strong>5分钟内</strong>系统启动时间发生变化，可能发生异常关机或者重启，请注意查看。<td><code>abs((node_boot_time_seconds{} or 0) - node_boot_time_seconds{} offset 5m != 0)</code><td><code>crit: 1</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=容器纬度>容器纬度<a href=#容器纬度 class=hash-link aria-label="Direct link to 容器纬度" title="Direct link to 容器纬度">​</a></h2>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>处理方式</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><strong>容器CPU使用率</strong><br><br><code>alert.container.cpu.usage_rate</code><br><br>重要程序：可有可无<td>前置条件：只有在容器配置了<code>resources.limits.cpu</code>条件下才能使用。<br><br>单位<code>%</code>。<br><br>该规则默认不启用。<td><td><code>100*sum(rate(container_cpu_usage_seconds_total{namespace=~"argo|khaos|obs|kube-system"}[5m])) by (khaos_product,khaos_cluster,namespace,app_name,pod,container)/sum(container_spec_cpu_quota{namespace=~"argo|khaos|obs|kube-system"}/container_spec_cpu_period{namespace=~"argo|khaos|obs|kube-system"}) by (khaos_product,khaos_cluster,namespace,app_name,pod,container)</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>容器内存使用率</strong><br><br><code>alert.container.memory.usage_rate</code><br><br>重要程序：可有可无<td>前置条件：只有在容器配置了<code>resources.limits.memory</code>条件下才能使用。<br><br>单位<code>%</code>。<br><br>该规则默认不启用。<td><td><code>100*(sum (container_memory_working_set_bytes{namespace=~"argo|khaos|obs|kube-system"}) by (khaos_product,khaos_cluster,namespace,app_name,pod,container)/sum (container_spec_memory_limit_bytes{namespace=~"argo|khaos|obs|kube-system"}) by (khaos_product,khaos_cluster,namespace,app_name,pod,container) &lt;= 1)</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>容器磁盘使用率</strong><br><br><code>alert.container.storage.usage_rate</code><br><br>重要程序：可有可无<td>由于容器内部的挂载点可能很多，并且在<code>Kubernetes</code>下都是通过<code>pv</code>的方式申请存储，对应也有<code>pv</code>的磁盘使用率告警，因此该告警规则默认未启用。<br><br>单位<code>%</code>。<td><td><code>100*sum(container_fs_usage_bytes{namespace=~"argo|khaos|obs|kube-system"} / (container_fs_limit_bytes{namespace=~"argo|khaos|obs|kube-system"} != 0 )) by (khaos_product,khaos_cluster,namespace,app_name,pod,container,device)</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>容器持续</strong> <code>10</code> <strong>分钟</strong> <code>NotReady</code><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.container.not_ready10</code><br><br>重要程序：重要<td>通过<code>reason</code>字段告警具体原因，<code>reason</code>字段可能得取值如下：<br><br>*   <code>ContainerCreating</code><br>    <br>*   <code>CrashLoopBackOff</code><br>    <br>*   <code>CreateContainerConfigError</code><br>    <br>*   <code>ErrImagePull</code><br>    <br>*   <code>ImagePullBackOff</code><br>    <br>*   <code>PodInitializing</code><br>    <br>*   <code>OOMKilled</code><br>    <br>*   <code>StartError</code><br>    <br>*   <code>Error</code><br>    <br>*   <code>ContainerStatusUnknown</code><br>    <br>*   <code>Unknown</code><br>    <br><br><strong>需要注意：</strong><br><br><strong>数据面的告警仅针对内核容器，按照container="khaos-biz"通用配置，并不关心业务Pod中的sidecar容器。</strong><br><br><strong>按照持续时间划分不同告警级别。</strong><td>通过跳板机登录<code>kubernetes</code>集群查看<code>Pod</code>状态，异常容器日志定位准确原因。<td><strong>管控面：</strong><br><br><em>管控面容器处于异常状态，该容器提供的管控能力失效。</em><br><br>带<code>reason</code>的异常容器：<br><br><code>(</code>  <br><code>(kube_pod_container_status_terminated_reason{reason!="Completed",namespace=~"argo|khaos|obs|kube-system"} + kube_pod_container_status_terminated_reason{reason!="Completed",namespace=~"argo|khaos|obs|kube-system"} offset 10m) == 2</code>  <br><code>or</code>  <br><code>(kube_pod_container_status_waiting_reason{reason!="Completed",namespace=~"argo|khaos|obs|kube-system"} + kube_pod_container_status_waiting_reason{reason!="Completed",namespace=~"argo|khaos|obs|kube-system"} offset 10m) == 2</code>  <br><code>)</code><br><br><code>unkhown</code>的异常容器：<br><br><code>((kube_pod_container_status_ready{namespace=~"argo|khaos|obs|kube-system"} + kube_pod_container_status_ready{namespace=~"argo|khaos|obs|kube-system"} offset 10m) == 0)</code>  <br><code>unless on(uid)</code>  <br><code>(</code>  <br><code>kube_pod_container_status_terminated_reason{namespace=~"argo|khaos|obs|kube-system"}</code>  <br><code>or</code>  <br><code>kube_pod_container_status_waiting_reason{namespace=~"argo|khaos|obs|kube-system"}</code>  <br><code>)</code><br><br><strong>数据面：</strong><br><br><em>数据面容器异常，会影响用户实例，请优先查看！</em><br><br>带<code>reason</code>的异常容器：<br><br><code>(</code>  <br><code>(kube_pod_container_status_terminated_reason{reason!="Completed",container="khaos-biz"} + kube_pod_container_status_terminated_reason{reason!="Completed",container="khaos-biz"} offset 10m) == 2</code>  <br><code>or</code>  <br><code>(kube_pod_container_status_waiting_reason{reason!="Completed",container="khaos-biz"} + kube_pod_container_status_waiting_reason{reason!="Completed",container="khaos-biz"} offset 10m) == 2</code>  <br><code>)</code><br><br><code>unkhown</code>的异常容器：<br><br><code>((kube_pod_container_status_ready{container="khaos-biz"} + kube_pod_container_status_ready{container="khaos-biz"} offset 10m) == 0)</code>  <br><code>unless on(uid)</code>  <br><code>(</code>  <br><code>kube_pod_container_status_terminated_reason{container="khaos-biz"}</code>  <br><code>or</code>  <br><code>kube_pod_container_status_waiting_reason{container="khaos-biz"}</code>  <br><code>)</code><td><code>info: 1</code><tr><td><strong>容器持续</strong> <code>20</code> <strong>分钟</strong> <code>NotReady</code><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.container.not_ready20</code><br><br>重要程序：重要<td><code>warn: 1</code><td><td><td><tr><td><strong>容器持续</strong> <code>30</code> <strong>分钟</strong> <code>NotReady</code><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.container.not_ready30</code><br><br>重要程序：重要<td><code>crit: 1</code><td><td><td><tr><td><strong>容器发生持续重启</strong><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.pod.status.crash_loop</code><br><br>重要程序：重要<td>通过<code>reason</code>字段告警具体原因，<code>reason</code>字段可能得取值如下：<br><br>*   <code>CrashLoopBackOff</code><br>    <br>*   <code>CreateContainerConfigError</code><br>    <br>*   <code>ErrImagePull</code><br>    <br>*   <code>ImagePullBackOff</code><br>    <br>*   <code>OOMKilled</code><br>    <br>*   <code>StartError</code><br>    <br>*   <code>Error</code><br>    <br>*   <code>ContainerStatusUnknown</code><br>    <br>*   <code>Unknown</code><br>    <br><br><strong>需要注意：</strong><br><br>*   <strong>由于容器重启使用了时间退避，最长退避时间为5m，因此这里默认使用15m作为间隔来计算重启递增值。</strong><td>通过跳板机登录<code>kubernetes</code>集群查看<code>Pod</code>状态，异常容器日志定位准确原因。<td><strong>管控面：</strong><br><br><code>(delta(kube_pod_container_status_restarts_total{namespace=~"argo|khaos|obs|kube-system"} [15m]) > 1) + on(khaos_product,khaos_cluster, namespace, app_name, pod, container) group_right(kube_pod_container_status_last_terminated_reason) 0*(kube_pod_container_status_last_terminated_reason{reason!="Completed",namespace=~"argo|khaos|obs|kube-system"})</code><br><br><strong>数据面（非平台管控面空间）</strong>：<br><br><code>(delta(kube_pod_container_status_restarts_total{namespace!~"argo|khaos|obs|kube-system"} [15m]) > 1) + on(khaos_product,khaos_cluster, namespace, app_name, pod, container) group_right(kube_pod_container_status_last_terminated_reason) 0*(kube_pod_container_status_last_terminated_reason{reason!="Completed",namespace!~"argo|khaos|obs|kube-system"})</code><td><code>info: 15m 2</code><br><br><code>warn: 20m 4</code><br><br><code>crit: 30m 5</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=pod纬度>Pod纬度<a href=#pod纬度 class=hash-link aria-label="Direct link to Pod纬度" title="Direct link to Pod纬度">​</a></h2>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>处理方式</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><strong>Pod长期处于无法调度状态</strong><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.pod.status.unschedulable</code><br><br>重要程序：重要<td>Pod在一定时间内没有被调度成功，通常是Pod依赖没有满足要求，例如资源请求、亲和性等前置条件无法满足。<td>通过跳板机登录集群，使用<code>kubectl describe</code>命令查看具体原因。<td><code>kube_pod_status_unschedulable{}</code><td><code>info: 10分钟</code><br><br><code>warn: 20分钟</code><br><br><code>crit: 30分钟</code><tr><td><strong>Pod PVC使用率</strong><br><br>(<strong>该告警包含数据面容器</strong>)<br><br><code>alert.pod.storage.volume.usage_rate</code><br><br>重要程序：重要<td>PVC对应的PV使用率高时，会影响存储，进而影响服务功能。<br><br><strong>需要注意，数据面现网的PVC磁盘使用率都很高。</strong><br><br>单位<code>%</code>。<td>清理或扩容PV磁盘。<td><code>100*(kubelet_volume_stats_used_bytes{}/kubelet_volume_stats_capacity_bytes{})+on(khaos_product,khaos_cluster,persistentvolumeclaim,namespace) group_right(persistentvolumeclaim) 0*kube_pod_spec_volumes_persistentvolumeclaims_info{}</code><td><code>info: 80</code><br><br><code>warn: 90</code><br><br><code>crit: 95</code><tr><td><strong>Pod网络入流量过大</strong><br><br><a href=http://alert.pod.network.flow_rate.in target=_blank rel="noopener noreferrer">alert.pod.network.flow_rate.in</a><br><br>重要程序：一般<td>原理是<code>1</code>分钟内的平均流量。需要注意，<code>Pod</code>的网络流量大部分属于集群内部的内网流量。<br><br>单位<code>mb/s</code>。<td><td><code>rate(container_network_receive_bytes_total{image!="",interface=~"eth.+",namespace=~"argo|khaos|obs|kube-system"}[1m])/1024/1024</code><td><code>info: 800</code><br><br><code>warn: 900</code><br><br><code>crit: 1000</code><tr><td><strong>Pod网络出流量过大</strong><br><br><code>alert.pod.network.flow_rate.out</code><br><br>重要程序：一般<td>原理是<code>1</code>分钟内的平均流量。需要注意，<code>Pod</code>的网络流量大部分属于集群内部的内网流量。<br><br>单位<code>mb/s</code>。<td><td><code>rate(container_network_transmit_bytes_total{image!="",interface=~"eth.+",namespace=~"argo|khaos|obs|kube-system"}[1m])/1024/1024</code><td><code>info: 800</code><br><br><code>warn: 900</code><br><br><code>crit: 1000</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=服务纬度>服务纬度<a href=#服务纬度 class=hash-link aria-label="Direct link to 服务纬度" title="Direct link to 服务纬度">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=云巢组件>云巢组件<a href=#云巢组件 class=hash-link aria-label="Direct link to 云巢组件" title="Direct link to 云巢组件">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=vmagent>vmagent<a href=#vmagent class=hash-link aria-label="Direct link to vmagent" title="Direct link to vmagent">​</a></h4>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>处理方式</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><code>vmagent</code> <strong>存在错误的集群ID配置</strong><br><br><code>alert.service.khaos.vmagent.incorrect_khaos_cluster</code><br><br>重要程序：一般<td>有部分集群的<strong>集群ID</strong>没有更新到<code>vmagent</code>配置中，可能是集群的<code>cluster_values.yaml</code>配置或者<code>CI</code>脚本存在问题。<br><br>当集群ID配置错误时，可能会影响上层的告警通知、大盘展示，影响问题的准确定位。<br><br>该问题通常与集群ID配置错误一起出现。<td>首先在<code>catalog</code>仓库中的<code>tencentcloud/arcod/deploys</code>目录检索关键字<code>khaos-cluster</code>看看哪个集群的配置文件有问题。<br><br>如果无法找到，那么使用<code>count(kube_pod_info{khaos_cluster="khaos-cluster"})by(namespace)</code>看看是哪个产品的实例，随后对该产品的所有集群遍历查找<code>ns</code>定位是否该集群。<td><code>count(kube_pod_info{khaos_cluster="khaos-cluster"})</code><td><code>info: 1</code><tr><td><code>vmagent</code> <strong>存在错误的产品标识配置</strong><br><br><code>alert.service.khaos.vmagent.incorrect_khaos_product</code><br><br>重要程序：一般<td>有部分集群的<strong>产品标识</strong>没有更新到<code>vmagent</code>配置中，可能是集群的<code>cluster_values.yaml</code>配置或者<code>CI</code>脚本存在问题。<br><br>当集群ID配置错误时，可能会影响上层的告警通知、大盘展示，影响问题的准确定位。<br><br>该问题通常与集群ID配置错误一起出现。<td>同上。<td><code>count(kube_pod_info{khaos_product=""})</code><td><code>info: 1</code><tr><td><code>vmagent</code> <strong>错误日志激增</strong><br><br><code>alert.service.khaos.vmagent.log_errors</code><br><br>重要程序：重要<td>错误日志一段时间内增加过多，可能会影响监控采集能力。<br><br>单位<code>条</code>。<td>需要去控制台查看<code>vmagent pod</code>的日志确定原因。<td><code>sum(increase(vm_log_messages_total{level!="info"}[10m])) by (khaos_product, khaos_cluster, app_name, namespace, pod)</code><td><code>info: 1000</code><br><br><code>warn: 3000</code><br><br><code>crit: 5000</code><tr><td><code>vmagent</code> <strong>本地缓存激增</strong><br><br><code>alert.service.khaos.vmagent.local_cache</code><br><br>重要程序：重要<td>当<code>vmagent</code>上报失败时，会按照远端地址缓存本地数据，如果本地缓存数据激增，表示远端写入失败过多。<br><br>单位<code>mb</code>。<td>需要去控制台查看<code>vmagent pod</code>的日志确定原因。判断是否地址配置错误，或者远端写入地址对应的服务异常。<td><code>sum(vmagent_remotewrite_pending_data_bytes{}) by (job, url)/1024/1024</code><td><code>info: 100</code><br><br><code>warn: 500</code><br><br><code>crit: 1000</code></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=kubernetes组件>Kubernetes组件<a href=#kubernetes组件 class=hash-link aria-label="Direct link to Kubernetes组件" title="Direct link to Kubernetes组件">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=etcd>etcd<a href=#etcd class=hash-link aria-label="Direct link to etcd" title="Direct link to etcd">​</a></h4>
<table><thead><tr><th><strong>告警名称</strong><th><strong>告警描述</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><code>etcd</code> <strong>是否存在主节点</strong><br><br><code>alert.service.kube.etcd.has_leader</code><br><br>重要程序：重要<td>表示<code>etcd</code>是否可用。<br><br><strong>需要注意：TKE托管类型集群的</strong> <code>etcd</code> <strong>服务由于部署在其他独立的集群中，当前集群内的监控组件没有权限访问因此无法采集其指标。</strong><td><code>etcd_server_has_leader{}</code><td><code>crit: ==0</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=apiserver>apiserver<a href=#apiserver class=hash-link aria-label="Direct link to apiserver" title="Direct link to apiserver">​</a></h4>
<table><thead><tr><th><strong>告警英文名</strong><th><strong>告警描述</strong><th><strong>表达式</strong><th><strong>阈值设置</strong><tbody><tr><td><code>apiserver</code> <strong>服务端请求错误率</strong><br><br><code>alert.service.kube.apiserver.server.error_rate</code><br><br>重要程序：重要<td><code>5</code>分钟内<code>apiserver</code>处理的请求错误率较高。<br><br>单位<code>%</code>。<td><code>100*sum(rate(apiserver_request_total{code=~"(?:5..)"}[5m])) by (khaos_product,khaos_cluster,app_name,instance,group,version,resource) / sum(rate(apiserver_request_total{}[5m])) by (khaos_product,khaos_cluster,app_name,instance,group,version,resource)</code><td><code>info: 50</code><br><br><code>warn: 80</code><br><br><code>crit: 90</code><tr><td><strong>客户端向</strong> <code>apiserver</code> <strong>请求错误率</strong><br><br><code>alert.service.kube.apiserver.client.error_rate</code><br><br>重要程序：重要<td><code>5</code>分钟内客户端请求<code>apiserver</code>的错误率较高。<code>instance</code>为客户端，<code>host</code>为目标端，<code>job</code>用于识别是否<code>kubelet</code>访问。<br><br>  <br><br>单位<code>%</code>。<td><code>100*(sum(rate(rest_client_requests_total{code=~"(4|5).."}[5m])) by (khaos_product,khaos_cluster,app_name,instance,host) / sum(rate(rest_client_requests_total[5m])) by (khaos_product,khaos_cluster,app_name,instance,host))</code><td><code>info: 50</code><br><br><code>warn: 80</code><br><br><code>crit: 90</code><tr><td><code>apiserver</code> <strong>服务端请求处理延迟</strong><br><br><code>alert.service.kube.apiserver.latency</code><br><br>重要程序：重要<td><code>5</code>分钟内<code>p99</code>的请求处理延迟较高。<br><br>单位<code>ms</code>。<td><code>1000*histogram_quantile(0.99, sum(rate(apiserver_request_duration_seconds_bucket{verb!~"(?:CONNECT|WATCHLIST|WATCH|PROXY)"} [5m])) without (subresource))</code><td><code>info: 3000</code><br><br><code>warn: 5000</code><br><br><code>crit: 10000</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=参考资料>参考资料<a href=#参考资料 class=hash-link aria-label="Direct link to 参考资料" title="Direct link to 参考资料">​</a></h2>
<ul>
<li>
<p><a href=https://github.com/samber/awesome-prometheus-alerts target=_blank rel="noopener noreferrer">https://github.com/samber/awesome-prometheus-alerts</a></p>
</li>
<li>
<p><a href=https://sysdig.com/blog/monitor-kubernetes-api-server/ target=_blank rel="noopener noreferrer">https://sysdig.com/blog/monitor-kubernetes-api-server</a></p>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/observability/prometheus-rate-irate><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>promtheus: rate与irate</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/observability/prometheus-exporter-metrics-samples><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>常用exporter指标samples</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#告警梳理 class="table-of-contents__link toc-highlight">告警梳理</a><li><a href=#集群纬度 class="table-of-contents__link toc-highlight">集群纬度</a><li><a href=#节点纬度 class="table-of-contents__link toc-highlight">节点纬度</a><li><a href=#容器纬度 class="table-of-contents__link toc-highlight">容器纬度</a><li><a href=#pod纬度 class="table-of-contents__link toc-highlight">Pod纬度</a><li><a href=#服务纬度 class="table-of-contents__link toc-highlight">服务纬度</a><ul><li><a href=#云巢组件 class="table-of-contents__link toc-highlight">云巢组件</a><li><a href=#kubernetes组件 class="table-of-contents__link toc-highlight">Kubernetes组件</a></ul><li><a href=#参考资料 class="table-of-contents__link toc-highlight">参考资料</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>