<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/可观测性/链路跟踪/OpenTelemetry介绍" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>OpenTelemetry介绍 | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/observability/opentelemetry-introduction><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="OpenTelemetry介绍 | John's Blog"><meta data-rh=true name=description content="介绍 OpenTelemetry 项目的背景、发展历程和核心特性，探讨其如何统一链路追踪和指标收集的标准"><meta data-rh=true property=og:description content="介绍 OpenTelemetry 项目的背景、发展历程和核心特性，探讨其如何统一链路追踪和指标收集的标准"><meta data-rh=true name=keywords content=OpenTelemetry,OpenTracing,Metrics,可观察性,链路追踪,指标收集><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/observability/opentelemetry-introduction><link data-rh=true rel=alternate href=https://johng.cn/observability/opentelemetry-introduction hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/observability/opentelemetry-introduction hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.a5309560.css><script src=/assets/js/runtime~main.fd65ef1f.js defer></script><script src=/assets/js/main.b06dbc64.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/management>技术管理</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/cloud-native>云原生</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/observability>可观测性</a><button aria-label="Collapse sidebar category '可观测性'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/observability/tracing>链路跟踪</a><button aria-label="Collapse sidebar category '链路跟踪'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/opentracing-introduction>OpenTracing介绍</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/observability/opentelemetry-introduction>OpenTelemetry介绍</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/observability/opentelemetry-architecture>OpenTelemetry架构</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/observability/monitoring>监控技术</a><button aria-label="Expand sidebar category '监控技术'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/data-structures-and-algorithms>数据结构和算法</a><button aria-label="Expand sidebar category '数据结构和算法'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/observability><span itemprop=name>可观测性</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/observability/tracing><span itemprop=name>链路跟踪</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>OpenTelemetry介绍</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>在分布式的系统架构中，Tracing链路跟踪和Metrcis指标搜集是不可或缺的两大技术，而这一次，两大技术终于迎来了大统一的行业标准。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=项目背景>项目背景<a href=#项目背景 class=hash-link aria-label="Direct link to 项目背景" title="Direct link to 项目背景">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=opentracing>OpenTracing<a href=#opentracing class=hash-link aria-label="Direct link to OpenTracing" title="Direct link to OpenTracing">​</a></h4>
<p>OpenTracing制定了一套平台无关、厂商无关的Trace协议，使得开发人员能够方便的添加或更换分布式追踪系统的实现。在2016年11月的时候CNCF技术委员会投票接受OpenTracing作为Hosted项目，这是CNCF的第三个项目，第一个是Kubernetes，第二个是Prometheus，可见CNCF对OpenTracing背后可观察性的重视。比如大名鼎鼎的Zipkin、Jaeger都遵循OpenTracing协议。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=opencensus>OpenCensus<a href=#opencensus class=hash-link aria-label="Direct link to OpenCensus" title="Direct link to OpenCensus">​</a></h4>
<p>大家可能会想，既然有了OpenTracing，OpenCensus又来凑什么热闹？对不起，你要知道OpenCensus的发起者可是谷歌，也就是最早提出Tracing概念的公司，而OpenCensus也就是Google Dapper的社区版。OpenCensus和OpenTracing最大的不同在于除了Tracing外，它还把Metrics也包括进来，这样也可以在OpenCensus上做基础的指标监控；还一点不同是OpenCensus并不是单纯的规范制定，他还把包括数据采集的Agent、Collector一股脑都搞了。OpenCensus也有众多的追随者，最近最大的新闻就是微软也宣布加入，OpenCensus可谓是如虎添翼。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=opentracing-vs-opencensus>OpenTracing vs OpenCensus<a href=#opentracing-vs-opencensus class=hash-link aria-label="Direct link to OpenTracing vs OpenCensus" title="Direct link to OpenTracing vs OpenCensus">​</a></h4>
<p>两套Tracing框架，都有很多追随者，都想统一对方，咋办？首先来PK啊，这里偷个懒，直接上Steve的图：<br>
<img decoding=async loading=lazy src=/assets/images/1563762974088-2291ef83-8fa4-4ac8-9666-6e2bdc67c5aa-996b1931d45697ef8a656a2ceb43ccd1.png width=2608 height=1074 class=img_ev3q></p>
<p>可以看到，OpenTracing和OpenCensus从功能和特性上来看，各有优缺点，半斤八两。OpenTracing支持的语言更多、相对对其他系统的耦合性要更低；OpenCensus支持Metrics、从API到基础框架都实现了个便。既然从功能和特性上分不出高下，那就从知名度和用户数上来PK吧：<br>
<img decoding=async loading=lazy src=/assets/images/1563762974088-2291ef83-8fa4-4ac8-9666-6e2bdc67c5aa-996b1931d45697ef8a656a2ceb43ccd1.png width=2608 height=1074 class=img_ev3q></p>
<p>好吧，又是半斤八两，OpenTracing有很多厂商追随（比如ElasticSearch、Uber、DataDog、还有国产的SkyWalking），OpenCensus背后Google和微软两个大佬就够撑起半边天了。<br>
<!-- -->最终一场PK下来，没有胜负，怎么办？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=opentelemetry>OpenTelemetry<a href=#opentelemetry class=hash-link aria-label="Direct link to OpenTelemetry" title="Direct link to OpenTelemetry">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=横空出世>横空出世<a href=#横空出世 class=hash-link aria-label="Direct link to 横空出世" title="Direct link to 横空出世">​</a></h4>
<p>所谓天下合久必分、分久必合，既然没办法分个高低，谁都有优劣势，咱们就别干了，统一吧。于是OpenTelemetry横空出世。那么问题来了：统一可以，起一个新的项目从头搞吗？那之前追随我的弟兄们怎么办？不能丢了我的兄弟们啊。放心，这种事情肯定不会发生的。要知道OpenTelemetry的发起者都是OpenTracing和OpenCensus的人，所以项目的第一宗旨就是：兼容OpenTracing和OpenCensus。对于使用OpenTracing或OpenCensus的应用不需要重新改动就可以接入OpenTelemetry。</p>
<p>通过将OpenTracing 和OpenCensus 合并为一个开放的标准，OpenTelemetry提供了如下便利：</p>
<ul>
<li><strong>选择简单</strong>：不必在两个标准之间进行选择，OpenTelemetry可以同时兼容 OpenTracing和OpenCensus。</li>
<li><strong>跨平台性</strong>：OpenTelemetry 支持各种语言和后端。它代表了一种厂商中立的方式，可以在不改变现有工具的情况下捕获并将遥测数据传输到后端。</li>
<li><strong>简化可观测性</strong>：正如OpenTelemetry所说的"高质量的观测下要求高质量的遥测"。希望看到更多的厂商转向OpenTelemetry，因为它更方便，且仅需测试单一标准。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=核心工作>核心工作<a href=#核心工作 class=hash-link aria-label="Direct link to 核心工作" title="Direct link to 核心工作">​</a></h4>
<p>OpenTelemetry可谓是一出生就带着无比炫目的光环：OpenTracing支持、OpenCensus支持、直接进入CNCF sanbox项目。但OpenTelemetry也不是为了解决可观察性上的所有问题，他的核心工作主要集中在3个部分：</p>
<ol>
<li>规范的制定，包括概念、协议、API，除了自身的协议外，还需要把这些规范和W3C、GRPC这些协议达成一致；</li>
<li>相关SDK、Tool的实现和集成，包括各类语言的SDK、代码自动注入、其他三方库（Log4j、LogBack等）的集成；</li>
<li>采集系统的实现，目前还是采用OpenCensus的采集架构，包括Agent和Collector。</li>
</ol>
<p>可以看到OpenTelemetry只是做了数据规范、SDK、采集的事情，对于Backend、Visual、Alert等并不涉及，官方目前推荐的是用Prometheus去做Metrics的Backend、用Jaeger去做Tracing的Backend。<br>
<img decoding=async loading=lazy src=/assets/images/1563762974104-af119ce7-d6d1-4135-8dc2-07c8cb199ba8-c443ce726c7390d9e187e06374f0dc62.png width=1210 height=908 class=img_ev3q></p>
<p>看了上面的图大家可能会有疑问：Metrics、Tracing都有了，那Logging为什么也不加到里面呢？<br>
<!-- -->其实Logging之所以没有进去，主要有两个原因：</p>
<ol>
<li>工作组目前主要的工作是在把OpenTracing和OpenCensus的概念尽早统一并开发相应的SDK，Logging是P2的优先级。</li>
<li>他们还没有想好Logging该怎么集成到规范中，因为这里还需要和CNCF里面的Fluentd一起去做，大家都还没有想好。</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=终极目标>终极目标<a href=#终极目标 class=hash-link aria-label="Direct link to 终极目标" title="Direct link to 终极目标">​</a></h4>
<p>OpenTelemetry的终态就是实现Metrics、Tracing、Logging的融合，作为CNCF可观察性的终极解决方案。</p>
<p>Tracing：提供了一个请求从接收到处理完毕整个生命周期的跟踪路径，通常请求都是在分布式的系统中处理，所以也叫做分布式链路追踪。<br>
<!-- -->Metrics：提供量化的系统内/外部各个维度的指标，一般包括Counter、Gauge、Histogram等。<br>
<!-- -->Logging：提供系统/进程最精细化的信息，例如某个关键变量、事件、访问记录等。</p>
<p>这三者在可观察性上缺一不可：基于Metrics的告警发现异常，通过Tracing定位问题（可疑）模块，根据模块具体的日志详情定位到错误根源，最后再基于这次问题调查经验调整Metrics（增加或者调整报警阈值等）以便下次可以更早发现/预防此类问题。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=如何使用>如何使用<a href=#如何使用 class=hash-link aria-label="Direct link to 如何使用" title="Direct link to 如何使用">​</a></h4>
<p>OpenTelemetry APIs 和SDKs有很多快速使用指南和<a href=https://opentelemetry.io/docs/ target=_blank rel="noopener noreferrer">文档</a>帮助快速入门。</p>
<p>将OpenTelemetry trace APIs插装到应用程序后，就可以使用预先编译好的<a href=https://opentelemetry.io/registry/ target=_blank rel="noopener noreferrer">OpenTelemetry库中的exporters </a> 将trace数据发送到观测平台，如New Relic或其他后端。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=参考资料>参考资料<a href=#参考资料 class=hash-link aria-label="Direct link to 参考资料" title="Direct link to 参考资料">​</a></h2>
<ul>
<li>
<p><a href=https://opentracing.io target=_blank rel="noopener noreferrer">https://opentracing.io</a></p>
</li>
<li>
<p><a href=https://opencensus.io/ target=_blank rel="noopener noreferrer">https://opencensus.io</a></p>
</li>
<li>
<p><a href=https://opentelemetry.io/ target=_blank rel="noopener noreferrer">https://opentelemetry.io</a></p>
</li>
<li>
<p><a href=https://developer.aliyun.com/article/710154 target=_blank rel="noopener noreferrer">https://developer.aliyun.com/article/710154</a></p>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/observability/opentracing-introduction><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>OpenTracing介绍</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/observability/opentelemetry-architecture><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>OpenTelemetry架构</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#项目背景 class="table-of-contents__link toc-highlight">项目背景</a><li><a href=#opentelemetry class="table-of-contents__link toc-highlight">OpenTelemetry</a><li><a href=#参考资料 class="table-of-contents__link toc-highlight">参考资料</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>