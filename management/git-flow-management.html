<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/技术管理/Git Flow管理" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Git Flow管理 | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/management/git-flow-management><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Git Flow管理 | John's Blog"><meta data-rh=true name=description content="详细介绍 Git Flow 的分支管理策略、测试流程和自动化工具建设，帮助团队建立规范的代码版本管理体系"><meta data-rh=true property=og:description content="详细介绍 Git Flow 的分支管理策略、测试流程和自动化工具建设，帮助团队建立规范的代码版本管理体系"><meta data-rh=true name=keywords content="Git Flow,版本管理,分支管理,代码协作,持续集成,持续部署,团队协作,开发流程"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/management/git-flow-management><link data-rh=true rel=alternate href=https://johng.cn/management/git-flow-management hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/management/git-flow-management hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="John's Blog RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="John's Blog Atom Feed"><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.667035e4.css><script src=/assets/js/runtime~main.71a5863d.js defer></script><script src=/assets/js/main.1cfa2a3e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/ai>AI技术</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/cloud-native>云原生</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a><a class="navbar__item navbar__link" href=/blog>博客</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/ai>AI技术</a><button aria-label="Expand sidebar category 'AI技术'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/management>技术管理</a><button aria-label="Collapse sidebar category '技术管理'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/management/upward-management>向上管理</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/management/git-flow-management>Git Flow管理</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/management/monorepo-vs-multirepo>单体仓库与多仓库都有哪些优势劣势，微服务选择哪种方案比较好？</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/management/architect-career-pitfalls>架构师职业踩坑经验总结</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/management/qbq-thinking>QBQ 问题背后的问题：改变思维模式，提升个人责任感</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/observability>可观测性</a><button aria-label="Expand sidebar category '可观测性'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/management><span itemprop=name>技术管理</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Git Flow管理</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>代码版本管理作为项目管理的一部分，应当有一定的规范约束，目的是避免混乱、提高协作效率。由于<code>Git</code>已经成为主流的代码版本管理工具，虽然使用简单，但在团队使用中也应该对齐使用规范，否则在代码版本管理中反而会浪费一些毫无意义的成本开销。如果团队的版本管理中出现以下常见问题时，团队管理者应当要深思了：</p>
<ul>
<li>分支管理中反复解决重复的代码冲突</li>
<li><code>CodeReview</code>环节繁琐，或者流于形式</li>
<li>测试团队在版本流程中介入困难，难以保障质量</li>
<li>版本"超车"发布或者版本回滚困难</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=一git-flow概览>一、Git Flow概览<a href=#一git-flow概览 class=hash-link aria-label="Direct link to 一、Git Flow概览" title="Direct link to 一、Git Flow概览">​</a></h2>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-1-3_17-46-41-4d2658118021cb126a3b90890e624f09.png width=2592 height=1326 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=稳定分支>稳定分支<a href=#稳定分支 class=hash-link aria-label="Direct link to 稳定分支" title="Direct link to 稳定分支">​</a></h3>
<p><strong>稳定分支</strong>通常使用主分支<code>main</code>，表示当前生产正在稳定运行的代码版本。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=预发分支>预发分支<a href=#预发分支 class=hash-link aria-label="Direct link to 预发分支" title="Direct link to 预发分支">​</a></h3>
<p><strong>预发分支</strong>通常使用<code>staging</code>，表示正在处于最后功能特性验证阶段的代码，验证完成后即上生产。由于<strong>修复分支</strong>的存在，因此预发分支在每一个迭代版本合并之前应当与主分支<code>main</code>完成一次<code>merge</code>，保证代码的同步。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=迭代分支>迭代分支<a href=#迭代分支 class=hash-link aria-label="Direct link to 迭代分支" title="Direct link to 迭代分支">​</a></h3>
<p>使用敏捷开发的团队管理，<strong>迭代分支</strong>通常是一次<code>sprint</code>特性功能集合，用于管理该<code>sprint</code>的功能特性代码集合。每一次迭代开始时，迭代分支从<strong>稳定的主分支</strong>分流出来，通常以<code>sprint-vx.y.z</code>的形式来命名。每当开发分支开发以及自测后会通过<code>MR/PR</code>的形式合并到<code>spint</code>迭代分支中，并通过自动化机制发布到固定的验证环境，便于测试团队进行统一的功能验证。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=开发分支>开发分支<a href=#开发分支 class=hash-link aria-label="Direct link to 开发分支" title="Direct link to 开发分支">​</a></h3>
<p><strong>开发分支</strong>是从特定的<strong>迭代分支</strong>分流的代码分支，<strong>用于完成特定迭代分支中特定功能特性的分支</strong>。开发分支通常是以<code>迭代分支-特性名称</code>命名，但有的时候，开发分支会以开发者个人名义从迭代分支分流出来，以<code>迭代分支-开发者姓名</code>来命名，用于管理开发者在这次迭代的多个功能特性集合。一个开发分支管理多个特性的优点是在一个人负责当前迭代的多个功能时比较方便，但缺点是如果想要将开发分支中的多个功能特性拆分上线，可能较为困难。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=修复分支>修复分支<a href=#修复分支 class=hash-link aria-label="Direct link to 修复分支" title="Direct link to 修复分支">​</a></h3>
<p>修复分支为了快速修复生产环境存在的<strong>紧急问题</strong>，通常会<strong>绕开预发分支</strong>而直接合并入主分支。由于修复分支可能会绕开测试团队，难以保障质量，所以我们应当尽可能减少这样的情况。<strong>一般的问题修复建议使用迭代分支来实现</strong>，例如，<code>sprint-v1.1.1</code>是对<code>sprint-v1.1.0</code>版本的一次修复，修复完成后合并入预发分支，在预发分支完成验证后再合并入主分支完成上线。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=标签与里程碑>标签与里程碑<a href=#标签与里程碑 class=hash-link aria-label="Direct link to 标签与里程碑" title="Direct link to 标签与里程碑">​</a></h3>
<p>稳定分支在发布生产之前需要打上标签，如<code>v1.1.0</code>、<code>v1.2.1</code>。标签用于标识在稳定分支的某一个<code>Commit</code>是一个<strong>里程碑</strong>，用于更易人工理解的备注以及版本维护。这样在后续<code>CICD</code>流程中，对版本进行升级/回滚将会更友好。标签对于使用该服务的使用方来讲，也会更易于理解和响应。</p>
<p>标签的命名采用国际通用的<code>GNU</code>命名规则：</p>
<p><code>MajorVersion.MinorVersion.Revision</code>即：<code>主版本号.子版本号.修正版本号</code>如：<code>v0.0.1</code>, <code>v1.1.0</code>, <code>1.7.1</code></p>
<ul>
<li><code>MajorVersion</code> 主版本号：版本号通常是从<code>0</code>开始的，主版本号的变更表示一个全新的版本，例如：重大的架构调整、重大的不兼容性变化。</li>
<li><code>MinorVersion</code> 子版本号：发布较大的新<code>feature</code>功能，或者一次完成一次迭代计划，会增加子版本号。</li>
<li><code>Revision</code> 修正版本号：往往是<code>bug fix</code>，或者增加较小的<code>feature</code>，较小的功能改进或者模块变化。</li>
<li>当主版本号增加时，子版本号及修正版本号置<code>0</code>。</li>
<li>当子版本号增加时，修正版本号置<code>0</code>。</li>
<li>每一次版本修复时，修正版本号加<code>1</code>。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=二git-flow中的测试环节>二、Git flow中的测试环节<a href=#二git-flow中的测试环节 class=hash-link aria-label="Direct link to 二、Git flow中的测试环节" title="Direct link to 二、Git flow中的测试环节">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=研发自测>研发自测<a href=#研发自测 class=hash-link aria-label="Direct link to 研发自测" title="Direct link to 研发自测">​</a></h3>
<p>这个阶段测试团队资源<strong>不会介入</strong>。</p>
<p>每个研发同学需要优先对自己的开发内容负责，因此在每一个功能特性的<strong>开发分支</strong>合并入<strong>迭代分支</strong>之前应当完成自测。自测方式通常以本地调试、单元测试为主，如果有一些外部依赖可以在这个环节通过<code>mock</code>方式来测试，保证一定程度的代码质量。</p>
<p><strong>如果是复杂的功能特性，在外部资源条件允许的前提下，可以构建研发自己使用或者公共协商使用的测试环境，加上外部依赖同时部署在环境中，以完成功能特性的自测。</strong></p>
<p>研发同学保证自测完成后，再提交<code>MR/PR</code>将自己的开发分支合并入迭代分支。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=迭代测试>迭代测试<a href=#迭代测试 class=hash-link aria-label="Direct link to 迭代测试" title="Direct link to 迭代测试">​</a></h3>
<p>这个阶段测试团队资源<strong>可以介入</strong>。</p>
<p>每一个功能特性通过开发分支的形式合并入迭代分支中，并通过自动化<code>CICD</code>或者测试同学手动部署的方式，会将迭代分支自动部署到一个统一的测试环境中。为尽可能保证环境的稳定性，这个阶段研发同学不能随便操作更新环境中部署的服务版本。测试资源将在这个环境中对每一个功能特性进行<code>case by case</code>验证。</p>
<p>当然，功能特性与功能特性之间可能会存在相互影响，通常有多种方式可以避免，但都有优缺点，可以选择团队可以接受的方式：</p>
<ul>
<li><strong>快速合并部署</strong>：每一项功能特性合并入迭代分支后则部署服务版本，测试同学快速进行验证。<!-- -->
<ul>
<li>优点：针对迭代速度较快的团队较友好。</li>
<li>缺点：难以避免后续功能特性之间的相互影响，有的<code>case</code>已经验证完，后续可能再出问题。</li>
</ul>
</li>
<li><strong>稳定合并部署</strong>：迭代的所有功能特性完成后再部署迭代分支，测试同学再介入验证。<!-- -->
<ul>
<li>优点：尽可能保证功能的稳定、对测试同学友好。</li>
<li>缺点：这种方式所依赖的迭代管理周期会相对较长。</li>
</ul>
</li>
<li><strong>自动化测试机制</strong>：测试同学使用自动化测试（例如自动化的接口测试）来完成大部分的功能验证，小部分的场景手工验证。<!-- -->
<ul>
<li>优点：不依赖迭代分支的部署频率、自动化测试<code>case</code>库可以在各阶段测试环节中循环使用。</li>
<li>缺点：对测试同学要求较高，需要测试同学提前构建良好的自动化测试机制。</li>
</ul>
</li>
</ul>
<p><code>Team Leader</code>对成员的<code>Code Review</code>可以在这一阶段进行，通常<code>TL</code>时间都比较紧张，因此研发同学或者<code>TL</code>可以指派其他一个或多个对该功能特性相对熟悉的团队成员进行交叉<code>Code Review</code>以提高分支合并效率。<code>Code Review</code>也是团队内部协作中<strong>相互学习</strong>和**加深"感情"**的重要环节。</p>
<p>值得注意的是，如果一个功能特性的<code>MR/PR</code>时间周期较长，可能会造成该功能特性延期，造成项目管理风险和跨团队间协作的信誉成本，因此研发同学应当在<code>MR/PR</code>提交后，持续推进开发分支尽快合并入迭代分支中。</p>
<p>当迭代分支验证没有问题后，则可将迭代分支请求合并入预发分支。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=预发回归>预发回归<a href=#预发回归 class=hash-link aria-label="Direct link to 预发回归" title="Direct link to 预发回归">​</a></h3>
<p>这个阶段测试团队资源<strong>可以介入</strong>。但有的团队通常会忽略这个阶段的建设，而是直接采用生产验证。</p>
<p>当迭代分支验证完毕后，即可由<code>TL</code>或者迭代的<code>Owner</code>合并入预发分支，预发分支可由测试同学部署到预发环境中，用于最后部署生产环境前的最后回归验证。如果团队规模较大，可能存在多个迭代并存的情况，可以根据迭代的时间安排、测试情况，让特定的某一迭代分支合并进入预发分支并进行最后的预发回归验证。</p>
<p>预发环境也可以看做是生产环境，但部署的是一个待发布的分支版本。预发回归的验证时间通常会很短，并且同时有且仅有一个迭代在预发分支回归测试中。</p>
<p>如果测试同学之前有自动测试<code>case</code>库，那么可以在这里跑一遍自动化测试即可，可以极大提高验证效率。</p>
<p>当预发分支验证没有问题后，则可将预发分支合请求并入稳定分支。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=生产验证>生产验证<a href=#生产验证 class=hash-link aria-label="Direct link to 生产验证" title="Direct link to 生产验证">​</a></h3>
<p>这个阶段测试团队资源<strong>需要介入</strong>。</p>
<p>稳定分支打好标签后，则将该标签对应的代码内容部署到生产环境，并由测试同学在生产环境进行验证。</p>
<p>由于我们本章节主要讨论代码版本管理，因此不延伸讨论灰度、蓝绿等发布和验证策略。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=三自动化工具建设>三、自动化工具建设<a href=#三自动化工具建设 class=hash-link aria-label="Direct link to 三、自动化工具建设" title="Direct link to 三、自动化工具建设">​</a></h2>
<p>从上面的分支管理和测试环节介绍我们可以看到，整体的版本管理其实还是较繁琐的，繁琐的事情如果是依赖人工维护可能会引起不规范的操作，也可能降低维护效率。在部分环节我们可以建设对应的工具来规范化、简化版本管理，提高团队协作的幸福指数。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=持续集成ci>持续集成(<code>CI</code>)<a href=#持续集成ci class=hash-link aria-label="Direct link to 持续集成ci" title="Direct link to 持续集成ci">​</a></h3>
<p>持续集成工具通常采用<strong>触发机制</strong>，例如，通过<code>Git</code>版本管理服务端的<code>WebHook</code>机制。</p>
<p>持续集成的常用能力：</p>
<ul>
<li>对提交代码的静态检测、安全检测、单元测试。</li>
<li>迭代分支内容的代码自动编译。例如，二进制、镜像的编译。</li>
<li>与第三方构建、发布系统的对接。例如，推送镜像到外部镜像仓库，对接<code>Jenkins</code>、<code>ArgoCD</code>等发布系统。</li>
</ul>
<p>在以下环节，持续集成工具能够发挥重要作用：</p>
<ul>
<li>开发分支→迭代分支</li>
<li>迭代分支→预发分支</li>
<li>稳定分支中标签的创建</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=持续部署cd>持续部署(<code>CD</code>)<a href=#持续部署cd class=hash-link aria-label="Direct link to 持续部署cd" title="Direct link to 持续部署cd">​</a></h3>
<p>持续部署通常使用持续集成来自动构建发布资源，实现自动对接，并使用第三方发布系统来实现自动发布，或者手动发布。</p>
<p>持续部署通常需要使用到<strong>模板和变量</strong>来维护发布资源，例如，各个服务器的账号密钥、服务组件的业务配置项等。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=自动化测试>自动化测试<a href=#自动化测试 class=hash-link aria-label="Direct link to 自动化测试" title="Direct link to 自动化测试">​</a></h3>
<p>自动化测试是为了提高测试的效率，提高测试<code>case</code>库的可复用性。通常随着迭代的启动，测试同学会根据自身对业务场景的理解，结合研发同学<strong>预先定义</strong>好的<code>api</code>接口数据结构（<code>UI</code>界面或后端接口），构造输入输出的<code>case</code>库，将服务接口当做黑盒，对接口输入输出进行断言判断接口实现是否符合预期。</p>
<p>自动化测试在前期是一项很枯燥的工作，但随着<code>case</code>库的沉淀积累，到中后期能极大保障项目质量。长期发展的大型项目，自动化测试应当尽早建立。例如<code>oracle</code>数据库的自动化测试，跑一次需要耗费数天的时间，期间研发同学可以喝喝咖啡写写开源项目。但是一旦跑通过，基本可以断定产品功能不会有问题。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=四一些常见问题>四、一些常见问题<a href=#四一些常见问题 class=hash-link aria-label="Direct link to 四、一些常见问题" title="Direct link to 四、一些常见问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=rebasesquash-merge><code>rebase/squash merge</code><a href=#rebasesquash-merge class=hash-link aria-label="Direct link to rebasesquash-merge" title="Direct link to rebasesquash-merge">​</a></h3>
<p>有的研发同学喜欢使用<code>git rebase</code>将本地的分支代码整理整洁（保留为一个<code>commit</code>）后再提交合并请求。有的研发同学不习惯使用<code>git rebase</code>，而是在服务端合并时使用<code>squash merge</code>。两者的效果都是一样的：在合并到目标分支后仅有一个<code>commit</code>存在，方便后续追溯查看和<code>cherry pick</code>。<strong>两者的区分只是使用习惯罢了。</strong></p>
<p>根据笔者在部分团队踩过坑的经验来看，使用<code>git rebase</code>整理本地分支可能会遇到一些困难、需要一定技巧，对于使用者来说有一定要求，有时会降低分支管理的效率。<strong>因此，如果没有特殊的<code>rebase</code>习惯，或者用不好，那么个人建议直接使用服务端的<code>squash merge</code>即可。</strong></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/management/upward-management><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>向上管理</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/management/monorepo-vs-multirepo><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>单体仓库与多仓库都有哪些优势劣势，微服务选择哪种方案比较好？</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class=tocContainer_PXzm><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#一git-flow概览 class="table-of-contents__link toc-highlight">一、Git Flow概览</a><ul><li><a href=#稳定分支 class="table-of-contents__link toc-highlight">稳定分支</a><li><a href=#预发分支 class="table-of-contents__link toc-highlight">预发分支</a><li><a href=#迭代分支 class="table-of-contents__link toc-highlight">迭代分支</a><li><a href=#开发分支 class="table-of-contents__link toc-highlight">开发分支</a><li><a href=#修复分支 class="table-of-contents__link toc-highlight">修复分支</a><li><a href=#标签与里程碑 class="table-of-contents__link toc-highlight">标签与里程碑</a></ul><li><a href=#二git-flow中的测试环节 class="table-of-contents__link toc-highlight">二、Git flow中的测试环节</a><ul><li><a href=#研发自测 class="table-of-contents__link toc-highlight">研发自测</a><li><a href=#迭代测试 class="table-of-contents__link toc-highlight">迭代测试</a><li><a href=#预发回归 class="table-of-contents__link toc-highlight">预发回归</a><li><a href=#生产验证 class="table-of-contents__link toc-highlight">生产验证</a></ul><li><a href=#三自动化工具建设 class="table-of-contents__link toc-highlight">三、自动化工具建设</a><ul><li><a href=#持续集成ci class="table-of-contents__link toc-highlight">持续集成(<code>CI</code>)</a><li><a href=#持续部署cd class="table-of-contents__link toc-highlight">持续部署(<code>CD</code>)</a><li><a href=#自动化测试 class="table-of-contents__link toc-highlight">自动化测试</a></ul><li><a href=#四一些常见问题 class="table-of-contents__link toc-highlight">四、一些常见问题</a><ul><li><a href=#rebasesquash-merge class="table-of-contents__link toc-highlight"><code>rebase/squash merge</code></a></ul></ul></div><div class=tocAdBanner_imxD></div></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>