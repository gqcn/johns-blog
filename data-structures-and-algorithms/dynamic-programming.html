<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hidden/数据结构和算法/算法/动态规划详解" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>动态规划详解 | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/data-structures-and-algorithms/dynamic-programming><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="动态规划详解 | John's Blog"><meta data-rh=true name=description content=深入解析动态规划算法的核心概念、解题思路和实现技巧，包括最优子结构、状态转移方程的设计以及经典动态规划问题的解决方案><meta data-rh=true property=og:description content=深入解析动态规划算法的核心概念、解题思路和实现技巧，包括最优子结构、状态转移方程的设计以及经典动态规划问题的解决方案><meta data-rh=true name=keywords content=算法,动态规划,最优子结构,状态转移,递归,记忆化搜索,优化算法><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/data-structures-and-algorithms/dynamic-programming><link data-rh=true rel=alternate href=https://johng.cn/data-structures-and-algorithms/dynamic-programming hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/data-structures-and-algorithms/dynamic-programming hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><script src=https://cdn.wwads.cn/js/makemoney.js async></script><link rel=stylesheet href=/assets/css/styles.96de5670.css><script src=/assets/js/runtime~main.d348b943.js defer></script><script src=/assets/js/main.a16bd09c.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/cloud-native>云原生</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/hidden/goframe>GoFrame</a><button aria-label="Expand sidebar category 'GoFrame'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/hidden>隐藏目录</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/hidden/resource-collection>资源收藏</a><button aria-label="Expand sidebar category '资源收藏'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/hidden/other>其他文档</a><button aria-label="Expand sidebar category '其他文档'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/hidden/temp>临时文档</a><button aria-label="Expand sidebar category '临时文档'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/data-structures-and-algorithms>数据结构和算法</a><button aria-label="Collapse sidebar category '数据结构和算法'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/data-structures-and-algorithms/algorithms>算法</a><button aria-label="Collapse sidebar category '算法'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/data-structures-and-algorithms/sorting-algorithms>排序算法</a><button aria-label="Expand sidebar category '排序算法'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/data-structures-and-algorithms/dynamic-programming>动态规划详解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/page-replacement-algorithm>页面置换算法</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/lfu-cache-algorithm>LFU缓存算法</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/reverse-linked-list>反转链表(1)</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/longest-common-subsequence>最长公共子序列</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/longest-palindromic-subsequence>最长回文子序列</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/find-duplicate-number>寻找重复数</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/longest-consecutive-sequence>最长连续序列</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/repeated-substring-pattern>重复的子字符串</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/valid-square>有效的正方形</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/binary-tree-zigzag-traversal>二叉树的锯齿形层序遍历</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/spiral-matrix-traversal>螺旋遍历二维数组</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/data-structure-heap>堆（Heap）</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/data-structures-and-algorithms/data-structure-tree>树（Tree）</a></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/data-structures-and-algorithms><span itemprop=name>数据结构和算法</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/data-structures-and-algorithms/algorithms><span itemprop=name>算法</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>动态规划详解</span><meta itemprop=position content=3></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=什么是动态规划>什么是动态规划？<a href=#什么是动态规划 class=hash-link aria-label="Direct link to 什么是动态规划？" title="Direct link to 什么是动态规划？">​</a></h2>
<p>动态规划（英语：Dynamic programming，简称 DP），是一种在数学、管理科学、计算机科学、经济学和生物信息学中使用的，<strong>通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法</strong>。动态规划常常适用于有重叠子问题和最优子结构性质的问题。</p>
<blockquote>
<p>dynamic programming is a method for solving a complex problem by breaking it down into a collection of simpler subproblems.</p>
</blockquote>
<p>以上定义来自维基百科，看定义感觉还是有点抽象。简单来说，动态规划其实就是，给定一个问题，我们把它拆成一个个子问题，直到子问题可以直接解决。然后呢，把子问题答案保存起来，以减少重复计算。再根据子问题答案反推，得出原问题解的一种方法。</p>
<blockquote>
<p>一般这些子问题很相似，可以通过函数关系式递推出来。然后呢，动态规划就致力于解决每个子问题一次，减少重复计算,比如斐波那契数列就可以看做入门级的经典动态规划问题。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=动态规划核心思想>动态规划核心思想<a href=#动态规划核心思想 class=hash-link aria-label="Direct link to 动态规划核心思想" title="Direct link to 动态规划核心思想">​</a></h2>
<p>动态规划最核心的思想，就在于<strong>拆分子问题，记住过往，减少重复计算</strong>。</p>
<p>我们来看下，网上比较流行的一个例子：</p>
<blockquote>
<ul>
<li>A ："1+1+1+1+1+1+1+1 =？"</li>
<li>A ："上面等式的值是多少"</li>
<li>B ：计算 "8"</li>
<li>A ：在上面等式的左边写上 "1+" 呢？</li>
<li>A ："此时等式的值为多少"</li>
<li>B ：很快得出答案 "9"</li>
<li>A ："你怎么这么快就知道答案了"</li>
<li>A ："只要在8的基础上加1就行了"</li>
<li>A ："所以你不用重新计算，因为你记住了第一个等式的值为8!动态规划算法也可以说是 '记住求过的解来节省时间'"</li>
</ul>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=一个例子带你走进动态规划----青蛙跳阶问题>一个例子带你走进动态规划 -- 青蛙跳阶问题<a href=#一个例子带你走进动态规划----青蛙跳阶问题 class=hash-link aria-label="Direct link to 一个例子带你走进动态规划 -- 青蛙跳阶问题" title="Direct link to 一个例子带你走进动态规划 -- 青蛙跳阶问题">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=暴力递归>暴力递归<a href=#暴力递归 class=hash-link aria-label="Direct link to 暴力递归" title="Direct link to 暴力递归">​</a></h4>
<blockquote>
<p>leetcode原题：一只青蛙一次可以跳上1级台阶，也可以跳上2级台阶。求该青蛙跳上一个 10 级的台阶总共有多少种跳法。</p>
</blockquote>
<p>有些小伙伴第一次见这个题的时候，可能会有点蒙圈，不知道怎么解决。其实可以试想：</p>
<blockquote>
<ul>
<li>要想跳到第10级台阶，要么是先跳到第9级，然后再跳1级台阶上去;要么是先跳到第8级，然后一次迈2级台阶上去。</li>
<li>同理，要想跳到第9级台阶，要么是先跳到第8级，然后再跳1级台阶上去;要么是先跳到第7级，然后一次迈2级台阶上去。</li>
<li>要想跳到第8级台阶，要么是先跳到第7级，然后再跳1级台阶上去;要么是先跳到第6级，然后一次迈2级台阶上去。</li>
</ul>
</blockquote>
<p>假设跳到第n级台阶的跳数我们定义为f(n)，很显然就可以得出以下公式：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">f(10) = f(9) + f(8)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">f(9)  = f(8) + f(7)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">f(8)  = f(7) + f(6)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">...</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">f(3)  = f(2) + f(1)</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">即通用公式为: f(n) = f(n-1) + f(n-2)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>那f(2) 或者 f(1) 等于多少呢？</p>
<ul>
<li>当只有2级台阶时，有两种跳法，第一种是直接跳两级，第二种是先跳一级，然后再跳一级。即f(2) = 2;</li>
<li>当只有1级台阶时，只有一种跳法，即f(1)= 1；</li>
</ul>
<p>因此可以用递归去解决这个问题：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>class</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Solution</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>==</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>==</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token operator" style=color:#66d9ef>-</span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token operator" style=color:#66d9ef>-</span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>去leetcode提交一下，发现有问题，超出时间限制了</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-45-41-bd51ff20a90b9dc9faec2340f1da07f0.png width=1510 height=510 class=img_ev3q></p>
<p>为什么超时了呢？递归耗时在哪里呢？先画出<strong>递归树</strong>看看：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-45-55-3f62e9f60788d56410ee0d40cd821c79.png width=1510 height=1304 class=img_ev3q></p>
<ul>
<li>要计算原问题 f(10)，就需要先计算出子问题 f(9) 和 f(8)</li>
<li>然后要计算 f(9)，又要先算出子问题 f(8) 和 f(7)，以此类推。</li>
<li>一直到 f(2) 和 f(1），递归树才终止。</li>
</ul>
<p>我们先来看看这个递归的时间复杂度吧：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">递归时间复杂度 = 解决一个子问题时间*子问题个数</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<ul>
<li>一个子问题时间 = f(n-1) + f(n-2)，也就是一个加法的操作，所以复杂度是 O(1)；</li>
<li>问题个数 = 递归树节点的总数，递归树的总节点 = 2^n-1，所以是复杂度O(2^n)。</li>
</ul>
<p>因此，青蛙跳阶，递归解法的时间复杂度 = O(1) * O(2^n) = O(2^n)，就是指数级别的，爆炸增长的，如果n比较大的话，超时很正常的了。</p>
<p>回过头来，你仔细观察这颗递归树，你会发现存在大量重复计算，比如f(8)被计算了两次，f(7)被计算了3次...所以这个递归算法低效的原因，就是<strong>存在大量的重复计算</strong>！</p>
<p>既然存在大量重复计算，那么我们可以先把计算好的答案存下来，即造一个备忘录，等到下次需要的话，先去备忘录查一下，如果有，就直接取就好了，备忘录没有才开始计算，那就可以省去重新重复计算的耗时啦！这就是带<strong>备忘录</strong>的解法。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=带备忘录的递归解法自顶向下>带备忘录的递归解法（自顶向下）<a href=#带备忘录的递归解法自顶向下 class=hash-link aria-label="Direct link to 带备忘录的递归解法（自顶向下）" title="Direct link to 带备忘录的递归解法（自顶向下）">​</a></h4>
<p>一般使用一个数组或者一个哈希map充当这个<strong>备忘录</strong>。</p>
<ul>
<li>
<p>第一步，f(10)= f(9) + f(8)，f(9) 和f(8)都需要计算出来，然后再加到备忘录中，如下：<img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-46-54-f24dc50ae1a9ca7ed8ac7a99f4b5eb79.png width=1510 height=608 class=img_ev3q></p>
</li>
<li>
<p>第二步， f(9) = f(8)+ f(7)，f(8)= f(7)+ f(6), 因为 f(8) 已经在备忘录中啦，所以可以省掉，f(7)，f(6)都需要计算出来，加到备忘录中~<img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-47-10-f4d258e02ed42fe011996e9db29fc66b.png width=1510 height=590 class=img_ev3q></p>
</li>
<li>
<p>第三步， f(8) = f(7) + f(6)，发现f(8)、f(7)、f(6)全部都在备忘录上了，所以都可以剪掉。<img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-47-34-7e3f0354ba92a6c65f4c57c0fc4d78d7.png width=1510 height=740 class=img_ev3q></p>
</li>
</ul>
<p>所以呢，用了备忘录递归算法，递归树变成光秃秃的树干咯，如下：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-48-2-5ac662b9880346d2cb732f75397a24f5.png width=1510 height=392 class=img_ev3q></p>
<p>带<strong>备忘录</strong>的递归算法，子问题个数=树节点数=n，解决一个子问题还是O(1)，所以带<strong>备忘录</strong>的递归算法的时间复杂度是O(n)。接下来呢，我们用带<strong>备忘录</strong>的递归算法去撸代码，解决这个青蛙跳阶问题的超时问题咯~，代码如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>class</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Solution</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#8292a2;font-style:italic>//使用哈希map，充当备忘录的作用</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token class-name" style=color:#e6db74>Map</span><span class="token generics punctuation" style=color:#f8f8f2>&lt;</span><span class="token generics class-name" style=color:#e6db74>Integer</span><span class="token generics punctuation" style=color:#f8f8f2>,</span><span class="token generics"> </span><span class="token generics class-name" style=color:#e6db74>Integer</span><span class="token generics punctuation" style=color:#f8f8f2>></span><span class="token plain"> tempMap </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>new</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>HashMap</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic>// n = 0 也算1种</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>==</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>&lt;=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> n</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic>//先判断有没计算过，即看看备忘录有没有</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">tempMap</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>containsKey</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token comment" style=color:#8292a2;font-style:italic>//备忘录有，即计算过，直接返回</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> tempMap</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>get</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token comment" style=color:#8292a2;font-style:italic>// 备忘录没有，即没有计算过，执行递归计算,并且把结果保存到备忘录map中，对1000000007取余（这个是leetcode题目规定的）</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            tempMap</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>put</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>-</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>-</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>%</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1000000007</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> tempMap</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>get</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>去leetcode提交一下，如图，稳了：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-49-39-8c8b0785b0fb1f8d91a9e64f303d5f20.png width=1510 height=578 class=img_ev3q></p>
<p>其实，还可以用动态规划解决这道题。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=自底向上的动态规划>自底向上的动态规划<a href=#自底向上的动态规划 class=hash-link aria-label="Direct link to 自底向上的动态规划" title="Direct link to 自底向上的动态规划">​</a></h4>
<p>动态规划跟带备忘录的递归解法基本思想是一致的，都是减少重复计算，时间复杂度也都是差不多。但是呢：</p>
<ul>
<li>带备忘录的递归，是从f(10)往f(1)方向延伸求解的，所以也称为<strong>自顶向下</strong>的解法。</li>
<li><strong>动态规划从较小问题的解，由交叠性质，逐步决策出较大问题的解</strong>，它是从f(1)往f(10)方向，往上推求解，所以称为<strong>自底向上</strong>的解法。</li>
</ul>
<p>动态规划有几个典型特征，<strong>最优子结构、状态转移方程、边界、重叠子问题</strong>。在青蛙跳阶问题中：</p>
<ul>
<li>f(n-1) 和 f(n-2) 称为 f(n) 的<strong>最优子结构。</strong></li>
<li>f(n)=f(n-1) + f(n-2)就称为<strong>状态转移方程。</strong></li>
<li>f(1)=1, f(2)=2 就是<strong>边界</strong>啦。</li>
<li>比如f(10)= f(9)+f(8)，f(9) = f(8) + f(7)，f(8)就是<strong>重叠子问题</strong>。</li>
</ul>
<p>我们来看下自底向上的解法，从f(1)往f(10)方向，想想是不是直接一个for循环就可以解决啦，如下：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-50-3-046474c016773616664f3862fb206a74.png width=1510 height=500 class=img_ev3q></p>
<p>带备忘录的递归解法，空间复杂度是O(n)，但是呢，仔细观察上图，可以发现，f(n)只依赖前面两个数，所以只需要两个变量a和b来存储，就可以满足需求了，因此空间复杂度是O(1)就可以啦：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-50-18-254f0861c6254695bb74ec64712c2d45.png width=1510 height=590 class=img_ev3q></p>
<p>动态规划实现代码如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>class</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Solution</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>numWays</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> n</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n</span><span class="token operator" style=color:#66d9ef>&lt;=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">n </span><span class="token operator" style=color:#66d9ef>==</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> a </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> b </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> temp </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> i </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> i </span><span class="token operator" style=color:#66d9ef>&lt;=</span><span class="token plain"> n</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> i</span><span class="token operator" style=color:#66d9ef>++</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            temp </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">a </span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"> b</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token operator" style=color:#66d9ef>%</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1000000007</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            a </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> b</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            b </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> temp</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> temp</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=动态规划的解题套路>动态规划的解题套路<a href=#动态规划的解题套路 class=hash-link aria-label="Direct link to 动态规划的解题套路" title="Direct link to 动态规划的解题套路">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=什么样的问题可以考虑使用动态规划解决呢>什么样的问题可以考虑使用动态规划解决呢？<a href=#什么样的问题可以考虑使用动态规划解决呢 class=hash-link aria-label="Direct link to 什么样的问题可以考虑使用动态规划解决呢？" title="Direct link to 什么样的问题可以考虑使用动态规划解决呢？">​</a></h4>
<blockquote>
<p>如果一个问题，可以把所有可能的答案穷举出来，并且穷举出来后，发现存在重叠子问题，就可以考虑使用动态规划。</p>
</blockquote>
<p>比如一些求最值的场景，如<strong>最长递增子序列、最小编辑距离、背包问题、凑零钱问题</strong>等等，都是动态规划的经典应用场景。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=动态规划的解题思路>动态规划的解题思路<a href=#动态规划的解题思路 class=hash-link aria-label="Direct link to 动态规划的解题思路" title="Direct link to 动态规划的解题思路">​</a></h2>
<p>动态规划的核心思想就是<strong>拆分子问题，记住过往，减少重复计算。</strong> <strong>并且动态规划一般都是自底向上的</strong>，因此到这里，基于<strong>青蛙跳阶</strong>问题，我总结了一下我做动态规划的思路：</p>
<ul>
<li><strong>穷举分析</strong></li>
<li><strong>确定边界</strong></li>
<li><strong>找出规律，确定最优子结构</strong></li>
<li><strong>写出状态转移方程</strong></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=1穷举分析>1. 穷举分析<a href=#1穷举分析 class=hash-link aria-label="Direct link to 1. 穷举分析" title="Direct link to 1. 穷举分析">​</a></h4>
<ul>
<li>当台阶数是1的时候，有一种跳法，f(1)=1</li>
<li>当只有2级台阶时，有两种跳法，第一种是直接跳两级，第二种是先跳一级，然后再跳一级。即f(2) = 2;</li>
<li>当台阶是3级时，想跳到第3级台阶，要么是先跳到第2级，然后再跳1级台阶上去，要么是先跳到第 1级，然后一次迈 2 级台阶上去。所以f(3) = f(2) + f(1) =3</li>
<li>当台阶是4级时，想跳到第3级台阶，要么是先跳到第3级，然后再跳1级台阶上去，要么是先跳到第 2级，然后一次迈 2 级台阶上去。所以f(4) = f(3) + f(2) =5</li>
<li>当台阶是5级时......</li>
</ul>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-51-14-01d53a435a2cd9851af7e184913a9db8.png width=1510 height=592 class=img_ev3q></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=2-确定边界>2. 确定边界<a href=#2-确定边界 class=hash-link aria-label="Direct link to 2. 确定边界" title="Direct link to 2. 确定边界">​</a></h4>
<p>通过穷举分析，我们发现，当台阶数是1的时候或者2的时候，可以明确知道青蛙跳法。f(1)=1，f(2)= 2，当台阶n>=3时，已经呈现出规律f(3) = f(2) + f(1) = 3，因此 f(1)=1，f(2)=2就是青蛙跳阶的边界。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=3-找规律确定最优子结构>3. 找规律，确定最优子结构<a href=#3-找规律确定最优子结构 class=hash-link aria-label="Direct link to 3. 找规律，确定最优子结构" title="Direct link to 3. 找规律，确定最优子结构">​</a></h4>
<p>n>=3时，已经呈现出规律 f(n) = f(n-1) + f(n-2) ，因此，f(n-1) 和 f(n-2) 称为 f(n) 的最优子结构。什么是最优子结构？有这么一个解释：</p>
<blockquote>
<p>一道动态规划问题，其实就是一个递推问题。假设当前决策结果是f(n)，则最优子结构就是要让 f(n-k) 最优,最优子结构性质就是能让转移到n的状态是最优的,并且与后面的决策没有关系,即让后面的决策安心地使用前面的局部最优解的一种性质</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=4-写出状态转移方程>4. 写出状态转移方程<a href=#4-写出状态转移方程 class=hash-link aria-label="Direct link to 4. 写出状态转移方程" title="Direct link to 4. 写出状态转移方程">​</a></h4>
<p>通过前面3步，穷举分析，确定边界，最优子结构，我们就可以得出状态转移方程啦：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-51-36-7dd4087863ecaee993f4f248f4738e0f.png width=1510 height=512 class=img_ev3q></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=5-代码实现>5. 代码实现<a href=#5-代码实现 class=hash-link aria-label="Direct link to 5. 代码实现" title="Direct link to 5. 代码实现">​</a></h4>
<p>我们实现代码的时候，一般注意从底往上遍历哈，然后关注下边界情况，空间复杂度，也就差不多啦。动态规划有个框架的，大家实现的时候，可以考虑适当参考一下：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">dp[0][0][...] = 边界值</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">for(状态1 ：所有状态1的值){</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    for(状态2 ：所有状态2的值){</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        for(...){</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          //状态转移方程</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          dp[状态1][状态2][...] = 求最值</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        }</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    }</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=leetcode案例分析>leetcode案例分析<a href=#leetcode案例分析 class=hash-link aria-label="Direct link to leetcode案例分析" title="Direct link to leetcode案例分析">​</a></h2>
<p>我们一起来分析一道经典leetcode题目吧</p>
<blockquote>
<p>给你一个整数数组 nums ，找到其中最长严格递增子序列的长度。</p>
</blockquote>
<p>示例 1：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">输入：nums = [10,9,2,5,3,7,101,18]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">输出：4</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">解释：最长递增子序列是 [2,3,7,101]，因此长度为 4 。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>示例 2：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">输入：nums = [0,1,0,3,2,3]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">输出：4</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>我们按照以上动态规划的解题思路，</p>
<ul>
<li>穷举分析</li>
<li>确定边界</li>
<li>找规律，确定最优子结构</li>
<li>状态转移方程</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=穷举分析>穷举分析<a href=#穷举分析 class=hash-link aria-label="Direct link to 穷举分析" title="Direct link to 穷举分析">​</a></h4>
<p>因为动态规划，核心思想包括<strong>拆分子问题，记住过往，减少重复计算。</strong> 所以我们在思考原问题：<strong>数组<code>num[i]</code>的最长递增子序列长度时</strong>，可以思考下<strong>相关子问题</strong>，比如原问题是否跟<strong>子问题</strong><code>num[i-1]</code>的最长递增子序列长度有关呢？</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id=自顶向上的穷举>自顶向上的穷举<a href=#自顶向上的穷举 class=hash-link aria-label="Direct link to 自顶向上的穷举" title="Direct link to 自顶向上的穷举">​</a></h6>
<p>这里观察规律，显然是有关系的，我们还是遵循动态规划<strong>自底向上</strong>的原则，基于示例1的数据，从数组只有一个元素开始分析。</p>
<ul>
<li>当nums只有一个元素10时，最长递增子序列是[10],长度是1.</li>
<li>当nums需要加入一个元素9时，最长递增子序列是[10]或者[9],长度是1。</li>
<li>当nums再加入一个元素2时，最长递增子序列是[10]或者[9]或者[2],长度是1。</li>
<li>当nums再加入一个元素5时，最长递增子序列是[2,5],长度是2。</li>
<li>当nums再加入一个元素3时，最长递增子序列是[2,5]或者[2,3],长度是2。</li>
<li>当nums再加入一个元素7时，,最长递增子序列是[2,5,7]或者[2,3,7],长度是3。</li>
<li>当nums再加入一个元素101时，最长递增子序列是[2,5,7,101]或者[2,3,7,101],长度是4。</li>
<li>当nums再加入一个元素18时，最长递增子序列是[2,5,7,101]或者[2,3,7,101]或者[2,5,7,18]或者[2,3,7,18],长度是4。</li>
<li>当nums再加入一个元素7时,最长递增子序列是[2,5,7,101]或者[2,3,7,101]或者[2,5,7,18]或者[2,3,7,18],长度是4.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id=分析找规律拆分子问题>分析找规律，拆分子问题<a href=#分析找规律拆分子问题 class=hash-link aria-label="Direct link to 分析找规律，拆分子问题" title="Direct link to 分析找规律，拆分子问题">​</a></h6>
<p>通过上面分析，我们可以<strong>发现一个规律</strong>：</p>
<p>如果新加入一个元素<code>nums[i]</code>，最长递增子序列要么<strong>是以<code>nums[i]</code>结尾的递增子序列</strong>，要么就是**<code>nums[i-1]</code>的最长递增子序列**。看到这个，是不是很开心，<code>nums[i]</code>的最长递增子序列已经跟<strong>子问题</strong><code>nums[i-1]</code>的最长递增子序列有关联了。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">原问题数组nums[i]的最长递增子序列 = max(子问题数组nums[i-1]的最长递增子序列, nums[i]结尾的最长递增子序列)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>是不是感觉成功了一半呢？但是<strong>如何把<code>nums[i]</code>结尾的递增子序列也转化为对应的子问题</strong>呢？要是<code>nums[i]</code>结尾的递增子序列也跟<code>nums[i-1]</code>的最长递增子序列有关就好了。又或者<code>nums[i]</code>结尾的最长递增子序列，跟前面子问题<code>num[j](0=&lt;j&lt;i)</code>结尾的最长递增子序列有关就好了，带着这个想法，我们又回头看看穷举的过程：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-54-4-9e645d89c14b9df78fa6126bebea66a6.png width=1510 height=736 class=img_ev3q></p>
<p><code>nums[i]</code>的最长递增子序列，不就是<strong>从以数组<code>num[i]</code>每个元素结尾的最长子序列集合，取元素最多（也就是长度最长）那个嘛</strong>，所以原问题，我们转化成求出以数组nums每个元素结尾的最长子序列集合，再取<strong>最大值</strong>嘛。哈哈，想到这，我们就可以<strong>用<code>dp[i]</code>表示以<code>num[i]</code>这个数结尾的最长递增子序列的长度</strong>啦，然后再来看看其中的规律：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-54-21-64f111374d091fa4a765ea7840ea970c.png width=1510 height=462 class=img_ev3q></p>
<p>其实，**<code>nums[i]</code>结尾的自增子序列，只要找到比<code>nums[i]</code>小的子序列，加上<code>nums[i]</code>**就可以啦。显然，可能形成多种新的子序列，我们选最长那个，就是<code>dp[i]</code>的值啦：</p>
<blockquote>
<ul>
<li><code>nums[3]=5</code>，以<code>5</code>结尾的最长子序列就是<code>[2,5]</code>,因为从数组下标<code>0到3</code>遍历，只找到了子序列<code>[2]</code>比<code>5</code>小，所以就是<code>[2]+[5]</code>啦，即<code>dp[4]=2</code></li>
<li><code>nums[4]=3</code>，以<code>3</code>结尾的最长子序列就是<code>[2,3]</code>,因为从数组下标<code>0到4</code>遍历，只找到了子序列<code>[2]</code>比<code>3</code>小，所以就是<code>[2]+[3]</code>啦，即<code>dp[4]=2</code></li>
<li><code>nums[5]=7</code>，以<code>7</code>结尾的最长子序列就是<code>[2,5,7]</code>和<code>[2,3,7]</code>,因为从数组下标<code>0到5</code>遍历，找到<code>2,5和3</code>都比7小，所以就有<code>[2,7],[5,7],[3,7],[2,5,7]和[2,3,7]</code>这些子序列，最长子序列就是<code>[2,5,7]和[2,3,7]</code>，它俩不就是以<code>5</code>结尾和<code>3</code>结尾的最长递增子序列+[7]来的嘛！所以，<strong><code>dp[5]=3 =dp[3]+1=dp[4]+1</code></strong>。</li>
</ul>
</blockquote>
<p><strong>很显然有这个规律：一个以<code>nums[i]</code>结尾的数组<code>nums</code>，如果存在<code>j</code>属于区间<code>[0，i-1]</code>，并且<code>num[i]>num[j]</code>的话，则有：<code>dp(i) = max(dp(j)) + 1</code></strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=最简单的边界情况>最简单的边界情况<a href=#最简单的边界情况 class=hash-link aria-label="Direct link to 最简单的边界情况" title="Direct link to 最简单的边界情况">​</a></h4>
<p>当nums数组只有一个元素时，最长递增子序列的长度<code>dp(1)=1</code>，当nums数组有两个元素时，<code>dp(2)=2</code>或者<code>1</code>， 因此边界就是<code>dp(1)=1</code>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=确定最优子结构>确定最优子结构<a href=#确定最优子结构 class=hash-link aria-label="Direct link to 确定最优子结构" title="Direct link to 确定最优子结构">​</a></h4>
<p>从穷举分析，我们可以得出，以下的最优结构：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">dp(i) = max(dp(j)) + 1，存在j属于区间[0，i-1], 并且num[i] > num[j]。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>**max(dp(j))**</code> 就是最优子结构。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=状态转移方程>状态转移方程<a href=#状态转移方程 class=hash-link aria-label="Direct link to 状态转移方程" title="Direct link to 状态转移方程">​</a></h4>
<p>通过前面分析，我们就可以得出状态转移方程啦：</p>
<p><img decoding=async loading=lazy src=/assets/images/image-2024-9-2_15-55-20-be0728bcbdf6c3fe1d5b138a9236e8b6.png width=1510 height=448 class=img_ev3q></p>
<p>所以数组<code>num[i]</code>的最长递增子序列就是：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">最长递增子序列 = max(dp[i])</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=代码实现>代码实现<a href=#代码实现 class=hash-link aria-label="Direct link to 代码实现" title="Direct link to 代��码实现">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-java codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>class</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Solution</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>public</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>lengthOfLIS</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> nums</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">nums</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">length </span><span class="token operator" style=color:#66d9ef>==</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> dp </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>new</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">nums</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">length</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic>// 初始化就是边界情况</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> maxans </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#8292a2;font-style:italic>// 自底向上遍历</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> i </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> i </span><span class="token operator" style=color:#66d9ef>&lt;</span><span class="token plain"> nums</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">length</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> i</span><span class="token operator" style=color:#66d9ef>++</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token comment" style=color:#8292a2;font-style:italic>// 从下标0到i遍历</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token keyword" style=color:#66d9ef>int</span><span class="token plain"> j </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> j </span><span class="token operator" style=color:#66d9ef>&lt;</span><span class="token plain"> i</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"> j</span><span class="token operator" style=color:#66d9ef>++</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token comment" style=color:#8292a2;font-style:italic>// 找到前面比nums[i]小的数nums[j], 即有dp[i]= dp[j]+1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">nums</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">j</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>&lt;</span><span class="token plain"> nums</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                    </span><span class="token comment" style=color:#8292a2;font-style:italic>// 因为会有多个小于nums[i]的数，也就是会存在多种组合了嘛，我们就取最大放到dp[i]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                    dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Math</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>max</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">j</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token comment" style=color:#8292a2;font-style:italic>// 求出dp[i]后，dp最大那个就是nums的最长递增子序列啦</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            maxans </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Math</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>max</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">maxans</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> dp</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> maxans</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=参考资料>参考资料<a href=#参考资料 class=hash-link aria-label="Direct link to 参考资料" title="Direct link to 参考资料">​</a></h2>
<ul>
<li><a href=https://juejin.cn/post/6951922898638471181 target=_blank rel="noopener noreferrer">https://juejin.cn/post/6951922898638471181</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/data-structures-and-algorithms/bubble-sort><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>冒泡排序</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/data-structures-and-algorithms/page-replacement-algorithm><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>页面置换算法</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class=tocContainer_PXzm><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#什么是动态规划 class="table-of-contents__link toc-highlight">什么是动态规划？</a><li><a href=#动态规划核心思想 class="table-of-contents__link toc-highlight">动态规划核心思想</a><li><a href=#一个例子带你走进动态规划----青蛙跳阶问题 class="table-of-contents__link toc-highlight">一个例子带你走进动态规划 -- 青蛙跳阶问题</a><li><a href=#动态规划的解题套路 class="table-of-contents__link toc-highlight">动态规划的解题套路</a><li><a href=#动态规划的解题思路 class="table-of-contents__link toc-highlight">动态规划的解题思路</a><li><a href=#leetcode案例分析 class="table-of-contents__link toc-highlight">leetcode案例分析</a><li><a href=#参考资料 class="table-of-contents__link toc-highlight">参考资料</a></ul></div><div class=tocAdBanner_imxD></div></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>