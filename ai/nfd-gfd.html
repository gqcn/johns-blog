<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/AI技术/NFD&GFD" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>NFD&GFD | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/ai/nfd-gfd><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="NFD&GFD | John's Blog"><meta data-rh=true name=description content="本文详细介绍Kubernetes中的Node Feature Discovery (NFD)和GPU Feature Discovery (GFD)技术，包括其基本概念、背景、作用、实现原理及支持的标签列表，帮助用户更好地理解和使用这些技术进行高效的资源调度。"><meta data-rh=true property=og:description content="本文详细介绍Kubernetes中的Node Feature Discovery (NFD)和GPU Feature Discovery (GFD)技术，包括其基本概念、背景、作用、实现原理及支持的标签列表，帮助用户更好地理解和使用这些技术进行高效的资源调度。"><meta data-rh=true name=keywords content="NFD,GFD,Node Feature Discovery,GPU Feature Discovery,Kubernetes,NVIDIA,节点特性发现,GPU特性发现,云原生,标签管理,资源调度,AI基础设施,硬件感知调度,异构计算"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/ai/nfd-gfd><link data-rh=true rel=alternate href=https://johng.cn/ai/nfd-gfd hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/ai/nfd-gfd hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.208c11f9.css><script src=/assets/js/runtime~main.b9111721.js defer></script><script src=/assets/js/main.fe8d3051.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" sidebarid=mainSidebar href=/ai>AI技术</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/cloud-native>云原生</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/notes>日常笔记</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/programming>开发语言</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/architecture>技术架构</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/observability>可观测性</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/database-and-middleware>数据库与中间件</a><a class="navbar__item navbar__link" href=/aboutme>关于我</a></div><div class="navbar__items navbar__items--right"><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/ai>AI技术</a><button aria-label="Collapse sidebar category 'AI技术'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/nvidia>NVIDIA</a><button aria-label="Expand sidebar category 'NVIDIA'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/distributed-inference>分布式推理</a><button aria-label="Expand sidebar category '分布式推理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/scheduling>算力资源调度</a><button aria-label="Expand sidebar category '算力资源调度'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/ai/nfd-gfd>NFD&GFD</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ai/common-acceleration-cards>常见智算加速卡汇总</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ai/rdma>RDMA技术架构深度解析</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ai/general-ai-model-and-reasoning-ai-model-difference>通用大模型和推理大模型区别</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ai/common-ai-model-training-inference-framework>常见AI模型训练推理框架对比</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/ai/ai-training-inference-scenarios>AI模型训练推理常见业务场景痛点</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/observability>可观测性</a><button aria-label="Expand sidebar category '可观测性'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai><span itemprop=name>AI技术</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>NFD&GFD</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>在<code>Kubernetes</code>集群中，有效识别节点<strong>硬件特性</strong>并进行自动标记是实现智能资源调度的关键前提。<code>Node Feature Discovery</code> (<code>NFD</code>)和<code>GPU Feature Discovery</code> (<code>GFD</code>)正是专为此目的设计的技术组件，它们的核心功能是自动检测集群中各节点的硬件与系统特性，并将这些信息转化为标准化的节点标签(<code>Node Labels</code>)。通过这些标签，<code>Kubernetes</code>调度器能够精确了解每个节点的能力边界，从而实现基于硬件感知的智能工作负载分配。本文将详细介绍这两种节点标记技术的背景、作用和实现原理，重点阐述它们如何通过自动化的硬件发现和标记机制优化集群资源利用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-node-feature-discovery-nfd>1. Node Feature Discovery (NFD)<a href=#1-node-feature-discovery-nfd class=hash-link aria-label="Direct link to 1. Node Feature Discovery (NFD)" title="Direct link to 1. Node Feature Discovery (NFD)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=11-基本介绍>1.1 基本介绍<a href=#11-基本介绍 class=hash-link aria-label="Direct link to 1.1 基本介绍" title="Direct link to 1.1 基本介绍">​</a></h3>
<p><img decoding=async loading=lazy alt="alt text" src=/assets/images/image-2c9d98b3ff6e1503a53ea2bbad59db31.png width=1013 height=629 class=img_ev3q></p>
<p><code>Node Feature Discovery</code> (<code>NFD</code>)是<code>Kubernetes</code>的一个插件，用于自动检测节点的硬件特性和系统配置，并将这些信息以标签(<code>labels</code>)的形式添加到<code>Kubernetes</code>节点对象上。<code>NFD</code>是<code>Kubernetes SIG</code> (<code>Special Interest Group</code>)下的一个项目，目前已成为云原生计算基金会(<code>CNCF</code>)的沙箱项目。</p>
<ul>
<li>官网地址：<a href=https://nfd.sigs.k8s.io/get-started/index.html target=_blank rel="noopener noreferrer">https://nfd.sigs.k8s.io/get-started/index.html</a></li>
<li>开源仓库：<a href=https://github.com/kubernetes-sigs/node-feature-discovery target=_blank rel="noopener noreferrer">https://github.com/kubernetes-sigs/node-feature-discovery</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=12-背景与作用>1.2 背景与作用<a href=#12-背景与作用 class=hash-link aria-label="Direct link to 1.2 背景与作用" title="Direct link to 1.2 背景与作用">​</a></h3>
<p>在传统的<code>Kubernetes</code>环境中，管理员通常需要手动为节点添加标签以指示其特性，这不仅繁琐且容易出错，还难以跟上硬件变化。随着异构计算的普及，集群中可能包含各种不同硬件配置的节点，如<code>CPU</code>型号、<code>GPU</code>数量、特殊指令集支持等。</p>
<p><code>NFD</code>的主要作用包括：</p>
<ol>
<li><strong>自动发现硬件特性</strong>：无需手动干预，自动检测节点的<code>CPU</code>、内存、存储、网络等硬件特性</li>
<li><strong>简化资源管理</strong>：通过标准化的标签系统，简化集群管理和资源规划</li>
<li><strong>优化工作负载调度</strong>：使调度器能够根据应用需求将<code>Pod</code>调度到最合适的节点上</li>
<li><strong>支持异构集群</strong>：有效管理包含不同硬件配置的混合集群</li>
<li><strong>提高资源利用率</strong>：通过精确匹配工作负载和硬件特性，提高整体资源利用效率</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=13-业务场景示例>1.3 业务场景示例<a href=#13-业务场景示例 class=hash-link aria-label="Direct link to 1.3 业务场景示例" title="Direct link to 1.3 业务场景示例">​</a></h3>
<p>为了更直观地理解<code>NFD</code>的必要性和实际价值，考虑以下业务场景：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=场景混合计算集群中的机器学习工作负载调度>场景：混合计算集群中的机器学习工作负载调度<a href=#场景混合计算集群中的机器学习工作负载调度 class=hash-link aria-label="Direct link to 场景：混合计算集群中的机器学习工作负载调度" title="Direct link to 场景：混合计算集群中的机器学习工作负载调度">​</a></h4>
<p>某金融科技公司拥有一个包含<code>50</code>个节点的<code>Kubernetes</code>集群，这些节点硬件配置各不相同：</p>
<ul>
<li><code>20</code>个节点配备了<code>NVIDIA V100 GPU</code>，支持<code>CUDA 11.0</code></li>
<li><code>15</code>个节点配备了<code>NVIDIA A100 GPU</code>，支持<code>CUDA 11.2</code></li>
<li><code>10</code>个节点配备了<code>Intel Xeon</code>处理器，支持<code>AVX-512</code>指令集</li>
<li><code>5</code>个节点配备了<code>AMD EPYC</code>处理器，支持<code>AVX2</code>指令集</li>
</ul>
<p>公司需要运行多种机器学习工作负载，包括：</p>
<ol>
<li><strong>深度学习模型训练</strong>：需要<code>CUDA 11.2</code>及以上版本，需要大内存GPU</li>
<li><strong>实时推理服务</strong>：需要<code>CUDA</code>支持，但对版本要求不高</li>
<li><strong>数据预处理</strong>：需要<code>AVX-512</code>指令集优化</li>
<li><strong>统计分析</strong>：可在普通<code>CPU</code>节点运行</li>
</ol>
<p><strong>未使用NFD的情况：</strong></p>
<p>在没有<code>NFD</code>的情况下，运维团队需要：</p>
<ol>
<li>手动调查并记录每个节点的硬件配置</li>
<li>手动为每个节点添加标签，如<code>gpu=v100</code>、<code>gpu=a100</code>、<code>cpu=xeon-avx512</code>等</li>
<li>当硬件升级或更换时，需要手动更新这些标签</li>
<li>为每个工作负载编写复杂的<code>nodeSelector</code>或<code>nodeAffinity</code>规则</li>
</ol>
<p>这个过程非常耗时、容易出错，并且难以维护。</p>
<p><strong>使用NFD的情况：</strong></p>
<p>部署<code>NFD</code>后：</p>
<ol>
<li>
<p><code>NFD</code>自动发现并标记所有节点的硬件特性，生成标准化的标签，如：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">feature.node.kubernetes.io/cpu-model.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"xeon"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/cpu-feature.avx512f</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/pci-10de.present</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># NVIDIA GPU存在</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>开发团队可以使用这些标准标签来定义工作负载的调度规则，例如：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># 深度学习训练任务</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">feature.node.kubernetes.io/pci-10de.present</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 需要NVIDIA GPU</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nodeAffinity</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">requiredDuringSchedulingIgnoredDuringExecution</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">nodeSelectorTerms</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">matchExpressions</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> nvidia.com/gpu.compute.major</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">operator</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> gt</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">values</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"7"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># 需要计算能力7.0以上的GPU</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>当硬件变更时，<code>NFD</code>自动更新标签，无需手动干预</p>
</li>
<li>
<p>运维团队可以通过查询这些标签快速了解集群的硬件组成：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">kubectl get nodes </span><span class="token parameter variable" style=color:#f8f8f2>-o</span><span class="token plain"> json </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"> jq </span><span class="token string" style=color:#a6e22e>'.items[] | {name: .metadata.name, labels: .metadata.labels}'</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>grep</span><span class="token plain"> feature.node.kubernetes.io</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>效益：</strong></p>
<ol>
<li><strong>运维效率提升</strong>：节省了手动标记和维护标签的时间</li>
<li><strong>资源利用率提高</strong>：工作负载能够自动调度到最合适的节点上</li>
<li><strong>减少错误</strong>：避免了手动标记可能导致的错误</li>
<li><strong>灵活性提升</strong>：当添加新节点或升级硬件时，无需额外的配置工作</li>
</ol>
<p>这个场景展示了<code>NFD</code>如何在一个复杂的异构计算环境中自动化硬件发现和标记过程，从而显著提高运维效率和资源利用率。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=14-实现原理>1.4 实现原理<a href=#14-实现原理 class=hash-link aria-label="Direct link to 1.4 实现原理" title="Direct link to 1.4 实现原理">​</a></h3>
<p><code>NFD</code>由四个主要组件组成：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=141-nfd-master>1.4.1 NFD-Master<a href=#141-nfd-master class=hash-link aria-label="Direct link to 1.4.1 NFD-Master" title="Direct link to 1.4.1 NFD-Master">​</a></h4>
<p><code>NFD-Master</code>是负责与<code>Kubernetes API</code>通信的守护进程。它接收来自<code>NFD-Worker</code>的标签请求，并相应地修改节点对象。通常作为<code>Deployment</code>部署在集群中，只需要一个实例。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=142-nfd-worker>1.4.2 NFD-Worker<a href=#142-nfd-worker class=hash-link aria-label="Direct link to 1.4.2 NFD-Worker" title="Direct link to 1.4.2 NFD-Worker">​</a></h4>
<p><code>NFD-Worker</code>是负责特性检测的守护进程。它在每个节点上运行，检测节点的硬件和软件特性，然后将这些信息传递给<code>NFD-Master</code>进行实际的节点标记。通常作为<code>DaemonSet</code>部署，确保集群中的每个节点都运行一个实例。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=143-nfd-topology-updater>1.4.3 NFD-Topology-Updater<a href=#143-nfd-topology-updater class=hash-link aria-label="Direct link to 1.4.3 NFD-Topology-Updater" title="Direct link to 1.4.3 NFD-Topology-Updater">​</a></h4>
<p><code>NFD-Topology-Updater</code>是负责检查节点上已分配资源的守护进程，用于按区域(如<code>NUMA</code>节点)记录可分配给新<code>Pod</code>的资源。它创建或更新特定于该节点的<code>NodeResourceTopology</code>自定义资源对象。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=144-nfd-gc>1.4.4 NFD-GC<a href=#144-nfd-gc class=hash-link aria-label="Direct link to 1.4.4 NFD-GC" title="Direct link to 1.4.4 NFD-GC">​</a></h4>
<p><code>NFD-GC</code>是负责清理过时的<code>NodeFeature</code>和<code>NodeResourceTopology</code>对象的守护进程。在集群中通常只需要运行一个实例。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=15-特性发现机制>1.5 特性发现机制<a href=#15-特性发现机制 class=hash-link aria-label="Direct link to 1.5 特性发现机制" title="Direct link to 1.5 特性发现机制">​</a></h3>
<p><code>NFD</code>将特性发现分为多个特定领域的特性源：</p>
<ul>
<li><strong>CPU</strong>：检测<code>CPU</code>型号、特性(如<code>AVX</code>, <code>AVX2</code>, <code>AVX512</code>)、拓扑等</li>
<li><strong>内存</strong>：检测<code>NUMA</code>拓扑、大页面支持等</li>
<li><strong>存储</strong>：检测本地存储类型、特性等</li>
<li><strong>网络</strong>：检测网络设备、特性等</li>
<li><strong>PCI设备</strong>：检测<code>PCI</code>设备，如<code>GPU</code>、网卡等</li>
<li><strong>USB设备</strong>：检测<code>USB</code>设备</li>
<li><strong>系统</strong>：检测操作系统、内核版本等</li>
<li><strong>自定义</strong>：基于规则的自定义特性</li>
<li><strong>本地</strong>：基于文件的特性</li>
</ul>
<p>这些特性源负责检测一组特性，然后转换为节点特性标签。特性标签以<code>feature.node.kubernetes.io/</code>为前缀，并包含特性源的名称。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=16-nfd支持的标签>1.6 NFD支持的标签<a href=#16-nfd支持的标签 class=hash-link aria-label="Direct link to 1.6 NFD支持的标签" title="Direct link to 1.6 NFD支持的标签">​</a></h3>
<p>以下是<code>NFD</code>支持的主要标签类别及其详细说明：</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=161-cpu标签>1.6.1 CPU标签<a href=#161-cpu标签 class=hash-link aria-label="Direct link to 1.6.1 CPU标签" title="Direct link to 1.6.1 CPU标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>cpu-cpuid.&lt;cpuid-flag></code><td><code>boolean</code><td><code>CPU</code>支持特定指令集或功能<td><code>true</code><tr><td><code>cpu-cpuid.&lt;cpuid-attribute></code><td><code>string</code><td><code>CPU</code>属性值<td><code>GenuineIntel</code><tr><td><code>cpu-hardware_multithreading</code><td><code>boolean</code><td>硬件多线程(如<code>Intel HTT</code>)已启用<td><code>true</code><tr><td><code>cpu-coprocessor.nx_gzip</code><td><code>boolean</code><td>支持用于<code>GZIP</code>的<code>Nest</code>加速器(<code>Power</code>架构)<td><code>true</code><tr><td><code>cpu-power.sst_bf.enabled</code><td><code>boolean</code><td><code>Intel SST-BF</code>(基础频率)已启用<td><code>true</code><tr><td><code>cpu-pstate.status</code><td><code>string</code><td><code>Intel pstate</code>驱动程序状态<td><code>active</code><tr><td><code>cpu-pstate.turbo</code><td><code>boolean</code><td><code>Intel pstate</code>驱动中的<code>turbo</code>频率是否启用<td><code>true</code><tr><td><code>cpu-pstate.scaling_governor</code><td><code>string</code><td><code>Intel pstate</code>缩放调节器<td><code>performance</code><tr><td><code>cpu-cstate.enabled</code><td><code>boolean</code><td><code>intel_idle</code>驱动中的<code>cstate</code>是否已设置<td><code>true</code><tr><td><code>cpu-security.sgx.enabled</code><td><code>boolean</code><td><code>Intel SGX</code>在<code>BIOS</code>中已启用<td><code>true</code><tr><td><code>cpu-security.se.enabled</code><td><code>boolean</code><td><code>IBM Secure Execution for Linux</code>可用并已启用<td><code>true</code><tr><td><code>cpu-security.tdx.enabled</code><td><code>boolean</code><td><code>Intel TDX</code>在主机上可用并已启用<td><code>true</code><tr><td><code>cpu-security.tdx.protected</code><td><code>boolean</code><td><code>Intel TDX</code>用于启动客户节点<td><code>true</code><tr><td><code>cpu-security.sev.enabled</code><td><code>boolean</code><td><code>AMD SEV</code>在主机上可用并已启用<td><code>true</code><tr><td><code>cpu-security.sev.es.enabled</code><td><code>boolean</code><td><code>AMD SEV-ES</code>在主机上可用并已启用<td><code>true</code><tr><td><code>cpu-security.sev.snp.enabled</code><td><code>boolean</code><td><code>AMD SEV-SNP</code>在主机上可用并已启用<td><code>true</code><tr><td><code>cpu-model.vendor_id</code><td><code>string</code><td><code>CPU</code>厂商<code>ID</code><td><code>GenuineIntel</code><tr><td><code>cpu-model.family</code><td><code>integer</code><td><code>CPU</code>系列<td><code>6</code><tr><td><code>cpu-model.id</code><td><code>integer</code><td><code>CPU</code>型号编号<td><code>85</code></table>
<p><strong>常见的x86 CPUID标志示例：</strong></p>
<table><thead><tr><th>标志<th>描述<tbody><tr><td><code>AVX</code><td>高级向量扩展<tr><td><code>AVX2</code><td>高级向量扩展2<tr><td><code>AVX512F</code><td><code>AVX-512</code>基础指令集<tr><td><code>AMXBF16</code><td>高级矩阵扩展，<code>BFLOAT16</code>数字的瓦片乘法操作<tr><td><code>AMXINT8</code><td>高级矩阵扩展，8位整数的瓦片乘法操作</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=162-内核标签>1.6.2 内核标签<a href=#162-内核标签 class=hash-link aria-label="Direct link to 1.6.2 内核标签" title="Direct link to 1.6.2 内核标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>kernel-config.&lt;option></code><td><code>boolean</code><td>内核配置选项已启用<td><code>true</code><tr><td><code>kernel-selinux.enabled</code><td><code>boolean</code><td><code>Selinux</code>在节点上已启用<td><code>true</code><tr><td><code>kernel-version.full</code><td><code>string</code><td>完整内核版本<td><code>5.15.0-76-generic</code><tr><td><code>kernel-version.major</code><td><code>string</code><td>内核版本主要组件<td><code>5</code><tr><td><code>kernel-version.minor</code><td><code>string</code><td>内核版本次要组件<td><code>15</code><tr><td><code>kernel-version.revision</code><td><code>string</code><td>内核版本修订组件<td><code>0</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=163-内存标签>1.6.3 内存标签<a href=#163-内存标签 class=hash-link aria-label="Direct link to 1.6.3 内存标签" title="Direct link to 1.6.3 内存标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>memory-numa</code><td><code>boolean</code><td>检测到多个内存节点(<code>NUMA</code>架构)<td><code>true</code><tr><td><code>memory-nv.present</code><td><code>boolean</code><td>存在<code>NVDIMM</code>设备<td><code>true</code><tr><td><code>memory-nv.dax</code><td><code>boolean</code><td>存在配置为<code>DAX</code>模式的<code>NVDIMM</code>区域<td><code>true</code><tr><td><code>memory-swap.enabled</code><td><code>boolean</code><td>节点上已启用交换空间<td><code>true</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=164-网络标签>1.6.4 网络标签<a href=#164-网络标签 class=hash-link aria-label="Direct link to 1.6.4 网络标签" title="Direct link to 1.6.4 网络标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>network-sriov.capable</code><td><code>boolean</code><td>存在支持<code>SR-IOV</code>的网络接口卡<td><code>true</code><tr><td><code>network-sriov.configured</code><td><code>boolean</code><td>已配置<code>SR-IOV</code>虚拟功能<td><code>true</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=165-pci设备标签>1.6.5 PCI设备标签<a href=#165-pci设备标签 class=hash-link aria-label="Direct link to 1.6.5 PCI设备标签" title="Direct link to 1.6.5 PCI设备标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>pci-&lt;device label>.present</code><td><code>boolean</code><td>检测到<code>PCI</code>设备<td><code>true</code><tr><td><code>pci-&lt;device label>.sriov.capable</code><td><code>boolean</code><td>存在支持<code>SR-IOV</code>的<code>PCI</code>设备<td><code>true</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=166-usb设备标签>1.6.6 USB设备标签<a href=#166-usb设备标签 class=hash-link aria-label="Direct link to 1.6.6 USB设备标签" title="Direct link to 1.6.6 USB设备标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>usb-&lt;device label>.present</code><td><code>boolean</code><td>检测到<code>USB</code>设备<td><code>true</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=167-存储标签>1.6.7 存储标签<a href=#167-存储标签 class=hash-link aria-label="Direct link to 1.6.7 存储标签" title="Direct link to 1.6.7 存储标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>storage-nonrotationaldisk</code><td><code>boolean</code><td>节点中存在非旋转磁盘(如<code>SSD</code>)<td><code>true</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=168-系统标签>1.6.8 系统标签<a href=#168-系统标签 class=hash-link aria-label="Direct link to 1.6.8 系统标签" title="Direct link to 1.6.8 系统标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>system-os_release.ID</code><td><code>string</code><td>操作系统标识符<td><code>ubuntu</code><tr><td><code>system-os_release.VERSION_ID</code><td><code>string</code><td>操作系统版本标识符<td><code>22.04</code><tr><td><code>system-os_release.VERSION_ID.major</code><td><code>string</code><td>操作系统版本ID的第一个组件<td><code>22</code><tr><td><code>system-os_release.VERSION_ID.minor</code><td><code>string</code><td>操作系统版本ID的第二个组件<td><code>04</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=169-自定义标签>1.6.9 自定义标签<a href=#169-自定义标签 class=hash-link aria-label="Direct link to 1.6.9 自定义标签" title="Direct link to 1.6.9 自定义标签">​</a></h4>
<table><thead><tr><th>标签名称<th>类型<th>描述<th>示例值<tbody><tr><td><code>custom-rdma.capable</code><td><code>boolean</code><td>节点具有支持<code>RDMA</code>的网络适配器<td><code>true</code><tr><td><code>custom-rdma.enabled</code><td><code>boolean</code><td>节点已加载运行<code>RDMA</code>流量所需的模块<td><code>true</code></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=17-标签示例>1.7 标签示例<a href=#17-标签示例 class=hash-link aria-label="Direct link to 1.7 标签示例" title="Direct link to 1.7 标签示例">​</a></h3>
<p><code>NFD</code>生成的标签示例：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">feature.node.kubernetes.io/cpu-hardware_multithreading</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/cpu-pstate.turbo</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/kernel-version.full</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"5.4.0-90-generic"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/memory-numa</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/network-sriov.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/pci-10de.present</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic># NVIDIA GPU存在</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">feature.node.kubernetes.io/system-os_release.id</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"ubuntu"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>在上面的示例中，<code>pci-10de.present: "true"</code> 表示检测到<code>NVIDIA GPU</code>存在。这里的<code>10de</code>是<code>NVIDIA</code>公司在<code>PCI</code>设备中的供应商ID（<code>Vendor ID</code>）。</p>
<p>每个<code>PCI</code>设备都有一个由两部分组成的标识符：</p>
<ol>
<li>供应商ID（<code>Vendor ID</code>）：标识设备制造商</li>
<li>设备ID（<code>Device ID</code>）：标识特定型号的设备</li>
</ol>
<p><code>10de</code>是<code>NVIDIA</code>公司在<code>PCI-SIG</code>（PCI特别兴趣小组）注册的官方供应商ID，所有<code>NVIDIA</code>的<code>GPU</code>设备在<code>PCI</code>总线上都会使用这个供应商ID。当<code>NFD</code>检测到<code>PCI</code>总线上有供应商ID为<code>10de</code>的设备时，就会生成这个标签，表示系统中存在<code>NVIDIA</code>的<code>GPU</code>设备。</p>
<p><code>NFD</code>默认使用 <code>&lt;class>_&lt;vendor></code> 的格式来标记<code>PCI</code>设备，其中：</p>
<ul>
<li><code>&lt;class></code> 是<code>PCI</code>设备类别</li>
<li><code>&lt;vendor></code> 是供应商ID</li>
</ul>
<p>其他常见的<code>PCI</code>供应商ID包括：</p>
<ul>
<li><code>Intel</code>: <code>8086</code></li>
<li><code>AMD</code>: <code>1022</code></li>
<li><code>Mellanox/NVIDIA</code>网络: <code>15b3</code></li>
</ul>
<p>更多供应商ID请参考网站：<a href=https://admin.pci-ids.ucw.cz/read/PC/ target=_blank rel="noopener noreferrer">https://admin.pci-ids.ucw.cz/read/PC/</a></p>
<p>这种基于供应商ID的标签方式使<code>Kubernetes</code>能够精确识别节点上的硬件设备，从而实现更精细的工作负载调度。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=18-监控指标>1.8 监控指标<a href=#18-监控指标 class=hash-link aria-label="Direct link to 1.8 监控指标" title="Direct link to 1.8 监控指标">​</a></h3>
<p><code>NFD</code>提供了丰富的<code>Prometheus</code>监控指标，可用于监控和跟踪其各个组件的运行状态。
这些指标通过标准的<code>Prometheus接</code>口暴露，默认情况下在端口<code>8080</code>上的<code>/metrics</code>路径提供。每个<code>NFD</code>组件都有自己的一组监控指标。</p>
<p>参考链接：<a href=https://kubernetes-sigs.github.io/node-feature-discovery/v0.17/deployment/metrics.html target=_blank rel="noopener noreferrer">https://kubernetes-sigs.github.io/node-feature-discovery/v0.17/deployment/metrics.html</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=181-nfd-master监控指标>1.8.1 NFD-Master监控指标<a href=#181-nfd-master监控指标 class=hash-link aria-label="Direct link to 1.8.1 NFD-Master监控指标" title="Direct link to 1.8.1 NFD-Master监控指标">​</a></h4>
<p><code>NFD-Master</code>组件暴露以下监控指标，所有指标都使用<code>nfd_master</code>前缀：</p>
<table><thead><tr><th>指标名称<th>类型<th>描述<tbody><tr><td><code>nfd_master_build_info</code><td><code>Gauge</code><td><code>NFD-Master</code>的构建版本信息<tr><td><code>nfd_master_node_update_requests_total</code><td><code>Counter</code><td><code>Master</code>处理的节点更新请求总数<tr><td><code>nfd_master_node_feature_group_update_requests_total</code><td><code>Counter</code><td><code>Master</code>处理的集群特性更新请求总数<tr><td><code>nfd_master_node_updates_total</code><td><code>Counter</code><td><code>Master</code>成功更新的节点总数<tr><td><code>nfd_master_node_update_failures_total</code><td><code>Counter</code><td>节点更新失败的次数<tr><td><code>nfd_master_node_labels_rejected_total</code><td><code>Counter</code><td>被<code>NFD-Master</code>拒绝的节点标签数量<tr><td><code>nfd_master_node_extendedresources_rejected_total</code><td><code>Counter</code><td>被<code>NFD-Master</code>拒绝的节点扩展资源数量<tr><td><code>nfd_master_node_taints_rejected_total</code><td><code>Counter</code><td>被<code>NFD-Master</code>拒绝的节点污点数量<tr><td><code>nfd_master_nodefeaturerule_processing_duration_seconds</code><td><code>Histogram</code><td>处理<code>NodeFeatureRule</code>对象所需的时间<tr><td><code>nfd_master_nodefeaturerule_processing_errors_total</code><td><code>Counter</code><td><code>NodeFeatureRule</code>处理错误的数量</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=182-nfd-worker监控指标>1.8.2 NFD-Worker监控指标<a href=#182-nfd-worker监控指标 class=hash-link aria-label="Direct link to 1.8.2 NFD-Worker监控指标" title="Direct link to 1.8.2 NFD-Worker监控指标">​</a></h4>
<p><code>NFD-Worker</code>组件暴露以下监控指标，所有指标都使用<code>nfd_worker</code>前缀：</p>
<table><thead><tr><th>指标名称<th>类型<th>描述<tbody><tr><td><code>nfd_worker_build_info</code><td><code>Gauge</code><td><code>NFD-Worker</code>的构建版本信息<tr><td><code>nfd_worker_feature_discovery_duration_seconds</code><td><code>Histogram</code><td>发现特性所需的时间</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=183-nfd-topology-updater监控指标>1.8.3 NFD-Topology-Updater监控指标<a href=#183-nfd-topology-updater监控指标 class=hash-link aria-label="Direct link to 1.8.3 NFD-Topology-Updater监控指标" title="Direct link to 1.8.3 NFD-Topology-Updater监控指标">​</a></h4>
<p><code>NFD-Topology-Updater</code>组件暴露以下监控指标，所有指标都使用<code>nfd_topology_updater</code>前缀：</p>
<table><thead><tr><th>指标名称<th>类型<th>描述<tbody><tr><td><code>nfd_topology_updater_build_info</code><td><code>Gauge</code><td><code>NFD-Topology-Updater</code>的构建版本信息<tr><td><code>nfd_topology_updater_scan_errors_total</code><td><code>Counter</code><td>扫描<code>Pod</code>资源分配时的错误数量</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=184-nfd-gc监控指标>1.8.4 NFD-GC监控指标<a href=#184-nfd-gc监控指标 class=hash-link aria-label="Direct link to 1.8.4 NFD-GC监控指标" title="Direct link to 1.8.4 NFD-GC监控指标">​</a></h4>
<p><code>NFD-GC</code>(垃圾回收)组件暴露以下监控指标，所有指标都使用<code>nfd_gc</code>前缀：</p>
<table><thead><tr><th>指标名称<th>类型<th>描述<tbody><tr><td><code>nfd_gc_build_info</code><td><code>Gauge</code><td><code>NFD-GC</code>的构建版本信息<tr><td><code>nfd_gc_objects_deleted_total</code><td><code>Counter</code><td>垃圾回收的<code>NodeFeature</code>和<code>NodeResourceTopology</code>对象数量<tr><td><code>nfd_gc_object_delete_failures_total</code><td><code>Counter</code><td>删除<code>NodeFeature</code>和<code>NodeResourceTopology</code>对象时的错误数量</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=185-监控指标的使用>1.8.5 监控指标的使用<a href=#185-监控指标的使用 class=hash-link aria-label="Direct link to 1.8.5 监控指标的使用" title="Direct link to 1.8.5 监控指标的使用">​</a></h4>
<p>这些监控指标可以集成到<code>Prometheus</code>监控系统中，并通过<code>Grafana</code>等工具进行可视化展示。以下是一个简单的<code>Prometheus</code>配置示例：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">scrape_configs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">job_name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'nfd'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">kubernetes_sd_configs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">role</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pod</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">relabel_configs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">source_labels</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">__meta_kubernetes_pod_label_app_kubernetes_io_name</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> keep</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">regex</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> node</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">feature</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">discovery</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">source_labels</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">__address__</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> replace</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">regex</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> (</span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">^</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">+)(</span><span class="token punctuation" style=color:#f8f8f2>?</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">\d+)</span><span class="token punctuation" style=color:#f8f8f2>?</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replacement</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> $</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token number" style=color:#ae81ff>8080</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">target_label</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> __address__</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">source_labels</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">__meta_kubernetes_pod_name</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> replace</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">target_label</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pod</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-gpu-feature-discovery-gfd>2. GPU Feature Discovery (GFD)<a href=#2-gpu-feature-discovery-gfd class=hash-link aria-label="Direct link to 2. GPU Feature Discovery (GFD)" title="Direct link to 2. GPU Feature Discovery (GFD)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=21-基本介绍>2.1 基本介绍<a href=#21-基本介绍 class=hash-link aria-label="Direct link to 2.1 基本介绍" title="Direct link to 2.1 基本介绍">​</a></h3>
<p><code>GPU Feature Discovery</code> (<code>GFD</code>)是<code>NVIDIA</code>开发的一个<code>Kubernetes</code>插件，专门用于自动发现和标记<code>NVIDIA GPU</code>的特性和能力。它是<code>NFD</code>的一个扩展，专注于提供更详细的<code>GPU</code>相关信息。<code>GFD</code>是<code>NVIDIA GPU Operator</code>的一个核心组件，但也可以独立部署和使用。</p>
<ul>
<li>开源仓库：<a href=https://github.com/NVIDIA/k8s-device-plugin target=_blank rel="noopener noreferrer">https://github.com/NVIDIA/k8s-device-plugin</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=22-背景与作用>2.2 背景与作用<a href=#22-背景与作用 class=hash-link aria-label="Direct link to 2.2 背景与作用" title="Direct link to 2.2 背景与作用">​</a></h3>
<p>随着人工智能和高性能计算工作负载在<code>Kubernetes</code>集群中的大规模部署，对<code>GPU</code>资源的精细化管理需求变得越来越迫切。不同型号和不同代的<code>GPU</code>具有各自的特点：</p>
<ul>
<li>不同的计算能力（<code>Compute Capability</code>）</li>
<li>不同的内存大小和带宽</li>
<li>不同的架构特性（如<code>Tensor Core</code>、<code>RT Core</code>等）</li>
<li>不同的驱动和<code>CUDA</code>支持</li>
<li>不同的<code>MIG</code>（<code>Multi-Instance GPU</code>）配置能力</li>
</ul>
<p>这些差异对于工作负载的性能和兼容性有显著影响。例如，某些深度学习模型可能需要特定的<code>CUDA</code>计算能力才能高效运行，或者需要足够的<code>GPU</code>内存来容纳大型模型。</p>
<p><code>GFD</code>的主要作用包括：</p>
<ol>
<li><strong>自动发现GPU特性</strong>：自动检测节点上的<code>NVIDIA GPU</code>特性，无需手动配置</li>
<li><strong>提供详细的GPU元数据</strong>：提供比<code>NFD</code>更详细的<code>GPU</code>信息，包括型号、架构、内存大小、计算能力等</li>
<li><strong>支持精确的GPU调度</strong>：使调度器能够根据应用的特定需求选择最合适的<code>GPU</code></li>
<li><strong>优化资源利用率</strong>：通过精确匹配工作负载和<code>GPU</code>特性，提高集群资源利用率</li>
<li><strong>支持MIG技术</strong>：对<code>NVIDIA Multi-Instance GPU</code> (<code>MIG</code>)技术提供特殊支持，实现<code>GPU</code>资源的细粒度划分</li>
<li><strong>与NFD无缝集成</strong>：与<code>NFD</code>完美配合，扩展其<code>GPU</code>特性发现能力</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=23-实现原理>2.3 实现原理<a href=#23-实现原理 class=hash-link aria-label="Direct link to 2.3 实现原理" title="Direct link to 2.3 实现原理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=231-架构概述>2.3.1 架构概述<a href=#231-架构概述 class=hash-link aria-label="Direct link to 2.3.1 架构概述" title="Direct link to 2.3.1 架构概述">​</a></h4>
<p><code>GFD</code>作为<code>NFD</code>的插件运行，通过<code>NFD</code>的本地特性文件机制与<code>NFD</code>集成。它的架构设计专注于<code>GPU</code>特性的发现和标记。
<code>GFD</code>通常作为<code>DaemonSet</code>部署在集群中，只在具有<code>NVIDIA GPU</code>的节点上运行。它可以作为<code>NVIDIA GPU Operator</code>的一个组件部署，也可以独立部署。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=232-工作流程>2.3.2 工作流程<a href=#232-工作流程 class=hash-link aria-label="Direct link to 2.3.2 工作流程" title="Direct link to 2.3.2 工作流程">​</a></h4>
<p><code>GFD</code>的工作流程如下：</p>
<ol>
<li><strong>初始化</strong>：<code>GFD</code>容器启动并初始化<code>NVML</code>（<code>NVIDIA Management Library</code>）</li>
<li><strong>检测GPU设备</strong>：使用<code>NVML</code>检测节点上的所有<code>NVIDIA GPU</code>设备</li>
<li><strong>收集GPU信息</strong>：对每个检测到的<code>GPU</code>，收集详细信息：<!-- -->
<ul>
<li>产品名称和型号</li>
<li>架构和计算能力</li>
<li>内存大小和带宽</li>
<li>驱动版本和<code>CUDA</code>版本</li>
<li><code>MIG</code>配置和能力（如果支持）</li>
</ul>
</li>
<li><strong>生成标签</strong>：将收集到的信息转换为<code>Kubernetes</code>标签格式，使用<code>nvidia.com/</code>前缀</li>
<li><strong>写入特性文件</strong>：将标签写入<code>NFD</code>指定的本地特性文件目录（通常为<code>/etc/kubernetes/node-feature-discovery/features.d/</code>）</li>
<li><strong>与NFD集成</strong>：<code>NFD-Worker</code>读取这些特性文件，并将信息发送给<code>NFD-Master</code></li>
<li><strong>标记节点</strong>：<code>NFD-Master</code>将这些标签应用到节点对象上</li>
<li><strong>周期性更新</strong>：<code>GFD</code>会定期重新检测<code>GPU</code>信息，以响应可能的硬件变化（如<code>MIG</code>配置更改）</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=233-与nfd的集成>2.3.3 与NFD的集成<a href=#233-与nfd的集成 class=hash-link aria-label="Direct link to 2.3.3 与NFD的集成" title="Direct link to 2.3.3 与NFD的集成">​</a></h4>
<p><code>GFD</code>与<code>NFD</code>的集成是通过<code>NFD</code>的本地特性文件机制实现的：</p>
<ol>
<li><code>GFD</code>将发现的<code>GPU</code>特性写入一个<code>JSON</code>格式的特性文件</li>
<li>该文件位于<code>NFD</code>指定的特性文件目录中</li>
<li><code>NFD-Worker</code>会自动扫描该目录并读取特性文件</li>
<li>特性信息被发送到<code>NFD-Master</code>并应用到节点上</li>
</ol>
<p>这种集成方式使<code>GFD</code>能够专注于<code>GPU</code>特性的发现，而将标签管理的职责留给<code>NFD</code>，形成了清晰的职责分离。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=24-gfd支持的标签>2.4 GFD支持的标签<a href=#24-gfd支持的标签 class=hash-link aria-label="Direct link to 2.4 GFD支持的标签" title="Direct link to 2.4 GFD支持的标签">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=241-标签命名规则>2.4.1 标签命名规则<a href=#241-标签命名规则 class=hash-link aria-label="Direct link to 2.4.1 标签命名规则" title="Direct link to 2.4.1 标签命名规则">​</a></h4>
<p><code>GFD</code>生成的所有标签都使用<code>nvidia.com/</code>前缀，这与<code>NFD</code>使用的<code>feature.node.kubernetes.io/</code>前缀不同。这种命名方式可以清晰地区分不同来源的标签，并确保标签的唯一性。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=2411-基础标签>2.4.1.1 基础标签<a href=#2411-基础标签 class=hash-link aria-label="Direct link to 2.4.1.1 基础标签" title="Direct link to 2.4.1.1 基础标签">​</a></h5>
<table><thead><tr><th>标签<th>类型<th>说明<th>示例值<tbody><tr><td><code>nvidia.com/gpu.count</code><td><code>string</code><td>节点上的<code>GPU</code>数量<td><code>8</code><tr><td><code>nvidia.com/gpu.product</code><td><code>string</code><td><code>GPU</code>型号的完整名称<td><code>NVIDIA-A100-SXM4-40GB</code><tr><td><code>nvidia.com/gpu.memory</code><td><code>string</code><td><code>GPU</code>内存大小（<code>MiB</code>，单卡）<td><code>40960</code><tr><td><code>nvidia.com/gpu.family</code><td><code>string</code><td><code>GPU</code>架构系列<td><code>ampere</code><tr><td><code>nvidia.com/gpu.compute.major</code><td><code>string</code><td><code>GPU</code>计算能力主版本<td><code>8</code><tr><td><code>nvidia.com/gpu.compute.minor</code><td><code>string</code><td><code>GPU</code>计算能力次版本<td><code>0</code><tr><td><code>nvidia.com/gpu.machine</code><td><code>string</code><td>节点机器型号<td><code>NVIDIA-DGX-A100</code><tr><td><code>nvidia.com/gpu.replicas</code><td><code>string</code><td><code>GPU</code>副本数量（用于时间切片时会大于1）<td><code>1</code><tr><td><code>nvidia.com/gpu.sharing-strategy</code><td><code>string</code><td><code>GPU</code>共享策略类型<td><code>none</code>、<code>mps</code>或<code>time-slicing</code><tr><td><code>nvidia.com/gpu.mode</code><td><code>string</code><td><code>GPU</code>工作模式<td><code>compute</code>或<code>graphics</code></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=2412-cuda相关标签>2.4.1.2 CUDA相关标签<a href=#2412-cuda相关标签 class=hash-link aria-label="Direct link to 2.4.1.2 CUDA相关标签" title="Direct link to 2.4.1.2 CUDA相关标签">​</a></h5>
<table><thead><tr><th>标签<th>类型<th>说明<th>示例值<tbody><tr><td><code>nvidia.com/cuda.driver.major</code><td><code>string</code><td><code>CUDA</code>驱动主版本<td><code>550</code><tr><td><code>nvidia.com/cuda.driver.minor</code><td><code>string</code><td><code>CUDA</code>驱动次版本<td><code>107</code><tr><td><code>nvidia.com/cuda.driver.rev</code><td><code>string</code><td><code>CUDA</code>驱动修订版本<td><code>02</code><tr><td><code>nvidia.com/cuda.runtime.major</code><td><code>string</code><td><code>CUDA</code>运行时主版本<td><code>12</code><tr><td><code>nvidia.com/cuda.runtime.minor</code><td><code>string</code><td><code>CUDA</code>运行时次版本<td><code>5</code></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=2413-特性支持标签>2.4.1.3 特性支持标签<a href=#2413-特性支持标签 class=hash-link aria-label="Direct link to 2.4.1.3 特性支持标签" title="Direct link to 2.4.1.3 特性支持标签">​</a></h5>
<table><thead><tr><th>标签<th>类型<th>说明<th>示例值<tbody><tr><td><code>nvidia.com/mig.capable</code><td><code>string</code><td>是否支持<code>MIG</code>（多实例 <code>GPU</code>）功能<td><code>true</code><tr><td><code>nvidia.com/mps.capable</code><td><code>string</code><td>是否支持<code>MPS</code>（多进程服务）功能<td><code>true</code><tr><td><code>nvidia.com/vgpu.present</code><td><code>string</code><td>是否存在<code>vGPU</code><td><code>true</code><tr><td><code>nvidia.com/vgpu.host-driver-version</code><td><code>string</code><td><code>vGPU</code>主机驱动版本<td><code>525.85.07</code><tr><td><code>nvidia.com/vgpu.host-driver-branch</code><td><code>string</code><td><code>vGPU</code>主机驱动分支<td><code>r525</code><tr><td><code>nvidia.com/gfd.timestamp</code><td><code>string</code><td><code>GPU</code>特征发现的时间戳<td><code>1736224460</code></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=2414-mig相关标签当启用mig功能时>2.4.1.4 MIG相关标签（当启用<code>MIG</code>功能时）<a href=#2414-mig相关标签当启用mig功能时 class=hash-link aria-label="Direct link to 2414-mig相关标签当启用mig功能时" title="Direct link to 2414-mig相关标签当启用mig功能时">​</a></h5>
<table><thead><tr><th>标签<th>类型<th>说明<th>示例值<tbody><tr><td><code>nvidia.com/mig.strategy</code><td><code>string</code><td>使用的<code>MIG</code>策略（<code>none</code>、<code>single</code>或<code>mixed</code>）<td><code>single</code><tr><td><code>nvidia.com/mig.config</code><td><code>string</code><td><code>MIG</code>设备的配置标识符<td><code>1g.5gb</code><tr><td><code>nvidia.com/gpu.multiprocessors</code><td><code>string</code><td><code>MIG</code>设备的流处理器数量<td><code>14</code><tr><td><code>nvidia.com/gpu.slices.gi</code><td><code>string</code><td><code>GPU</code>实例切片数量<td><code>1</code><tr><td><code>nvidia.com/gpu.slices.ci</code><td><code>string</code><td>计算实例切片数量<td><code>1</code><tr><td><code>nvidia.com/gpu.engines.copy</code><td><code>string</code><td><code>MIG</code>设备的<code>DMA</code>引擎数量<td><code>1</code><tr><td><code>nvidia.com/gpu.engines.decoder</code><td><code>string</code><td><code>MIG</code>设备的解码器数量<td><code>1</code><tr><td><code>nvidia.com/gpu.engines.encoder</code><td><code>string</code><td><code>MIG</code>设备的编码器数量<td><code>1</code><tr><td><code>nvidia.com/gpu.engines.jpeg</code><td><code>string</code><td><code>MIG</code>设备的<code>JPEG</code>引擎数量<td><code>0</code><tr><td><code>nvidia.com/gpu.engines.ofa</code><td><code>string</code><td><code>MIG</code>设备的<code>OFA</code>引擎数量<td><code>0</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=245-标签的使用场景>2.4.5 标签的使用场景<a href=#245-标签的使用场景 class=hash-link aria-label="Direct link to 2.4.5 标签的使用场景" title="Direct link to 2.4.5 标签的使用场景">​</a></h4>
<p>这些标签可以在多种场景中使用：</p>
<ol>
<li>
<p><strong>精确调度</strong>：根据工作负载的特定需求选择合适的<code>GPU</code></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/gpu.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"ampere"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/gpu.memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"40960"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>资源限制</strong>：限制工作负载只能运行在特定类型的<code>GPU</code>上</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/gpu.compute.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>MIG配置选择</strong>：选择具有特定 <code>MIG</code> 配置的节点</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/mig.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/gpu.slices.gi.3</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p><strong>多媒体处理</strong>：选择具有特定多媒体处理能力的<code>GPU</code></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nvidia.com/gpu.engines.decoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=25-标签示例>2.5 标签示例<a href=#25-标签示例 class=hash-link aria-label="Direct link to 2.5 标签示例" title="Direct link to 2.5 标签示例">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=251-不同型号gpu的标签示例>2.5.1 不同型号GPU的标签示例<a href=#251-不同型号gpu的标签示例 class=hash-link aria-label="Direct link to 2.5.1 不同型号GPU的标签示例" title="Direct link to 2.5.1 不同型号GPU的标签示例">​</a></h4>
<p>以下展示了不同型号<code>GPU</code>的<code>GFD</code>标签示例，这些标签反映了各自的硬件特性和能力。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=tesla-v100-gpu标签示例>Tesla V100 GPU标签示例<a href=#tesla-v100-gpu标签示例 class=hash-link aria-label="Direct link to Tesla V100 GPU标签示例" title="Direct link to Tesla V100 GPU标签示例">​</a></h5>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nvidia.com/gpu.count</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.product</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Tesla-V100-SXM2-16GB"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"16384"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"volta"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"7"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"0"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"460"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"32"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.rev</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"03"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"11"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.machine</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"DGX-1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.sharing-strategy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"none"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.mode</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"compute"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mps.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=a100-gpu标签示例启用mig>A100 GPU标签示例（启用MIG）<a href=#a100-gpu标签示例启用mig class=hash-link aria-label="Direct link to A100 GPU标签示例（启用MIG）" title="Direct link to A100 GPU标签示例（启用MIG）">​</a></h5>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nvidia.com/gpu.count</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"1"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.product</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"NVIDIA-A100-SXM4-40GB"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"40960"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"ampere"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"0"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"535"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"104"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.rev</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"05"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"12"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.machine</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"HGX"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.sharing-strategy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"none"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.mode</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"compute"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mig.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mps.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"false"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mig.strategy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"single"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.slices.gi</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"7"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.slices.ci</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"7"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.multiprocessors</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"108"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.copy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"4"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.decoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"5"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.encoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"1"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=h100-gpu标签示例>H100 GPU标签示例<a href=#h100-gpu标签示例 class=hash-link aria-label="Direct link to H100 GPU标签示例" title="Direct link to H100 GPU标签示例">​</a></h5>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">nvidia.com/gpu.count</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.product</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"NVIDIA-H100-SXM5-80GB"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"81920"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"hopper"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"9"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.compute.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"0"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"535"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"129"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.driver.rev</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"03"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.major</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"12"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/cuda.runtime.minor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.machine</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"HGX-H100"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.sharing-strategy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"none"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.mode</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"compute"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mig.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/mps.capable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"true"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.multiprocessors</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"132"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.copy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.decoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.encoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"3"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.jpeg</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"2"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">nvidia.com/gpu.engines.ofa</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"1"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=252-如何查看节点标签>2.5.2 如何查看节点标签<a href=#252-如何查看节点标签 class=hash-link aria-label="Direct link to 2.5.2 如何查看节点标签" title="Direct link to 2.5.2 如何查看节点标签">​</a></h4>
<p>可以使用以下命令查看节点上的<code>GFD</code>生成的标签：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># 查看所有节点的GPU相关标签</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">kubectl get nodes </span><span class="token parameter variable" style=color:#f8f8f2>-o</span><span class="token plain"> json </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"> jq </span><span class="token string" style=color:#a6e22e>'.items[] | {name: .metadata.name, labels: .metadata.labels | with_entries(select(.key | startswith("nvidia.com")))}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 查看特定节点的GPU相关标签</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">kubectl get </span><span class="token function" style=color:#e6db74>node</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>&lt;</span><span class="token plain">node-name</span><span class="token operator" style=color:#66d9ef>></span><span class="token plain"> </span><span class="token parameter variable" style=color:#f8f8f2>-o</span><span class="token plain"> json </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"> jq </span><span class="token string" style=color:#a6e22e>'.metadata.labels | with_entries(select(.key | startswith("nvidia.com")))'</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=253-标签的实际应用>2.5.3 标签的实际应用<a href=#253-标签的实际应用 class=hash-link aria-label="Direct link to 2.5.3 标签的实际应用" title="Direct link to 2.5.3 标签的实际应用">​</a></h4>
<p>使用这些标签可以实现精确的工作负载调度，例如：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># 深度学习训练任务，需要A100或H100 GPU</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Pod</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> dl</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">training</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> training</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> tensorflow/tensorflow</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">latest</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">nvidia.com/gpu.family</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"ampere"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">nvidia.com/gpu.memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"81920"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># 视频编码任务，需要多个编码器引擎</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Pod</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> video</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">encoder</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> encoder</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> nvidia/cuda</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">12.2.0</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">runtime</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">ubuntu22.04</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">nvidia.com/gpu.engines.encoder</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"3"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-nfd与gfd的协同工作>3. NFD与GFD的协同工作<a href=#3-nfd与gfd的协同工作 class=hash-link aria-label="Direct link to 3. NFD与GFD的协同工作" title="Direct link to 3. NFD与GFD的协同工作">​</a></h2>
<p><code>NFD</code>和<code>GFD</code>协同工作，为<code>Kubernetes</code>提供全面的节点特性信息，特别是在<code>GPU</code>资源管理方面：</p>
<ol>
<li><strong>分层特性发现</strong>：NFD提供基础的节点特性发现，包括检测<code>GPU</code>的存在；<code>GFD</code>在此基础上提供更详细的<code>GPU</code>特性信息</li>
<li><strong>标签命名空间分离</strong>：<code>NFD</code>使用<code>feature.node.kubernetes.io/</code>前缀，而<code>GFD</code>使用<code>nvidia.com/</code>前缀，避免冲突</li>
<li><strong>部署协同</strong>：两者通常一起部署，特别是在<code>NVIDIA GPU Operator</code>中，它会自动部署和配置这两个组件</li>
<li><strong>调度协同</strong>：调度器可以同时使用<code>NFD</code>和<code>GFD</code>提供的标签来做出更精确的调度决策</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=4-参考资料>4. 参考资料<a href=#4-参考资料 class=hash-link aria-label="Direct link to 4. 参考资料" title="Direct link to 4. 参考资料">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=41-nfd相关资料>4.1 NFD相关资料<a href=#41-nfd相关资料 class=hash-link aria-label="Direct link to 4.1 NFD相关资料" title="Direct link to 4.1 NFD相关资料">​</a></h3>
<ul>
<li><a href=https://nfd.sigs.k8s.io/ target=_blank rel="noopener noreferrer">Node Feature Discovery 官方文档</a></li>
<li><a href=https://github.com/kubernetes-sigs/node-feature-discovery target=_blank rel="noopener noreferrer">Node Feature Discovery GitHub 仓库</a></li>
<li><a href=https://kubernetes-sigs.github.io/node-feature-discovery/stable/get-started/deployment-and-usage.html target=_blank rel="noopener noreferrer">NFD 安装指南</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=42-nvidia相关资料>4.2 NVIDIA相关资料<a href=#42-nvidia相关资料 class=hash-link aria-label="Direct link to 4.2 NVIDIA相关资料" title="Direct link to 4.2 NVIDIA相关资料">​</a></h3>
<ul>
<li><a href=https://github.com/NVIDIA/gpu-feature-discovery target=_blank rel="noopener noreferrer">GPU Feature Discovery GitHub 仓库</a></li>
<li><a href=https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/latest/ target=_blank rel="noopener noreferrer">NVIDIA GPU Operator 文档</a></li>
<li><a href=https://github.com/NVIDIA/k8s-device-plugin target=_blank rel="noopener noreferrer">NVIDIA Device Plugin GitHub 仓库</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=43-kubernetes官方资料>4.3 Kubernetes官方资料<a href=#43-kubernetes官方资料 class=hash-link aria-label="Direct link to 4.3 Kubernetes官方资料" title="Direct link to 4.3 Kubernetes官方资料">​</a></h3>
<ul>
<li><a href=https://kubernetes.io/docs/tasks/manage-gpus/scheduling-gpus/ target=_blank rel="noopener noreferrer">Kubernetes 官方文档 - 调度 GPU</a></li>
<li><a href=https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/ target=_blank rel="noopener noreferrer">Kubernetes Device Plugin 机制</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/ai/hybrid-scheduling-affinity-toleration><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>混合调度的亲和性、污点容忍设计思考</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/ai/common-acceleration-cards><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>常见智算加速卡汇总</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class=tocContainer_PXzm><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-node-feature-discovery-nfd class="table-of-contents__link toc-highlight">1. Node Feature Discovery (NFD)</a><ul><li><a href=#11-基本介绍 class="table-of-contents__link toc-highlight">1.1 基本介绍</a><li><a href=#12-背景与作用 class="table-of-contents__link toc-highlight">1.2 背景与作用</a><li><a href=#13-业务场景示例 class="table-of-contents__link toc-highlight">1.3 业务场景示例</a><li><a href=#14-实现原理 class="table-of-contents__link toc-highlight">1.4 实现原理</a><li><a href=#15-特性发现机制 class="table-of-contents__link toc-highlight">1.5 特性发现机制</a><li><a href=#16-nfd支持的标签 class="table-of-contents__link toc-highlight">1.6 NFD支持的标签</a><li><a href=#17-标签示例 class="table-of-contents__link toc-highlight">1.7 标签示例</a><li><a href=#18-监控指标 class="table-of-contents__link toc-highlight">1.8 监控指标</a></ul><li><a href=#2-gpu-feature-discovery-gfd class="table-of-contents__link toc-highlight">2. GPU Feature Discovery (GFD)</a><ul><li><a href=#21-基本介绍 class="table-of-contents__link toc-highlight">2.1 基本介绍</a><li><a href=#22-背景与作用 class="table-of-contents__link toc-highlight">2.2 背景与作用</a><li><a href=#23-实现原理 class="table-of-contents__link toc-highlight">2.3 实现原理</a><li><a href=#24-gfd支持的标签 class="table-of-contents__link toc-highlight">2.4 GFD支持的标签</a><li><a href=#25-标签示例 class="table-of-contents__link toc-highlight">2.5 标签示例</a></ul><li><a href=#3-nfd与gfd的协同工作 class="table-of-contents__link toc-highlight">3. NFD与GFD的协同工作</a><li><a href=#4-参考资料 class="table-of-contents__link toc-highlight">4. 参考资料</a><ul><li><a href=#41-nfd相关资料 class="table-of-contents__link toc-highlight">4.1 NFD相关资料</a><li><a href=#42-nvidia相关资料 class="table-of-contents__link toc-highlight">4.2 NVIDIA相关资料</a><li><a href=#43-kubernetes官方资料 class="table-of-contents__link toc-highlight">4.3 Kubernetes官方资料</a></ul></ul></div><div class=tocAdBanner_imxD></div></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2025 johng.cn</div></div></div></footer></div>