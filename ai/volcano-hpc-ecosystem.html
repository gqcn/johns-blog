<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/AI技术/训练微调/开发训练平台/云原生HPC生态组件对比分析（基于Volcano）" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>云原生HPC生态组件对比分析（基于Volcano） | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/ai/volcano-hpc-ecosystem><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=author content="John Guo"><meta data-rh=true property=og:image content=https://johng.cn/img/favicon.png><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="云原生HPC生态组件对比分析（基于Volcano） | John's Blog"><meta data-rh=true name=description content=深入分析Volcano调度器HPC生态组件，涵盖HPC核心概念与关键能力、MPI/PyTorch/TensorFlow/PaddlePaddle/Horovod/Ray/Spark等Operator对比、Gang调度与队列管理集成方案，为云原生HPC平台选型提供参考><meta data-rh=true property=og:description content=深入分析Volcano调度器HPC生态组件，涵盖HPC核心概念与关键能力、MPI/PyTorch/TensorFlow/PaddlePaddle/Horovod/Ray/Spark等Operator对比、Gang调度与队列管理集成方案，为云原生HPC平台选型提供参考><meta data-rh=true name=keywords content="Volcano,HPC,高性能计算,Gang Scheduling,MPI Operator,PyTorch Operator,TensorFlow Operator,Horovod,Ray Operator,Spark Operator,Kubeflow Training Operator,分布式训练,NCCL,AllReduce,InfiniBand,RDMA,批处理调度,Kubernetes,云原生HPC"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/ai/volcano-hpc-ecosystem><link data-rh=true rel=alternate href=https://johng.cn/ai/volcano-hpc-ecosystem hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/ai/volcano-hpc-ecosystem hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="John's Blog RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="John's Blog Atom Feed"><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.2f56d3c4.css><script src=/assets/js/runtime~main.10a73d12.js defer></script><script src=/assets/js/main.61752dcd.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/ai>AI技术</a><a class="navbar__item navbar__link" href=/cloud-native>云原生</a><a class="navbar__item navbar__link" href=/notes>日常笔记</a><a class="navbar__item navbar__link" href=/programming>开发语言</a><a class="navbar__item navbar__link" href=/architecture>技术架构</a><a class="navbar__item navbar__link" href=/observability>可观测性</a><a class="navbar__item navbar__link" href=/life>生活笔记</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/aboutme>关于我</a><a class="navbar__item navbar__link" href=/blog>博客</a><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/ai>AI技术</a><button aria-label="Collapse sidebar category 'AI技术'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/agents>智能体</a><button aria-label="Expand sidebar category '智能体'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/app>应用开发</a><button aria-label="Expand sidebar category '应用开发'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/inference>推理服务</a><button aria-label="Expand sidebar category '推理服务'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/ai/training>训练微调</a><button aria-label="Collapse sidebar category '训练微调'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/ai/training-platform>开发训练平台</a><button aria-label="Collapse sidebar category '开发训练平台'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/ai/hpc-development-training-platform>开发训练平台概述</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/ai/ml-platform-opensource-projects>模型开发训练开源项目对比分析</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/ai/volcano-hpc-ecosystem>云原生HPC生态组件对比分析（基于Volcano）</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/notebook>Notebook</a><button aria-label="Expand sidebar category 'Notebook'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/kubeflow-trainer>Kubeflow Trainer</a><button aria-label="Expand sidebar category 'Kubeflow Trainer'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/ai/training-and-fine-tuning>AI模型训练与微调技术详解</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/ai/training-parallel-strategies>AI模型训练并行策略详解</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/infra>基础架构</a><button aria-label="Expand sidebar category '基础架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/basic>入门知识</a><button aria-label="Expand sidebar category '入门知识'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/observability>可观测性</a><button aria-label="Expand sidebar category '可观测性'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/life>生活笔记</a><button aria-label="Expand sidebar category '生活笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai><span itemprop=name>AI技术</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai/training><span itemprop=name>训练微调</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai/training-platform><span itemprop=name>开发训练平台</span></a><meta itemprop=position content=3><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>云原生HPC生态组件对比分析（基于Volcano）</span><meta itemprop=position content=4></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=概述>概述<a href=#概述 class=hash-link aria-label="Direct link to 概述" title="Direct link to 概述">​</a></h2>
<p><code>Volcano</code>是<code>CNCF</code>云原生批处理调度系统，专为高性能计算（<code>HPC</code>）、机器学习、大数据等批处理工作负载设计。本文档详细梳理<code>Volcano</code>生态中支持<code>HPC</code>的各个组件，并进行对比分析。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=什么是hpc>什么是HPC<a href=#什么是hpc class=hash-link aria-label="Direct link to 什么是HPC" title="Direct link to 什么是HPC">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hpc定义>HPC定义<a href=#hpc定义 class=hash-link aria-label="Direct link to HPC定义" title="Direct link to HPC定义">​</a></h3>
<p><strong>HPC（High Performance Computing，高性能计算）</strong> 是指利用聚合计算能力处理标准工作站无法完成的复杂计算任务的技术。<code>HPC</code>系统通过将大量计算节点互联，协同工作以解决科学、工程和商业领域中的大规模计算问题。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hpc的核心特征>HPC的核心特征<a href=#hpc的核心特征 class=hash-link aria-label="Direct link to HPC的核心特征" title="Direct link to HPC的核心特征">​</a></h3>
<table><thead><tr><th>特征<th>说明<tbody><tr><td><strong>大规模并行</strong><td>将计算任务分解为多个子任务，在多个处理器上同时执行<tr><td><strong>高速互连</strong><td>节点间通过高带宽、低延迟网络（如<code>InfiniBand</code>）通信<tr><td><strong>海量数据处理</strong><td>能够处理<code>TB</code>到<code>PB</code>级别的数据集<tr><td><strong>高吞吐量</strong><td>单位时间内完成大量计算任务<tr><td><strong>可扩展性</strong><td>支持从数十到数万个计算节点的扩展</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hpc典型应用场景>HPC典型应用场景<a href=#hpc典型应用场景 class=hash-link aria-label="Direct link to HPC典型应用场景" title="Direct link to HPC典型应用场景">​</a></h3>
<table><thead><tr><th>领域<th>应用场景<th>计算特点<tbody><tr><td><strong>科学研究</strong><td>气候模拟、分子动力学、天体物理<td>大规模数值计算、长时间运行<tr><td><strong>工程仿真</strong><td><code>CFD</code>流体力学、结构力学、电磁仿真<td>有限元分析、迭代求解<tr><td><strong>生命科学</strong><td>基因测序、蛋白质折叠、药物发现<td>序列比对、分子模拟<tr><td><strong>AI/深度学习</strong><td>大模型训练、推理优化<td><code>GPU</code>密集、梯度同步<tr><td><strong>金融分析</strong><td>风险建模、量化交易、蒙特卡洛模拟<td>高频计算、实时性要求<tr><td><strong>能源勘探</strong><td>地震数据处理、油藏模拟<td>大规模数据处理、复杂算法</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=实现hpc的关键能力>实现HPC的关键能力<a href=#实现hpc的关键能力 class=hash-link aria-label="Direct link to 实现HPC的关键能力" title="Direct link to 实现HPC的关键能力">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=并行计算能力>并行计算能力<a href=#并行计算能力 class=hash-link aria-label="Direct link to 并行计算能力" title="Direct link to 并行计算能力">​</a></h3>
<p>并行计算是<code>HPC</code>的核心，主要包括以下几种并行模式：</p>
<table><thead><tr><th>并行模式<th>说明<th>典型实现<th>适用场景<tbody><tr><td><strong>数据并行</strong><td>将数据分片，每个处理器处理不同数据<td><code>MPI</code>、<code>OpenMP</code><td>大规模数据处理<tr><td><strong>任务并行</strong><td>将任务分解，不同处理器执行不同任务<td><code>MPI</code>、线程池<td>异构计算任务<tr><td><strong>流水线并行</strong><td>将计算分阶段，形成流水线处理<td><code>Pipeline Parallel</code><td>深度学习模型训练<tr><td><strong>模型并行</strong><td>将模型分片到不同设备<td><code>Tensor Parallel</code><td>超大模型训练</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=高速网络互连>高速网络互连<a href=#高速网络互连 class=hash-link aria-label="Direct link to 高速网络互连" title="Direct link to 高速网络互连">​</a></h3>
<p>节点间通信效率直接影响<code>HPC</code>系统性能：</p>
<table><thead><tr><th>网络技术<th>带宽<th>延迟<th>适用场景<tbody><tr><td><strong>InfiniBand HDR</strong><td><code>200 Gbps</code><td><code>&lt; 1 μs</code><td>大规模<code>HPC</code>集群<tr><td><strong>InfiniBand NDR</strong><td><code>400 Gbps</code><td><code>&lt; 1 μs</code><td>下一代<code>HPC</code>/<code>AI</code>集群<tr><td><strong>RoCE v2</strong><td><code>100-400 Gbps</code><td><code>1-2 μs</code><td>数据中心、云环境<tr><td><strong>NVLink</strong><td><code>600-900 GB/s</code><td>极低<td><code>GPU</code>间直连通信<tr><td><strong>以太网</strong><td><code>10-100 Gbps</code><td><code>10-100 μs</code><td>通用计算、成本敏感</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=分布式通信框架>分布式通信框架<a href=#分布式通信框架 class=hash-link aria-label="Direct link to 分布式通信框架" title="Direct link to 分布式通信框架">​</a></h3>
<p><code>HPC</code>依赖高效的通信框架实现节点间数据交换：</p>
<table><thead><tr><th>通信框架<th>说明<th>核心特性<tbody><tr><td><strong>MPI</strong><td>消息传递接口标准<td>点对点通信、集合通信、进程组管理<tr><td><strong>NCCL</strong><td><code>NVIDIA</code>集合通信库<td><code>GPU</code>优化、<code>Ring AllReduce</code>、<code>NVLink</code>支持<tr><td><strong>Gloo</strong><td><code>Facebook</code>开源通信库<td>跨平台、支持<code>CPU/GPU</code><tr><td><strong>UCX</strong><td>统一通信框架<td>硬件抽象、多传输支持</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=资源调度与管理>资源调度与管理<a href=#资源调度与管理 class=hash-link aria-label="Direct link to 资源调度与管理" title="Direct link to 资源调度与管理">​</a></h3>
<p><code>HPC</code>系统需要高效的资源调度能力：</p>
<table><thead><tr><th>调度能力<th>说明<th>重要性<tbody><tr><td><strong>Gang Scheduling</strong><td>确保并行任务所有进程同时启动<td>⭐⭐⭐⭐⭐<tr><td><strong>资源预留</strong><td>为大规模任务预留资源<td>⭐⭐⭐⭐⭐<tr><td><strong>队列管理</strong><td>多队列隔离、公平调度<td>⭐⭐⭐⭐<tr><td><strong>优先级抢占</strong><td>高优先级任务抢占低优先级资源<td>⭐⭐⭐⭐<tr><td><strong>拓扑感知</strong><td>考虑网络拓扑优化任务放置<td>⭐⭐⭐⭐<tr><td><strong>亲和性调度</strong><td>将相关任务调度到相近节点<td>⭐⭐⭐⭐</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=存储与io能力>存储与I/O能力<a href=#存储与io能力 class=hash-link aria-label="Direct link to 存储与I/O能力" title="Direct link to 存储与I/O能力">​</a></h3>
<p><code>HPC</code>对存储系统有特殊要求：</p>
<table><thead><tr><th>存储类型<th>特点<th>典型系统<tbody><tr><td><strong>并行文件系统</strong><td>高带宽、支持并发访问<td><code>Lustre</code>、<code>GPFS</code>、<code>BeeGFS</code><tr><td><strong>对象存储</strong><td>海量数据、高扩展性<td><code>Ceph</code>、<code>MinIO</code>、<code>S3</code>、<code>3FS</code><tr><td><strong>本地NVMe</strong><td>超低延迟、高<code>IOPS</code><td>本地<code>SSD</code>缓存<tr><td><strong>内存文件系统</strong><td>极致性能、临时数据<td><code>tmpfs</code>、<code>ramfs</code></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=容错与检查点>容错与检查点<a href=#容错与检查点 class=hash-link aria-label="Direct link to 容错与检查点" title="Direct link to 容错与检查点">​</a></h3>
<p>大规模长时间运行的<code>HPC</code>任务需要容错机制：</p>
<table><thead><tr><th>容错能力<th>说明<tbody><tr><td><strong>检查点保存</strong><td>定期保存计算状态，支持故障恢复<tr><td><strong>任务重试</strong><td>失败任务自动重新调度执行<tr><td><strong>节点替换</strong><td>故障节点自动替换，任务继续运行<tr><td><strong>数据冗余</strong><td>关键数据多副本存储</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=hpc关键能力总览>HPC关键能力总览<a href=#hpc关键能力总览 class=hash-link aria-label="Direct link to HPC关键能力总览" title="Direct link to HPC关键能力总览">​</a></h3>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=生态组件总览对比>生态组件总览对比<a href=#生态组件总览对比 class=hash-link aria-label="Direct link to 生态组件总览对比" title="Direct link to 生态组件总览对比">​</a></h2>
<table><thead><tr><th>对比项<th><a href=https://github.com/kubeflow/trainer target=_blank rel="noopener noreferrer">Kubeflow Trainer</a><th><a href=https://github.com/kubeflow/spark-operator target=_blank rel="noopener noreferrer">Spark Operator</a><th><a href=https://github.com/ray-project/kuberay target=_blank rel="noopener noreferrer">Kuberay</a><th><a href=https://github.com/kubeflow/mpi-operator target=_blank rel="noopener noreferrer">MPI Operator</a><th><a href=https://github.com/horovod/horovod target=_blank rel="noopener noreferrer">Horovod</a><th><a href=https://github.com/PaddlePaddle/PaddleCloud target=_blank rel="noopener noreferrer">PaddleCloud</a><tbody><tr><td><strong>GitHub Stars</strong><td>~2k<td>~3.1k<td>~2.2k<td>~500<td>~14.6k<td>~300<tr><td><strong>适用场景</strong><td>统一训练管理<td>大数据处理<td>分布式计算/强化学习<td>传统<code>HPC</code>、科学计算<td>多框架分布式训练<td>深度学习训练<tr><td><strong>开发语言</strong><td><code>Go</code>/<code>Python</code><td><code>Go</code><td><code>Go</code><td><code>Go</code><td><code>Python</code>/<code>C++</code><td><code>Go</code><tr><td><strong>并行模式</strong><td>多种模式<td><code>MapReduce/DAG</code><td><code>Actor</code>模型<td><code>MPI</code>进程并行<td><code>AllReduce</code><td><code>Collective/PS</code><tr><td><strong>通信后端</strong><td>多种后端<td><code>Shuffle</code><td><code>Ray</code>内置<td><code>MPI</code>(<code>TCP/IB/RDMA</code>)<td><code>MPI/NCCL/Gloo</code><td><code>NCCL/Gloo</code><tr><td><strong>最低K8S版本</strong><td>>= 1.16<td>>= 1.16<td>>= 1.16<td>>= 1.14<td>>= 1.16<td>>= 1.16<tr><td><strong>弹性支持</strong><td>部分<td>✅<td>✅<td>❌<td>❌<td>✅<tr><td><strong>成熟度</strong><td>⭐⭐⭐⭐⭐<td>⭐⭐⭐⭐⭐<td>⭐⭐⭐⭐<td>⭐⭐⭐⭐⭐<td>⭐⭐⭐⭐<td>⭐⭐⭐<tr><td><strong>社区活跃度</strong><td>高<td>高<td>高<td>中<td>低（维护模式）<td>低</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=各组件详细介绍>各组件详细介绍<a href=#各组件详细介绍 class=hash-link aria-label="Direct link to 各组件详细介绍" title="Direct link to 各组件详细介绍">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=kubeflow-trainer>Kubeflow Trainer<a href=#kubeflow-trainer class=hash-link aria-label="Direct link to Kubeflow Trainer" title="Direct link to Kubeflow Trainer">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介>简介<a href=#简介 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>Kubeflow Trainer</code>是一个统一的训练作业管理组件，整合了多种框架的<code>Operator</code>功能。它是<code>Kubeflow</code>项目的核心组件之一，提供统一的作业管理接口，原生支持<code>Volcano</code>调度器集成。</p>
<p>项目地址：<a href=https://github.com/kubeflow/trainer target=_blank rel="noopener noreferrer">https://github.com/kubeflow/trainer</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=支持的作业类型>支持的作业类型<a href=#支持的作业类型 class=hash-link aria-label="Direct link to 支持的作业类型" title="Direct link to 支持的作业类型">​</a></h4>
<table><thead><tr><th>作业类型<th>CRD<th>说明<tbody><tr><td><strong>PyTorch</strong><td><code>PyTorchJob</code><td><code>PyTorch</code>分布式训练<tr><td><strong>TensorFlow</strong><td><code>TFJob</code><td><code>TensorFlow</code>分布式训练<tr><td><strong>MPI</strong><td><code>MPIJob</code><td><code>MPI</code>并行计算<tr><td><strong>XGBoost</strong><td><code>XGBoostJob</code><td><code>XGBoost</code>分布式训练<tr><td><strong>PaddlePaddle</strong><td><code>PaddleJob</code><td>飞桨分布式训练<tr><td><strong>MXNet</strong><td><code>MXJob</code><td><code>MXNet</code>分布式训练</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=与volcano集成>与Volcano集成<a href=#与volcano集成 class=hash-link aria-label="Direct link to 与Volcano集成" title="Direct link to 与Volcano集成">​</a></h4>
<p><code>Kubeflow Training Operator</code>原生支持<code>Volcano</code>调度器：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">runPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">schedulingPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">queue</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> default</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">priorityClass</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> high</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">priority</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">pytorchReplicaSpecs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Master</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano  </span><span class="token comment" style=color:#8292a2;font-style:italic># 使用Volcano调度器</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例>配置示例<a href=#配置示例 class=hash-link aria-label="Direct link to 配置示例" title="Direct link to 配置示例">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> kubeflow.org/v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PyTorchJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> unified</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pytorch</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">runPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">cleanPodPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Running</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">schedulingPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">queue</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> default</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">priorityClass</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> high</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">priority</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">pytorchReplicaSpecs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Master</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch/pytorch</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.0.0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"python"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"train.py"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Worker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch/pytorch</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.0.0</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点>优点<a href=#优点 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>统一管理</strong><td>一个<code>Operator</code>管理多种框架<tr><td><strong>Volcano集成</strong><td>原生支持<code>Volcano</code>调度<tr><td><strong>标准化</strong><td>统一的作业管理接口<tr><td><strong>维护简单</strong><td>减少<code>Operator</code>数量<tr><td><strong>社区活跃</strong><td><code>Kubeflow</code>社区持续维护</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点>缺点<a href=#缺点 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>功能滞后</strong><td>新特性支持可能滞后<tr><td><strong>依赖复杂</strong><td><code>Kubeflow</code>组件依赖<tr><td><strong>资源开销</strong><td>控制器本身有一定资源消耗</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=spark-operator>Spark Operator<a href=#spark-operator class=hash-link aria-label="Direct link to Spark Operator" title="Direct link to Spark Operator">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介-1>简介<a href=#简介-1 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>Spark Operator</code>支持在<code>Kubernetes</code>上运行<code>Apache Spark</code>应用，适合大数据处理和机器学习工作负载。<code>Spark</code>是大数据领域最流行的计算引擎，支持批处理、流处理、机器学习和图计算。</p>
<p>项目地址：<a href=https://github.com/kubeflow/spark-operator target=_blank rel="noopener noreferrer">https://github.com/kubeflow/spark-operator</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=支持的运行模式>支持的运行模式<a href=#支持的运行模式 class=hash-link aria-label="Direct link to 支持的运行模式" title="Direct link to 支持的运行模式">​</a></h4>
<table><thead><tr><th>模式<th>说明<th>适用场景<tbody><tr><td><strong>Cluster Mode</strong><td><code>Driver</code>运行在集群内<td>生产环境、长时间运行<tr><td><strong>Client Mode</strong><td><code>Driver</code>运行在提交节点<td>交互式开发、调试</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=spark核心组件>Spark核心组件<a href=#spark核心组件 class=hash-link aria-label="Direct link to Spark核心组件" title="Direct link to Spark核心组件">​</a></h4>
<table><thead><tr><th>组件<th>功能<tbody><tr><td><strong>Spark SQL</strong><td>结构化数据处理<tr><td><strong>Spark Streaming</strong><td>实时流处理<tr><td><strong>MLlib</strong><td>机器学习库<tr><td><strong>GraphX</strong><td>图计算<tr><td><strong>Structured Streaming</strong><td>统一批流处理</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例-1>配置示例<a href=#配置示例-1 class=hash-link aria-label="Direct link to 配置示例" title="Direct link to 配置示例">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> sparkoperator.k8s.io/v1beta2</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> SparkApplication</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> spark</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pi</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Scala</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">mode</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> cluster</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> spark</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">3.4.0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">mainClass</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> org.apache.spark.examples.SparkPi</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">mainApplicationFile</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> local</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">///opt/spark/examples/jars/spark</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">examples.jar</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">sparkVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"3.4.0"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">restartPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Never</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">driver</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">cores</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"512m"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">serviceAccount</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> spark</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">executor</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">cores</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">instances</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"512m"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">dynamicAllocation</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">enabled</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#ae81ff>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">initialExecutors</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">minExecutors</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">maxExecutors</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>10</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点-1>优点<a href=#优点-1 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>动态分配</strong><td>支持<code>Executor</code>动态扩缩容<tr><td><strong>生态成熟</strong><td><code>Spark</code>生态系统完善<tr><td><strong>大数据支持</strong><td>适合大规模数据处理<tr><td><strong>多语言</strong><td>支持<code>Scala/Java/Python/R</code><tr><td><strong>统一引擎</strong><td>批处理、流处理、ML统一</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点-1>缺点<a href=#缺点-1 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>资源开销</strong><td><code>JVM</code>内存开销较大<tr><td><strong>启动延迟</strong><td>冷启动时间较长<tr><td><strong>复杂配置</strong><td><code>Spark</code>配置参数众多<tr><td><strong>小文件问题</strong><td>处理大量小文件效率低</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=kuberay>Kuberay<a href=#kuberay class=hash-link aria-label="Direct link to Kuberay" title="Direct link to Kuberay">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介-2>简介<a href=#简介-2 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>Ray</code>是由<code>UC Berkeley RISELab</code>开发的通用分布式计算框架，特别适合强化学习、超参数调优和分布式<code>Python</code>应用。<code>Ray Operator</code>将<code>Ray</code>集群管理能力带入<code>Kubernetes</code>，支持自动扩缩容和故障恢复。</p>
<p>项目地址：<a href=https://github.com/ray-project/kuberay target=_blank rel="noopener noreferrer">https://github.com/ray-project/kuberay</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=核心组件>核心组件<a href=#核心组件 class=hash-link aria-label="Direct link to 核心组件" title="Direct link to 核心组件">​</a></h4>
<table><thead><tr><th>组件<th>功能<th>适用场景<tbody><tr><td><strong>Ray Core</strong><td>分布式计算基础设施<td>通用分布式应用<tr><td><strong>Ray Train</strong><td>分布式训练<td>深度学习训练<tr><td><strong>Ray Tune</strong><td>超参数调优<td><code>AutoML</code>、<code>HPO</code><tr><td><strong>Ray Serve</strong><td>模型服务<td>在线推理<tr><td><strong>RLlib</strong><td>强化学习库<td><code>RL</code>训练<tr><td><strong>Ray Data</strong><td>分布式数据处理<td>数据预处理</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=actor编程模型>Actor编程模型<a href=#actor编程模型 class=hash-link aria-label="Direct link to Actor编程模型" title="Direct link to Actor编程模型">​</a></h4>
<p><code>Ray</code>的核心是<code>Actor</code>编程模型：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>import</span><span class="token plain"> ray</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 定义Actor</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token decorator annotation punctuation" style=color:#f8f8f2>@ray</span><span class="token decorator annotation punctuation" style=color:#f8f8f2>.</span><span class="token decorator annotation punctuation" style=color:#f8f8f2>remote</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>class</span><span class="token plain"> </span><span class="token class-name" style=color:#e6db74>Counter</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>def</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>__init__</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        self</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">value </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>def</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>increment</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">self</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        self</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">value </span><span class="token operator" style=color:#66d9ef>+=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> self</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">value</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 创建Actor实例</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">counter </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> Counter</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">remote</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 调用Actor方法</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">result </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> ray</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">get</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">counter</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">increment</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">remote</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例-2>配置示例<a href=#配置示例-2 class=hash-link aria-label="Direct link to 配置示例" title="Direct link to 配置示例">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ray.io/v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RayJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ray</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">sample</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">entrypoint</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> python train.py</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">runtimeEnvYAML</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>|</span><span class="token scalar string" style=color:#a6e22e></span><br></span><span class=token-line style=color:#f8f8f2><span class="token scalar string" style=color:#a6e22e>    pip:</span><br></span><span class=token-line style=color:#f8f8f2><span class="token scalar string" style=color:#a6e22e>      - torch</span><br></span><span class=token-line style=color:#f8f8f2><span class="token scalar string" style=color:#a6e22e>      - ray[train]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">rayClusterSpec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">headGroupSpec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">rayStartParams</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">dashboard-host</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'0.0.0.0'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ray</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">head</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> rayproject/ray</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.7.0</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">py310</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">workerGroupSpecs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">minReplicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">maxReplicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">groupName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> gpu</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">workers</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">rayStartParams</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> ray</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">worker</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> rayproject/ray</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.7.0</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">py310</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点-2>优点<a href=#优点-2 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>弹性扩展</strong><td>支持自动扩缩容<tr><td><strong>通用性强</strong><td>不限于深度学习<tr><td><strong>Actor模型</strong><td>灵活的分布式编程模型<tr><td><strong>生态丰富</strong><td>内置多种<code>AI</code>工具库<tr><td><strong>故障恢复</strong><td>自动重启失败的<code>Actor</code><tr><td><strong>资源管理</strong><td>细粒度资源分配</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点-2>缺点<a href=#缺点-2 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>学习成本</strong><td><code>Ray</code>编程模型需要学习<tr><td><strong>资源开销</strong><td><code>Head</code>节点资源消耗<tr><td><strong>复杂度</strong><td>集群管理相对复杂<tr><td><strong>调试难度</strong><td>分布式<code>Actor</code>调试困难</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=mpi-operator>MPI Operator<a href=#mpi-operator class=hash-link aria-label="Direct link to MPI Operator" title="Direct link to MPI Operator">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介-3>简介<a href=#简介-3 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>MPI</code>（<code>Message Passing Interface</code>，消息传递接口）是<code>HPC</code>领域最重要的并行编程标准，定义了进程间通信的接口规范。<code>MPI Operator</code>将这一经典的<code>HPC</code>编程模型引入<code>Kubernetes</code>云原生环境，使传统<code>HPC</code>应用能够无缝迁移到容器化平台。</p>
<p>项目地址：<a href=https://github.com/kubeflow/mpi-operator target=_blank rel="noopener noreferrer">https://github.com/kubeflow/mpi-operator</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=mpi核心概念>MPI核心概念<a href=#mpi核心概念 class=hash-link aria-label="Direct link to MPI核心概念" title="Direct link to MPI核心概念">​</a></h4>
<table><thead><tr><th>概念<th>说明<tbody><tr><td><strong>进程（Rank）</strong><td><code>MPI</code>程序中的独立执行单元，每个进程有唯一的<code>rank</code>编号<tr><td><strong>通信域（Communicator）</strong><td>定义可以相互通信的进程集合<tr><td><strong>点对点通信</strong><td>两个进程之间的直接消息传递（<code>Send/Recv</code>）<tr><td><strong>集合通信</strong><td>多个进程参与的通信操作（<code>Broadcast/Reduce/AllReduce</code>）<tr><td><strong>同步/异步</strong><td>阻塞式和非阻塞式通信模式</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=支持的mpi实现>支持的MPI实现<a href=#支持的mpi实现 class=hash-link aria-label="Direct link to 支持的MPI实现" title="Direct link to 支持的MPI实现">​</a></h4>
<table><thead><tr><th>MPI实现<th>特点<th>适用场景<tbody><tr><td><strong>Open MPI</strong><td>开源、模块化设计、社区活跃<td>通用<code>HPC</code>环境<tr><td><strong>Intel MPI</strong><td><code>Intel</code>硬件优化、高性能<td><code>Intel</code>平台、商业环境<tr><td><strong>MPICH</strong><td>高性能、便携式、参考实现<td>研究开发、跨平台<tr><td><strong>MVAPICH</strong><td><code>InfiniBand/RDMA</code>优化<td>高性能网络环境</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=mpi集合通信操作>MPI集合通信操作<a href=#mpi集合通信操作 class=hash-link aria-label="Direct link to MPI集合通信操作" title="Direct link to MPI集合通信操作">​</a></h4>
<table><thead><tr><th>操作<th>说明<th>应用场景<tbody><tr><td><strong>Broadcast</strong><td>一对多广播数据<td>参数分发<tr><td><strong>Scatter</strong><td>将数据分片发送给所有进程<td>数据分发<tr><td><strong>Gather</strong><td>收集所有进程的数据<td>结果汇总<tr><td><strong>AllGather</strong><td>所有进程收集所有数据<td>全局数据同步<tr><td><strong>Reduce</strong><td>归约操作（求和、最大值等）<td>梯度聚合<tr><td><strong>AllReduce</strong><td>归约后广播结果<td>分布式训练梯度同步<tr><td><strong>AllToAll</strong><td>全交换通信<td>矩阵转置、<code>FFT</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=与volcano集成特性>与Volcano集成特性<a href=#与volcano集成特性 class=hash-link aria-label="Direct link to 与Volcano集成特性" title="Direct link to 与Volcano集成特性">​</a></h4>
<p><code>MPI Operator</code>与<code>Volcano</code>调度器深度集成，提供以下增强能力：</p>
<table><thead><tr><th>特性<th>说明<tbody><tr><td><strong>Gang Scheduling</strong><td>确保所有<code>MPI</code>进程同时启动，避免死锁<tr><td><strong>SSH Plugin</strong><td>自动配置<code>SSH</code>免密登录<tr><td><strong>SVC Plugin</strong><td>自动创建<code>Headless Service</code>用于进程发现<tr><td><strong>ENV Plugin</strong><td>自动注入<code>MPI</code>相关环境变量</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例-3>配置示例<a href=#配置示例-3 class=hash-link aria-label="Direct link to 配置示例" title="Direct link to 配置示例">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> kubeflow.org/v2beta1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> MPIJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">sample</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">slotsPerWorker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">runPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">cleanPodPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Running</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">mpiReplicaSpecs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Launcher</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">launcher</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpioperator/mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pi</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">latest</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> mpirun</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">np</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"4"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> /home/mpiuser/pi</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Worker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">worker</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> mpioperator/mpi</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pi</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">latest</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点-3>优点<a href=#优点-3 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>标准化</strong><td>遵循<code>MPI</code>标准，现有<code>HPC</code>代码无需修改<tr><td><strong>高性能</strong><td>支持<code>InfiniBand/RDMA</code>高速网络<tr><td><strong>成熟稳定</strong><td>经过多年生产环境验证<tr><td><strong>生态丰富</strong><td>大量科学计算库基于<code>MPI</code>（<code>PETSc</code>、<code>FFTW</code>、<code>ScaLAPACK</code>等）<tr><td><strong>硬件支持</strong><td>支持<code>GPU Direct RDMA</code>，<code>GPU</code>间直接通信</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点-3>缺点<a href=#缺点-3 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>无弹性</strong><td>不支持运行时动态扩缩容<tr><td><strong>容错性差</strong><td>单进程失败导致整个作业失败<tr><td><strong>配置复杂</strong><td><code>SSH</code>免密、<code>hostfile</code>配置繁琐（<code>Volcano</code>可简化）<tr><td><strong>资源利用率</strong><td>需要预先分配所有资源<tr><td><strong>调试困难</strong><td>分布式环境下问题定位复杂</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=horovod>Horovod<a href=#horovod class=hash-link aria-label="Direct link to Horovod" title="Direct link to Horovod">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介-4>简介<a href=#简介-4 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>Horovod</code>是<code>Uber</code>开源的分布式深度学习框架，基于<code>MPI</code>的<code>AllReduce</code>通信模式，支持多种深度学习框架。其核心优势是只需少量代码修改即可将单机训练代码转换为分布式训练，实现接近线性的扩展效率。</p>
<p>项目地址：<a href=https://github.com/horovod/horovod target=_blank rel="noopener noreferrer">https://github.com/horovod/horovod</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=核心设计理念>核心设计理念<a href=#核心设计理念 class=hash-link aria-label="Direct link to 核心设计理念" title="Direct link to 核心设计理念">​</a></h4>
<table><thead><tr><th>原则<th>说明<tbody><tr><td><strong>简单易用</strong><td>最小化代码改动，几行代码实现分布式<tr><td><strong>高性能</strong><td>基于<code>Ring AllReduce</code>算法，通信效率高<tr><td><strong>框架无关</strong><td>统一接口支持多种深度学习框架<tr><td><strong>MPI兼容</strong><td>利用成熟的<code>MPI</code>生态和工具</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=支持的框架>支持的框架<a href=#支持的框架 class=hash-link aria-label="Direct link to 支持的框架" title="Direct link to 支持的框架">​</a></h4>
<table><thead><tr><th>框架<th>支持程度<th>说明<tbody><tr><td><strong>TensorFlow</strong><td>⭐⭐⭐⭐⭐<td>完整支持，包括Keras<tr><td><strong>PyTorch</strong><td>⭐⭐⭐⭐⭐<td>完整支持<tr><td><strong>MXNet</strong><td>⭐⭐⭐⭐<td>良好支持<tr><td><strong>Keras</strong><td>⭐⭐⭐⭐<td>通过TensorFlow后端支持</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=代码改动示例>代码改动示例<a href=#代码改动示例 class=hash-link aria-label="Direct link to 代码改动示例" title="Direct link to 代码改动示例">​</a></h4>
<p>将单机训练代码转换为<code>Horovod</code>分布式训练只需几行改动：</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>import</span><span class="token plain"> horovod</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">torch </span><span class="token keyword" style=color:#66d9ef>as</span><span class="token plain"> hvd</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 初始化Horovod</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">hvd</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">init</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 绑定GPU</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">torch</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">cuda</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">set_device</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">hvd</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">local_rank</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 包装优化器</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">optimizer </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> hvd</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">DistributedOptimizer</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">optimizer</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 广播初始参数</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">hvd</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">broadcast_parameters</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">model</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">state_dict</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> root_rank</span><span class="token operator" style=color:#66d9ef>=</span><span class="token number" style=color:#ae81ff>0</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例通过mpi-operator>配置示例（通过MPI Operator）<a href=#配置示例通过mpi-operator class=hash-link aria-label="Direct link to 配置示例（通过MPI Operator）" title="Direct link to 配置示例（通过MPI Operator）">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> kubeflow.org/v2beta1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> MPIJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> horovod</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">slotsPerWorker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">mpiReplicaSpecs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Launcher</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> horovod</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> horovod/horovod</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">0.28.1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> horovodrun</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">np</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"8"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">H</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"worker-0:4,worker-1:4"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> python</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> train.py</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">Worker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> horovod</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> horovod/horovod</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">0.28.1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点-4>优点<a href=#优点-4 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>多框架支持</strong><td>统一的分布式训练接口<tr><td><strong>高效通信</strong><td><code>Ring AllReduce</code>算法优化<tr><td><strong>代码改动小</strong><td>只需少量代码修改<tr><td><strong>性能优异</strong><td>接近线性扩展<tr><td><strong>调试友好</strong><td>支持<code>horovodrun</code>本地调试</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点-4>缺点<a href=#缺点-4 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>无弹性</strong><td>不支持动态扩缩容<tr><td><strong>MPI依赖</strong><td>需要<code>MPI</code>环境配置<tr><td><strong>维护状态</strong><td>社区活跃度下降，更新频率降低<tr><td><strong>容错性差</strong><td>单进程失败导致整体失败</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=paddlecloud>PaddleCloud<a href=#paddlecloud class=hash-link aria-label="Direct link to PaddleCloud" title="Direct link to PaddleCloud">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=简介-5>简介<a href=#简介-5 class=hash-link aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h4>
<p><code>PaddlePaddle Operator</code>是百度飞桨深度学习框架的<code>Kubernetes Operator</code>，支持国产<code>AI</code>框架的分布式训练。作为国内最成熟的深度学习框架之一，飞桨在中文<code>NLP</code>、<code>OCR</code>、推荐系统等领域有广泛应用。</p>
<p>项目地址：<a href=https://github.com/PaddlePaddle/PaddleCloud target=_blank rel="noopener noreferrer">https://github.com/PaddlePaddle/PaddleCloud</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=支持的训练模式>支持的训练模式<a href=#支持的训练模式 class=hash-link aria-label="Direct link to 支持的训练模式" title="Direct link to 支持的训练模式">​</a></h4>
<table><thead><tr><th>模式<th>说明<th>适用场景<tbody><tr><td><strong>Collective模式</strong><td>基于<code>AllReduce</code>的数据并行<td>密集模型、中小规模<tr><td><strong>Parameter Server模式</strong><td><code>PS</code>架构，适合稀疏特征<td>大规模稀疏模型、推荐系统<tr><td><strong>Elastic模式</strong><td>弹性训练，支持动态扩缩容<td>资源弹性需求场景</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=飞桨特色��能力>飞桨特色能力<a href=#飞桨特色能力 class=hash-link aria-label="Direct link to 飞桨特色能力" title="Direct link to 飞桨特色能力">​</a></h4>
<table><thead><tr><th>能力<th>说明<tbody><tr><td><strong>自动混合精度</strong><td>自动<code>FP16/BF16</code>训练<tr><td><strong>梯度累积</strong><td>支持大<code>batch</code>训练<tr><td><strong>分布式推理</strong><td>支持大模型分布式推理<tr><td><strong>模型压缩</strong><td>量化、剪枝、蒸馏一体化</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=配置示例-4>配置示例<a href=#配置示例-4 class=hash-link aria-label="Direct link to 配置示例" title="Direct link to 配置示例">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.paddlepaddle.org/v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PaddleJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> paddle</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">cleanPodPolicy</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Never</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">withGloo</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">worker</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> paddle</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> registry.baidubce.com/paddlepaddle/paddle</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.4.2</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">gpu</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">cuda11.7</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"python"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"-m"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"paddle.distributed.launch"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"train.py"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">ps</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> paddle</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> registry.baidubce.com/paddlepaddle/paddle</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.4.2</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"python"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"train.py"</span><span class="token punctuation" style=color:#f8f8f2>]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=优点-5>优点<a href=#优点-5 class=hash-link aria-label="Direct link to 优点" title="Direct link to 优点">​</a></h4>
<table><thead><tr><th>优点<th>说明<tbody><tr><td><strong>国产化</strong><td>支持国产<code>AI</code>框架，符合信创要求<tr><td><strong>弹性训练</strong><td>支持<code>Elastic</code>模式<tr><td><strong>易用性</strong><td>与飞桨<code>API</code>深度集成<tr><td><strong>中文生态</strong><td>中文文档完善，社区支持好<tr><td><strong>行业模型</strong><td>提供丰富的预训练模型库</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=缺点-5>缺点<a href=#缺点-5 class=hash-link aria-label="Direct link to 缺点" title="Direct link to 缺点">​</a></h4>
<table><thead><tr><th>缺点<th>说明<tbody><tr><td><strong>生态较小</strong><td>相比<code>PyTorch/TF</code>国际社区较小<tr><td><strong>国际化</strong><td>国际社区支持有限<tr><td><strong>第三方集成</strong><td>部分第三方工具支持不如<code>PyTorch</code></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=与volcano调度器集成>与Volcano调度器集成<a href=#与volcano调度器集成 class=hash-link aria-label="Direct link to 与Volcano调度器集成" title="Direct link to 与Volcano调度器集成">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=集成方式>集成方式<a href=#集成方式 class=hash-link aria-label="Direct link to 集成方式" title="Direct link to 集成方式">​</a></h3>
<p>所有上述组件都可以通过以下方式与<code>Volcano</code>调度器集成：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano  </span><span class="token comment" style=color:#8292a2;font-style:italic># 指定使用Volcano调度器</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=volcano提供的hpc增强特性>Volcano提供的HPC增强特性<a href=#volcano提供的hpc增强特性 class=hash-link aria-label="Direct link to Volcano提供的HPC增强特性" title="Direct link to Volcano提供的HPC增强特性">​</a></h3>
<table><thead><tr><th>特性<th>说明<th>适用组件<tbody><tr><td><strong>Gang Scheduling</strong><td>确保所有<code>Pod</code>同时调度<td>全部<tr><td><strong>Queue Management</strong><td>多队列资源隔离<td>全部<tr><td><strong>Priority & Preemption</strong><td>优先级抢占<td>全部<tr><td><strong>Fair Share</strong><td><code>DRF</code>公平分配<td>全部<tr><td><strong>Task Topology</strong><td>拓扑感知调度<td><code>MPI/PyTorch/Horovod</code><tr><td><strong>SVC Plugin</strong><td>自动创建<code>Service</code><td><code>MPI</code><tr><td><strong>SSH Plugin</strong><td>自动配置<code>SSH</code>免密<td><code>MPI</code><tr><td><strong>ENV Plugin</strong><td>自动注入环境变量<td>全部</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=volcano-job示例>Volcano Job示例<a href=#volcano-job示例 class=hash-link aria-label="Direct link to Volcano Job示例" title="Direct link to Volcano Job示例">​</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">apiVersion</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> batch.volcano.sh/v1alpha1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> Job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">pytorch</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">job</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">minAvailable</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">schedulerName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> volcano</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">queue</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> training</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">queue</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">priorityClassName</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> high</span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain">priority</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">plugins</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token key atrule">svc</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">policies</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">event</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> PodEvicted</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">action</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> RestartJob</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">tasks</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> master</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch/pytorch</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.0.0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">command</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>"python"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"-m"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"torch.distributed.launch"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"train.py"</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">replicas</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> worker</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token key atrule">template</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token key atrule">spec</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token key atrule">containers</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">image</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> pytorch/pytorch</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">2.0.0</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token key atrule">resources</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">              </span><span class="token key atrule">limits</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                </span><span class="token key atrule">nvidia.com/gpu</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>4</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/ai/ml-platform-opensource-projects><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>模型开发训练开源项目对比分析</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/ai/notebook><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Notebook</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#概述 class="table-of-contents__link toc-highlight">概述</a><li><a href=#什么是hpc class="table-of-contents__link toc-highlight">什么是HPC</a><ul><li><a href=#hpc定义 class="table-of-contents__link toc-highlight">HPC定义</a><li><a href=#hpc的核心特征 class="table-of-contents__link toc-highlight">HPC的核心特征</a><li><a href=#hpc典型应用场景 class="table-of-contents__link toc-highlight">HPC典型应用场景</a></ul><li><a href=#实现hpc的关键能力 class="table-of-contents__link toc-highlight">实现HPC的关键能力</a><ul><li><a href=#并行计算能力 class="table-of-contents__link toc-highlight">并行计算能力</a><li><a href=#高速网络互连 class="table-of-contents__link toc-highlight">高速网络互连</a><li><a href=#分布式通信框架 class="table-of-contents__link toc-highlight">分布式通信框架</a><li><a href=#资源调度与管理 class="table-of-contents__link toc-highlight">资源调度与管理</a><li><a href=#存储与io能力 class="table-of-contents__link toc-highlight">存储与I/O能力</a><li><a href=#容错与检查点 class="table-of-contents__link toc-highlight">容错与检查点</a><li><a href=#hpc关键能力总览 class="table-of-contents__link toc-highlight">HPC关键能力总览</a></ul><li><a href=#生态组件总览对比 class="table-of-contents__link toc-highlight">生态组件总览对比</a><li><a href=#各组件详细介绍 class="table-of-contents__link toc-highlight">各组件详细介绍</a><ul><li><a href=#kubeflow-trainer class="table-of-contents__link toc-highlight">Kubeflow Trainer</a><li><a href=#spark-operator class="table-of-contents__link toc-highlight">Spark Operator</a><li><a href=#kuberay class="table-of-contents__link toc-highlight">Kuberay</a><li><a href=#mpi-operator class="table-of-contents__link toc-highlight">MPI Operator</a><li><a href=#horovod class="table-of-contents__link toc-highlight">Horovod</a><li><a href=#paddlecloud class="table-of-contents__link toc-highlight">PaddleCloud</a></ul><li><a href=#与volcano调度器集成 class="table-of-contents__link toc-highlight">与Volcano调度器集成</a><ul><li><a href=#集成方式 class="table-of-contents__link toc-highlight">集成方式</a><li><a href=#volcano提供的hpc增强特性 class="table-of-contents__link toc-highlight">Volcano提供的HPC增强特性</a><li><a href=#volcano-job示例 class="table-of-contents__link toc-highlight">Volcano Job示例</a></ul></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2026 johng.cn</div></div></div></footer></div>