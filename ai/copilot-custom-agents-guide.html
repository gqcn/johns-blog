<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/AI技术/应用开发/Copilot-VSCode/Copilot-Custom-Agents使用指南" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Copilot Custom Agents使用指南 | John's Blog</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://johng.cn/ai/copilot-custom-agents-guide><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=author content="John Guo"><meta data-rh=true property=og:image content=https://johng.cn/img/favicon.png><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Copilot Custom Agents使用指南 | John's Blog"><meta data-rh=true name=description content="Copilot Custom Agents是VS Code中GitHub Copilot的高级定制功能，允许开发者创建针对特定开发角色和任务的专属AI代理。通过自定义代理，可以为不同的开发场景配置专门的行为、工具集和指令，如规划代理、实现代理、代码审查代理等。本文全面介绍Copilot Custom Agents的核心概念、使用方法、配置管理、Handoffs工作流、应用场景和最佳实践，帮助开发者构建高效的AI辅助开发工作流，提升团队协作效率和代码质量。"><meta data-rh=true property=og:description content="Copilot Custom Agents是VS Code中GitHub Copilot的高级定制功能，允许开发者创建针对特定开发角色和任务的专属AI代理。通过自定义代理，可以为不同的开发场景配置专门的行为、工具集和指令，如规划代理、实现代理、代码审查代理等。本文全面介绍Copilot Custom Agents的核心概念、使用方法、配置管理、Handoffs工作流、应用场景和最佳实践，帮助开发者构建高效的AI辅助开发工作流，提升团队协作效率和代码质量。"><meta data-rh=true name=keywords content="Copilot Custom Agents,VS Code,GitHub Copilot,自定义代理,AI助手,代码开发,工作流程,开发工具,AI配置,角色定制,任务专属代理,Handoffs,Agent切换,代码评审,实现计划,最佳实践,团队协作,开发效率,代码质量,工具管理"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://johng.cn/ai/copilot-custom-agents-guide><link data-rh=true rel=alternate href=https://johng.cn/ai/copilot-custom-agents-guide hreflang=en><link data-rh=true rel=alternate href=https://johng.cn/ai/copilot-custom-agents-guide hreflang=x-default><link data-rh=true rel=preconnect href=https://XGS1CPQERK-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="John's Blog RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="John's Blog Atom Feed"><link rel=search type=application/opensearchdescription+xml title="John's Blog" href=/opensearch.xml><script src=https://hm.baidu.com/hm.js?6b4ae23dc83ee5efe875b7172af6c7c1 async></script><link rel=stylesheet href=/assets/css/styles.2f56d3c4.css><script src=/assets/js/runtime~main.f0a296e8.js defer></script><script src=/assets/js/main.2514f884.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><b class="navbar__title text--truncate">John's Blog</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/ai>AI技术</a><a class="navbar__item navbar__link" href=/cloud-native>云原生</a><a class="navbar__item navbar__link" href=/notes>日常笔记</a><a class="navbar__item navbar__link" href=/programming>开发语言</a><a class="navbar__item navbar__link" href=/architecture>技术架构</a><a class="navbar__item navbar__link" href=/observability>可观测性</a><a class="navbar__item navbar__link" href=/life>生活笔记</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/aboutme>关于我</a><a class="navbar__item navbar__link" href=/blog>博客</a><a href=https://goframe.org/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-goframe-link"></a><a href=https://github.com/gqcn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/ai>AI技术</a><button aria-label="Collapse sidebar category 'AI技术'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/agents>智能体</a><button aria-label="Expand sidebar category '智能体'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/ai/app>应用开发</a><button aria-label="Collapse sidebar category '应用开发'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/ai/copilot-vscode>Copilot/VSCode</a><button aria-label="Collapse sidebar category 'Copilot/VSCode'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/ai/copilot-skills-guide>Copilot Skills使用指南</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/ai/copilot-prompts-guide>Copilot Prompts使用指南</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/ai/copilot-instructions-guide>Copilot Instructions使用指南</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/ai/copilot-custom-agents-guide>Copilot Custom Agents使用指南</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/ai/ai-code-editor-comparison>AI代码开发工具选型指南</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/inference>推理服务</a><button aria-label="Expand sidebar category '推理服务'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/training-fine-tuning>训练微调</a><button aria-label="Expand sidebar category '训练微调'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/model-development>模型开发</a><button aria-label="Expand sidebar category '模型开发'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/infra>基础架构</a><button aria-label="Expand sidebar category '基础架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/ai/basic>入门知识</a><button aria-label="Expand sidebar category '入门知识'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/cloud-native>云原生</a><button aria-label="Expand sidebar category '云原生'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/notes>日常笔记</a><button aria-label="Expand sidebar category '日常笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/programming>开发语言</a><button aria-label="Expand sidebar category '开发语言'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/architecture>技术架构</a><button aria-label="Expand sidebar category '技术架构'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/management>技术管理</a><button aria-label="Expand sidebar category '技术管理'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/observability>可观测性</a><button aria-label="Expand sidebar category '可�观测性'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/database-and-middleware>数据库与中间件</a><button aria-label="Expand sidebar category '数据库与中间件'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/operating-systems-and-networks>操作系统和网络</a><button aria-label="Expand sidebar category '操作系统和网络'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/life>生活笔记</a><button aria-label="Expand sidebar category '生活笔记'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai><span itemprop=name>AI技术</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai/app><span itemprop=name>应用开发</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/ai/copilot-vscode><span itemprop=name>Copilot/VSCode</span></a><meta itemprop=position content=3><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Copilot Custom Agents使用指南</span><meta itemprop=position content=4></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=前言>前言<a href=#前言 class=hash-link aria-label="Direct link to 前言" title="Direct link to 前言">​</a></h2>
<p>在使用<code>GitHub Copilot</code>进行日常开发时，我们面临着不同类型的任务：需求规划、代码实现、代码审查、重构优化等。不同的任务往往需要<code>AI</code>扮演不同的角色，使用不同的工具集，遵循不同的工作方式。例如，规划阶段需要<code>AI</code>只读代码进行分析，而实现阶段则需要完整的编辑能力；代码审查需要关注安全和质量，而重构需要关注架构和性能。</p>
<p>传统的做法是在每次切换任务时手动调整工具和指令，这不仅繁琐，还容易遗漏关键配置。<code>Copilot Custom Agents</code>（自定义代理）正是为了解决这一问题而设计的功能，它允许你为不同的开发角色和任务预先配置专属的<code>AI</code>代理，并通过简单的切换快速进入相应的工作模式。</p>
<p>本文将深入介绍<code>Copilot Custom Agents</code>的功能特性、配置方法、工作流设计和最佳实践，帮助你构建高效的<code>AI</code>辅助开发工作流。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=copilot-custom-agents是什么>Copilot Custom Agents是什么<a href=#copilot-custom-agents是什么 class=hash-link aria-label="Direct link to Copilot Custom Agents是什么" title="Direct link to Copilot Custom Agents是什么">​</a></h2>
<p><code>Copilot Custom Agents</code>是<code>VS Code</code>中<code>GitHub Copilot</code>的自定义代理功能，它允许开发者创建具有特定角色定位、工具集和行为指令的专属<code>AI</code>代理。每个自定义代理就像一个针对特定任务优化的<code>AI</code>助手，可以快速切换使用。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=核心特点>核心特点<a href=#核心特点 class=hash-link aria-label="Direct link to 核心特点" title="Direct link to 核心特点">​</a></h3>
<ul>
<li><strong>角色定制</strong>：为不同的开发角色（如规划师、实现者、审查者）创建专属代理</li>
<li><strong>工具隔离</strong>：每个代理可以配置专属的工具集，避免不必要的工具干扰</li>
<li><strong>行为定义</strong>：通过指令定义代理的工作方式和响应风格</li>
<li><strong>快速切换</strong>：通过代理下拉菜单一键切换不同的工作模式</li>
<li><strong>工作流编排</strong>：使用<code>Handoffs</code>功能在代理之间创建引导式工作流</li>
<li><strong>团队共享</strong>：代理定义文件可以提交到代码仓库，团队成员共享使用</li>
<li><strong>跨项目复用</strong>：可以在用户配置文件中定义全局代理，跨工作区使用</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=与内置代理的区别>与内置代理的区别<a href=#与内置代理的区别 class=hash-link aria-label="Direct link to 与内置代理的区别" title="Direct link to 与内置代理的区别">​</a></h3>
<p><code>GitHub Copilot</code>提供了几个内置代理（如<code>@workspace</code>、<code>@terminal</code>等），它们提供通用的功能配置。而<code>Custom Agents</code>允许你根据具体的开发场景和团队需求创建更专业化的代理配置，实现更精准的任务定制。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=关键概念>关键概念<a href=#关键概念 class=hash-link aria-label="Direct link to 关键概念" title="Direct link to 关键概念">​</a></h3>
<table><thead><tr><th>概念<th>说明<tbody><tr><td><code>Agent</code>文件<td>定义自定义代理的<code>.agent.md</code>文件<tr><td><code>Tools</code>（工具）<td>代理可用的工具集，如文件搜索、代码编辑、终端执行等<tr><td><code>Instructions</code>（指令）<td>定义代理如何工作的具体指导原则<tr><td><code>Handoffs</code>（交接）<td>代理之间的流程切换机制<tr><td><code>Workspace Agent</code><td>工作区级别的代理，存储在项目的<code>.github/agents</code>目录<tr><td><code>User Agent</code><td>用户级别的代理，存储在用户配置文件目录<tr><td><code>Organization Agent</code><td>组织级别的代理，由<code>GitHub</code>组织统一管理</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=解决什么问题>解决什么问题<a href=#解决什么问题 class=hash-link aria-label="Direct link to 解决什么问题" title="Direct link to 解决什么问题">​</a></h2>
<p><code>Copilot Custom Agents</code>主要解决以下几类问题：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=任务模式切换困难>任务模式切换困难<a href=#任务模式切换困难 class=hash-link aria-label="Direct link to 任务模式切换困难" title="Direct link to 任务模式切换困难">​</a></h3>
<p>不同的开发任务需要不同的工作模式，传统方式需要手动调整配置。</p>
<p><strong>场景示例</strong>：</p>
<ul>
<li>规划阶段需要只读工具避免意外修改代码</li>
<li>实现阶段需要完整的文件编辑能力</li>
<li>审查阶段需要专注于质量和安全分析</li>
<li>重构阶段需要代码搜索和结构分析工具</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=工具使用混乱>工具使用混乱<a href=#工具使用混乱 class=hash-link aria-label="Direct link to 工具使用混乱" title="Direct link to 工具使用混乱">​</a></h3>
<p>当所有工具都可用时，<code>AI</code>可能选择不合适的工具，影响效率和结果质量。</p>
<p><strong>场景示例</strong>：</p>
<ul>
<li>规划时不应该编辑代码，但<code>AI</code>可能尝试修改文件</li>
<li>快速原型开发时不需要完整的测试工具</li>
<li>代码审查时不需要执行终端命令</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重复配置工作>重复配置工作<a href=#重复配置工作 class=hash-link aria-label="Direct link to 重复配置工作" title="Direct link to 重复配置工作">​</a></h3>
<p>每次开始新任务都需要重新说明要求和约束，效率低下。</p>
<p><strong>场景示例</strong>：</p>
<ul>
<li>每次做代码审查都要提醒<code>AI</code>关注安全问题</li>
<li>每次规划都要说明生成实施计划的格式</li>
<li>每次实现都要强调遵循项目规范</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=工作流不连贯>工作流不连贯<a href=#工作流不连贯 class=hash-link aria-label="Direct link to 工作流不连贯" title="Direct link to 工作流不连贯">​</a></h3>
<p>在不同任务阶段之间切换时缺乏流畅的衔接，需要手动复制上下文。</p>
<p><strong>场景示例</strong>：</p>
<ul>
<li>规划完成后需要手动切换到实现模式</li>
<li>实现完成后需要手动准备代码审查上下文</li>
<li>测试失败后需要手动准备修复提示</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=团队协作不一致>团队协作不一致<a href=#团队协作不一致 class=hash-link aria-label="Direct link to 团队协作不一致" title="Direct link to 团队协作不一致">​</a></h3>
<p>团队成员使用不同的工作方式和配置，导致输出质量不一致。</p>
<p><strong>场景示例</strong>：</p>
<ul>
<li>不同成员使用不同的规划流程</li>
<li>代码审查关注点不统一</li>
<li>实施方法和标准各异</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=核心功能>核心功能<a href=#核心功能 class=hash-link aria-label="Direct link to 核心功能" title="Direct link to 核心功能">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=代理定义与配置>代理定义与配置<a href=#代理定义与配置 class=hash-link aria-label="Direct link to 代理定义与配置" title="Direct link to 代理定义与配置">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=代理文件结构>代理文件结构<a href=#代理文件结构 class=hash-link aria-label="Direct link to 代理文件结构" title="Direct link to 代理文件结构">​</a></h4>
<p>自定义代理使用<code>.agent.md</code>文件定义，采用<code>Markdown</code>格式，包含<code>YAML</code>格式的前置元数据（<code>frontmatter</code>）和<code>Markdown</code>格式的指令内容：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 生成功能实现计划</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 规划代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'fetch'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">model</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> Claude Sonnet 4.5</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">handoffs</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>-</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">label</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 开始实现</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">    </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">agent</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实现代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">    </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">prompt</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 现在开始实现上述计划。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">    </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">send</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style=color:#ae81ff>false</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 规划指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于规划模式。你的任务是生成实现计划...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=前置元数据字段>前置元数据字段<a href=#前置元数据字段 class=hash-link aria-label="Direct link to 前置元数据字段" title="Direct link to 前置元数据字段">​</a></h4>
<table><thead><tr><th>字段<th>说明<th>必填<tbody><tr><td><code>description</code><td>代理的简要描述，显示在聊天输入框的占位符文本中<td>否<tr><td><code>name</code><td>代理名称，未指定时使用文件名<td>否<tr><td><code>argument-hint</code><td>输入提示文本，引导用户如何与代理交互<td>否<tr><td><code>tools</code><td>代理可用的工具列表，可包含内置工具、工具集、<code>MCP</code>工具或扩展提供的工具<td>否<tr><td><code>model</code><td>使用的<code>AI</code>模型，未指定时使用当前选择的模型<td>否<tr><td><code>infer</code><td>是否允许作为子代理使用，默认为<code>true</code><td>否<tr><td><code>target</code><td>目标环境，可选值：<code>vscode</code>或<code>github-copilot</code><td>否<tr><td><code>mcp-servers</code><td><code>MCP</code>服务器配置列表（用于<code>GitHub Copilot</code>）<td>否<tr><td><code>handoffs</code><td>定义代理之间的交接流程<td>否</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=工具配置>工具配置<a href=#工具配置 class=hash-link aria-label="Direct link to 工具配置" title="Direct link to 工具配置">​</a></h4>
<p>工具可以是：</p>
<table><thead><tr><th>工具类型<th>说明<th>示例<tbody><tr><td>内置工具<td><code>Copilot</code>内置的基础工具<td><code>search</code>（搜索）、<code>fetch</code>（获取网页）、<code>usages</code>（代码引用）<tr><td>工具集<td>预定义的工具组合<td><code>read-only</code>（只读工具集）<tr><td><code>MCP</code>工具<td><code>Model Context Protocol</code>服务器提供的工具<td>使用<code>&lt;server-name>/*</code>格式包含整个<code>MCP</code>服务器的工具<tr><td>扩展工具<td>由<code>VS Code</code>扩展提供的工具<td>扩展注册的自定义工具</table>
<p>工具配置示例：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># 只使用只读工具</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">tools</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>'read-only'</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 使用特定工具</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">tools</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>'search'</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'fetch'</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'githubRepo'</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'usages'</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 包含MCP服务器的所有工具</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token key atrule">tools</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token string" style=color:#a6e22e>'myserver/*'</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'search'</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># 不配置tools则使用默认工具</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=handoffs工作流>Handoffs工作流<a href=#handoffs工作流 class=hash-link aria-label="Direct link to Handoffs工作流" title="Direct link to Handoffs工作流">​</a></h3>
<p><code>Handoffs</code>（交接）是<code>Custom Agents</code>的核心特性之一，它允许你创建引导式的顺序工作流，在代理之间流畅过渡。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=handoffs的价值>Handoffs的价值<a href=#handoffs的价值 class=hash-link aria-label="Direct link to Handoffs的价值" title="Direct link to Handoffs的价值">​</a></h4>
<ul>
<li><strong>流程引导</strong>：为复杂工作流提供清晰的步骤指引</li>
<li><strong>上下文传递</strong>：自动携带相关上下文到下一个代理</li>
<li><strong>提示预填充</strong>：预先准备好下一步的提示词</li>
<li><strong>人工审核</strong>：每一步完成后允许开发者审核和批准</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=handoffs配置>Handoffs配置<a href=#handoffs配置 class=hash-link aria-label="Direct link to Handoffs配置" title="Direct link to Handoffs配置">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token key atrule">handoffs</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token key atrule">label</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 开始实现    </span><span class="token comment" style=color:#8292a2;font-style:italic># 按钮显示文本</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">agent</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 实现代理    </span><span class="token comment" style=color:#8292a2;font-style:italic># 目标代理标识</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">prompt</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> 现在开始实现上述计划。  </span><span class="token comment" style=color:#8292a2;font-style:italic># 发送到目标代理的提示</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token key atrule">send</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#ae81ff>false</span><span class="token plain">                 </span><span class="token comment" style=color:#8292a2;font-style:italic># 是否自动提交提示，默认false</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=handoffs使用场景>Handoffs使用场景<a href=#handoffs使用场景 class=hash-link aria-label="Direct link to Handoffs使用场景" title="Direct link to Handoffs使用场景">​</a></h4>
<ul>
<li><strong>规划 → 实现</strong>：规划阶段生成实施方案，然后交接到实现代理开始编码</li>
<li><strong>实现 → 审查</strong>：实现完成后，切换到代码审查代理检查质量和安全</li>
<li><strong>编写失败测试 → 实现代码</strong>：先生成失败的测试用例便于审查，再交接实现代码使测试通过</li>
<li><strong>问题分析 → 方案设计 → 代码实现</strong>：多阶段工作流的顺序执行</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=工具优先级>工具优先级<a href=#工具优先级 class=hash-link aria-label="Direct link to 工具优先级" title="Direct link to 工具优先级">​</a></h3>
<p>当同时存在多个工具配置来源时，<code>VS Code</code>按以下优先级确定最终可用的工具列表：</p>
<ol>
<li><strong>Prompt文件中指定的工具</strong>（最高优先级）</li>
<li><strong>Prompt文件引用的Custom Agent的工具</strong></li>
<li><strong>选中的Agent的默认工具</strong>（最低优先级）</li>
</ol>
<p>这种优先级机制允许你在不同层次灵活控制工具的可用性。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=代理作用域>代理作用域<a href=#代理作用域 class=hash-link aria-label="Direct link to 代理作用域" title="Direct link to 代理作用域">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=workspace级别>Workspace级别<a href=#workspace级别 class=hash-link aria-label="Direct link to Workspace级别" title="Direct link to Workspace级别">​</a></h4>
<ul>
<li>存储位置：<code>.github/agents/</code>目录</li>
<li>作用范围：仅在当前工作区可用</li>
<li>适用场景：项目特定的工作流和角色</li>
<li>团队共享：可以提交到<code>Git</code>仓库供团队使用</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=user级别>User级别<a href=#user级别 class=hash-link aria-label="Direct link to User级别" title="Direct link to User级别">​</a></h4>
<ul>
<li>存储位置：用户配置文件目录</li>
<li>作用范围：所有工作区共享</li>
<li>适用场景：个人习惯和通用工作流</li>
<li>个人使用：不会影响团队其他成员</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=organization级别实验性>Organization级别（实验性）<a href=#organization级别实验性 class=hash-link aria-label="Direct link to Organization级别（实验性）" title="Direct link to Organization级别（实验性）">​</a></h4>
<ul>
<li>配置方式：在<code>GitHub</code>组织层面定义</li>
<li>作用范围：组织内所有成员</li>
<li>启用方式：设置<code>github.copilot.chat.customAgents.showOrganizationAndEnterpriseAgents</code>为<code>true</code></li>
<li>适用场景：企业级规范和流程统一</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=使用方法>使用方法<a href=#使用方法 class=hash-link aria-label="Direct link to 使用方法" title="Direct link to 使用方法">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=创建自定义代理>创建自定义代理<a href=#创建自定义代理 class=hash-link aria-label="Direct link to 创建自定义代理" title="Direct link to 创建自定义代理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=通过命令创建>通过命令创建<a href=#通过命令创建 class=hash-link aria-label="Direct link to 通过命令创建" title="Direct link to 通过命令创建">​</a></h4>
<p><strong>步骤一</strong>：打开代理配置</p>
<p>从代理下拉菜单选择<code>Configure Custom Agents</code>，或在命令面板（⇧⌘P）运行<code>Chat: New Custom Agent</code>命令。</p>
<p><strong>步骤二</strong>：选择位置</p>
<p>选择代理文件的存储位置：</p>
<ul>
<li><strong>Workspace</strong>：创建在<code>.github/agents</code>目录，仅当前项目使用</li>
<li><strong>User profile</strong>：创建在用户配置文件目录，跨项目使用</li>
</ul>
<p><strong>步骤三</strong>：命名代理</p>
<p>输入代理文件名，这将作为代理在下拉菜单中的默认名称。</p>
<p><strong>步骤四</strong>：编写配置</p>
<p>在新创建的<code>.agent.md</code>文件中：</p>
<ul>
<li>填写前置元数据配置代理的名称、描述、工具等</li>
<li>在文件正文中编写代理的具体工作指令</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=手动创建>手动创建<a href=#手动创建 class=hash-link aria-label="Direct link to 手动创建" title="Direct link to 手动创建">​</a></h4>
<p>你也可以直接在合适的位置创建<code>.agent.md</code>文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic># Workspace级别</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#e6db74>mkdir</span><span class="token plain"> </span><span class="token parameter variable" style=color:#f8f8f2>-p</span><span class="token plain"> .github/agents</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#e6db74>touch</span><span class="token plain"> .github/agents/planner.agent.md</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic># User级别（macOS/Linux）</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#e6db74>mkdir</span><span class="token plain"> </span><span class="token parameter variable" style=color:#f8f8f2>-p</span><span class="token plain"> ~/.config/Code/User/agents</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#e6db74>touch</span><span class="token plain"> ~/.config/Code/User/agents/planner.agent.md</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=使用自定义代理>使用自定义代理<a href=#使用自定义代理 class=hash-link aria-label="Direct link to 使用自定义代理" title="Direct link to 使用自定义代理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=切换代理>切换代理<a href=#切换代理 class=hash-link aria-label="Direct link to 切换代理" title="Direct link to 切换代理">​</a></h4>
<p>在<code>VS Code</code>的聊天视图中：</p>
<ol>
<li>点击代理下拉菜单</li>
<li>选择你创建的自定义代理</li>
<li>输入提示开始对话</li>
</ol>
<p>切换代理后，该代理的指令和工具配置会自动应用到后续的对话中。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=使用handoffs>使用Handoffs<a href=#使用handoffs class=hash-link aria-label="Direct link to 使用Handoffs" title="Direct link to 使用Handoffs">​</a></h4>
<p>当代理配置了<code>handoffs</code>时：</p>
<ol>
<li>完成当前代理的任务后，聊天响应下方会显示<code>handoff</code>按钮</li>
<li>点击按钮切换到目标代理</li>
<li>如果<code>send: false</code>，提示会预填充但不自动发送，你可以审核和修改</li>
<li>如果<code>send: true</code>，提示会自动发送到目标代理</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=管理自定义代理>管理自定义代理<a href=#管理自定义代理 class=hash-link aria-label="Direct link to 管理自定义代理" title="Direct link to 管理自定义代理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=编辑代理>编辑代理<a href=#编辑代理 class=hash-link aria-label="Direct link to 编辑代理" title="Direct link to 编辑代理">​</a></h4>
<p>从代理下拉菜单选择<code>Configure Custom Agents</code>，然后从列表中选择要修改的代理，直接编辑<code>.agent.md</code>文件。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=显示隐藏代理>显示/隐藏代理<a href=#显示隐藏代理 class=hash-link aria-label="Direct link to 显示/隐藏代理" title="Direct link to 显示/隐藏代理">​</a></h4>
<p>如果有多个自定义代理，可以控制哪些显示在下拉菜单中：</p>
<ol>
<li>从代理下拉菜单选择<code>Configure Custom Agents</code></li>
<li>将鼠标悬停在代理上</li>
<li>点击眼睛图标切换显示/隐藏状态</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=删除代理>删除代理<a href=#删除代理 class=hash-link aria-label="Direct link to 删除代理" title="Direct link to 删除代理">​</a></h4>
<p>完全删除自定义代理：</p>
<ul>
<li><strong>方式一</strong>：直接删除对应的<code>.agent.md</code>文件</li>
<li><strong>方式二</strong>：从<code>Configure Custom Agents</code>列表中，悬停在代理上点击垃圾桶图标</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=查看代理来源>查看代理来源<a href=#查看代理来源 class=hash-link aria-label="Direct link to 查看代理来源" title="Direct link to 查看代理来源">​</a></h4>
<p>要确定代理的来源：</p>
<ol>
<li>从代理下拉菜单选择<code>Configure Custom Agents</code></li>
<li>将鼠标悬停在代理上</li>
<li>工具提示中会显示来源位置（内置、用户、工作区、组织或扩展）</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=迁移旧的chat-modes>迁移旧的Chat Modes<a href=#迁移旧的chat-modes class=hash-link aria-label="Direct link to 迁移旧的Chat Modes" title="Direct link to 迁移旧的Chat Modes">​</a></h3>
<p><code>Custom Agents</code>之前称为<code>Custom Chat Modes</code>，使用<code>.chatmode.md</code>文件。<code>VS Code</code>仍然识别这些旧文件，并提供快速修复操作来重命名和移动它们到新的<code>.github/agents</code>目录，扩展名改为<code>.agent.md</code>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=应用场景>应用场景<a href=#应用场景 class=hash-link aria-label="Direct link to 应用场景" title="Direct link to 应用场景">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=规划代理planning-agent>规划代理（Planning Agent）<a href=#规划代理planning-agent class=hash-link aria-label="Direct link to 规划代理（Planning Agent）" title="Direct link to 规划代理（Planning Agent）">​</a></h3>
<p><strong>场景描述</strong>：需要为新功能或重构任务生成详细的实施计划，不涉及代码修改。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 规划代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 为新功能或重构任务生成实施计划</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'fetch'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'read-only'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">model</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> Claude Sonnet 4.5</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">handoffs</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>-</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">label</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实施计划</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">agent</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实现代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">prompt</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实施上述计划。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">send</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style=color:#ae81ff>false</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 规划指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于规划模式。生成详细的实施计划，不进行任何代码编辑。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">计划应包括：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">概述</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：功能或重构任务的简要描述</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">需求</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：功能性和非功能性需求列表</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">实施步骤</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：详细的分步实施指南</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">测试策略</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：验证实施所需的测试</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">风险和考虑因素</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：潜在问题及缓解策略</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>使用流程</strong>：</p>
<ol>
<li>切换到<code>Planner</code>代理</li>
<li>输入功能需求或重构目标</li>
<li>审查生成的实施计划</li>
<li>点击<code>实施计划</code>按钮切换到实现代理</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=实现代理implementation-agent>实现代理（Implementation Agent）<a href=#实现代理implementation-agent class=hash-link aria-label="Direct link to 实现代理（Implementation Agent）" title="Direct link to 实现代理（Implementation Agent）">​</a></h3>
<p><strong>场景描述</strong>：根据规划或需求实施具体的代码改动。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实现代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 根据计划实施功能</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'edit'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'create'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'delete'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">handoffs</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>-</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">label</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 审查代码</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">agent</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 代码审查代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">prompt</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 审查我刚刚做的代码改动。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">send</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style=color:#ae81ff>false</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 实现指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于实现模式。你的任务是实现计划的功能或修复。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">指导原则：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 遵循现有的代码风格和项目约定</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 编写干净、可读、可维护的代码</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 为复杂逻辑添加适当的注释</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 如需要，更新相关文档</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 实现后运行测试以确保正确性</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>使用流程</strong>：</p>
<ol>
<li>从规划代理通过<code>handoff</code>切换，或直接切换到实现代理</li>
<li>输入实施要求或继承的计划上下文</li>
<li>审查和确认代码改动</li>
<li>点击<code>审查代码</code>按钮进入代码审查流程</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=代码审查代理code-review-agent>代码审查代理（Code Review Agent）<a href=#代码审查代理code-review-agent class=hash-link aria-label="Direct link to 代码审查代理（Code Review Agent）" title="Direct link to 代码审查代理（Code Review Agent）">​</a></h3>
<p><strong>场景描述</strong>：审查代码改动，关注代码质量、安全性、性能等方面。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 代码审查代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 审查代码改动的质量和安全性</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'read-only'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 代码审查指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于代码审查模式。分析代码改动并提供反馈。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">审查清单：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">代码质量</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：可读性、可维护性、遵循最佳实践</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">安全性</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：潜在漏洞、输入验证、数据保护</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">性能</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：效率、资源使用、可扩展性问题</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">测试</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：测试覆盖率、边界情况、错误处理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">文档</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：注释、API文档、README更新</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">提供建设性的反馈和具体的改进建议。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>使用流程</strong>：</p>
<ol>
<li>从实现代理通过<code>handoff</code>切换</li>
<li><code>AI</code>自动分析最近的代码改动</li>
<li>获得详细的审查反馈和改进建议</li>
<li>根据反馈进行必要的修改</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重构代理refactoring-agent>重构代理（Refactoring Agent）<a href=#重构代理refactoring-agent class=hash-link aria-label="Direct link to 重构代理（Refactoring Agent）" title="Direct link to 重构代理（Refactoring Agent）">​</a></h3>
<p><strong>场景描述</strong>：优化现有代码结构，提升代码质量而不改变功能。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 重构代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 重构现有代码以提升结构和可维护性</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'edit'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 重构指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于重构模式。在不改变功能的前提下改进代码结构。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">重点关注：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">提取方法</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：将大型函数拆分为更小、更专注的函数</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">消除重复</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：识别并消除重复代码</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">改进命名</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：为变量和函数使用清晰、描述性的名称</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">简化逻辑</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：降低复杂度，移除不必要的条件判断</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">更新模式</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：应用现代语言特性和最佳实践</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">始终保持现有功能，并确保重构后测试通过。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=测试代理test-first-agent>测试代理（Test-First Agent）<a href=#测试代理test-first-agent class=hash-link aria-label="Direct link to 测试代理（Test-First Agent）" title="Direct link to 测试代理（Test-First Agent）">​</a></h3>
<p><strong>场景描述</strong>：先编写失败的测试用例，然后实现代码使测试通过。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 测试代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 先编写失败的测试，然后实现代码使其通过</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'create'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'edit'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">handoffs</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>-</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">label</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实现代码</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">agent</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 测试代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">prompt</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 实现代码使上述测试通过。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml">  </span><span class="token front-matter-block front-matter yaml language-yaml key atrule">send</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style=color:#ae81ff>false</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 测试优先开发指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于测试优先模式。在实现前编写全面的失败测试。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">流程：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>1.</span><span class="token plain"> 理解功能需求</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>2.</span><span class="token plain"> 编写定义预期行为的测试用例</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>3.</span><span class="token plain"> 确保测试失败（因为尚未实现）</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>4.</span><span class="token plain"> 通过交接准备实现阶段</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">测试指南：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 覆盖正常路径和边界情况</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 测试错误处理和验证</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 使用描述性的测试名称</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> 保持测试专注且独立</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=文档编写代理documentation-agent>文档编写代理（Documentation Agent）<a href=#文档编写代理documentation-agent class=hash-link aria-label="Direct link to 文档编写代理（Documentation Agent）" title="Direct link to 文档编写代理（Documentation Agent）">​</a></h3>
<p><strong>场景描述</strong>：为代码、<code>API</code>或项目编写高质量的文档。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 文档编写代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 生成和更新项目文档</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'fetch'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'edit'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'create'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 文档编写指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于文档模式。创建清晰、全面的文档。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">文档类型：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">API文档</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：函数签名、参数、返回值、示例</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">代码注释</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：复杂逻辑的行内说明</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">README文件</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：项目概述、设置说明、使用示例</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">架构文档</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：系统设计、组件交互、数据流</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">用户指南</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：分步教程和操作指南</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">使用清晰的语言，提供示例，并保持文档与代码改动同步更新。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安全审查代理security-audit-agent>安全审查代理（Security Audit Agent）<a href=#安全审查代理security-audit-agent class=hash-link aria-label="Direct link to 安全审查代理（Security Audit Agent）" title="Direct link to 安全审查代理（Security Audit Agent）">​</a></h3>
<p><strong>场景描述</strong>：专门审查代码的安全问题和漏洞。</p>
<p><strong>配置示例</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 审计代码的安全漏洞和最佳实践</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">name</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> 安全代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">tools</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>[</span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'search'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'usages'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'githubRepo'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>,</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style=color:#a6e22e>'read-only'</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style=color:#f8f8f2>]</span><span class="token front-matter-block"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> 安全审计指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于安全审计模式。识别并报告安全漏洞。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">安全清单：</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">输入验证</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：检查SQL注入、XSS、命令注入</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">身份认证</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：验证正确的认证和授权</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">数据保护</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：确保敏感数据加密和保护</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">依赖安全</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：检查存在漏洞的依赖项</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">API安全</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：审查API端点的安全缺陷</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> </span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token bold content">错误处理</span><span class="token bold punctuation" style=color:#f8f8f2>**</span><span class="token plain">：确保错误不泄露敏感信息</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">提供严重程度评级和修复建议。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=最佳实践>最佳实践<a href=#最佳实践 class=hash-link aria-label="Direct link to 最佳实践" title="Direct link to 最佳实践">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=合理设计工作流>合理设计工作流<a href=#合理设计工作流 class=hash-link aria-label="Direct link to 合理设计工作流" title="Direct link to 合理设计工作流">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>将复杂任务分解为多个阶段，每个阶段对应一个代理</li>
<li>使用<code>handoffs</code>串联各个阶段，形成流畅的工作流</li>
<li>在关键决策点保留人工审核环节（<code>send: false</code>）</li>
</ul>
<p><strong>示例工作流</strong>：</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">需求分析 → 规划设计 → 编写测试 → 代码实现 → 代码审查 → 文档更新</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=精准配置工具集>精准配置工具集<a href=#精准配置工具集 class=hash-link aria-label="Direct link to 精准配置工具集" title="Direct link to 精准配置工具集">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>只为代理配置必要的工具，避免工具泛滥</li>
<li>规划类代理使用只读工具，避免意外修改</li>
<li>实现类代理使用编辑工具，但可以限制范围</li>
</ul>
<p><strong>工具选择建议</strong>：</p>
<table><thead><tr><th>代理类型<th>推荐工具<th>避免工具<tbody><tr><td>规划代理<td><code>search</code>、<code>fetch</code>、<code>githubRepo</code>、<code>usages</code><td>编辑类工具<tr><td>实现代理<td><code>search</code>、<code>edit</code>、<code>create</code>、<code>delete</code><td>终端执行（除非必要）<tr><td>审查代理<td><code>search</code>、<code>usages</code>、<code>githubRepo</code><td>编辑类工具<tr><td>文档代理<td><code>search</code>、<code>edit</code>、<code>create</code>、<code>fetch</code><td>代码编译工具</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=编写清晰的指令>编写清晰的指令<a href=#编写清晰的指令 class=hash-link aria-label="Direct link to 编写清晰的指令" title="Direct link to 编写清晰的指令">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>使用清晰的结构化指令，明确代理的职责</li>
<li>提供具体的检查清单和操作指南</li>
<li>包含反例说明，明确什么不应该做</li>
</ul>
<p><strong>指令模板</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token title important punctuation" style=color:#f8f8f2>#</span><span class="token title important"> [代理名称] 指令</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>##</span><span class="token title important"> 角色</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你处于[角色名]模式。你的主要任务是[主要任务]。</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>##</span><span class="token title important"> 目标</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [目标1]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [目标2]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [目标3]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>##</span><span class="token title important"> 指导原则</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [指导原则1]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [指导原则2]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [指导原则3]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>##</span><span class="token title important"> 禁止事项</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [禁止事项1]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token list punctuation" style=color:#f8f8f2>-</span><span class="token plain"> [禁止事项2]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important punctuation" style=color:#f8f8f2>##</span><span class="token title important"> 输出格式</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">[期望的输出格式说明]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=保持代理专注>保持代理专注<a href=#保持代理专注 class=hash-link aria-label="Direct link to 保持代理专注" title="Direct link to 保持代理专注">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>每个代理专注于单一职责</li>
<li>避免创建"万能代理"</li>
<li>通过<code>handoffs</code>组合多个专注的代理</li>
</ul>
<p><strong>反模式</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token title important"># ❌ 不好的例子：一个代理做所有事情</span><br></span><span class=token-line style=color:#f8f8f2><span class="token title important"></span><span class="token title important punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">name: 超级代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important">tools: ['*']  # 所有工具</span><br></span><span class=token-line style=color:#f8f8f2><span class="token title important"></span><span class="token title important punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你可以做所有事情：规划、实现、审查、测试、文档...</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>推荐模式</strong>：</p>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token title important"># ✅ 好的例子：职责单一的代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token title important"></span><span class="token title important punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">name: 规划代理</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token title important">tools: ['read-only']</span><br></span><span class=token-line style=color:#f8f8f2><span class="token title important"></span><span class="token title important punctuation" style=color:#f8f8f2>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">你专注于生成详细的实施计划。</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=利用模型选择>利用模型选择<a href=#利用模型选择 class=hash-link aria-label="Direct link to 利用模型选择" title="Direct link to 利用模型选择">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>为不同代理选择合适的模型</li>
<li>复杂任务使用更强大的模型</li>
<li>简单任务可以使用快速模型</li>
</ul>
<p><strong>模型选择建议</strong>：</p>
<table><thead><tr><th>任务复杂度<th>推荐模型<th>适用代理<tbody><tr><td>高复杂度<td><code>Claude Sonnet 4.5</code><td>架构设计、复杂重构、安全审计<tr><td>中等复杂度<td>默认模型<td>功能实现、代码审查<tr><td>低复杂度<td>快速模型<td>简单编辑、格式化、文档更新</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=版本控制与团队共享>版本控制与团队共享<a href=#版本控制与团队共享 class=hash-link aria-label="Direct link to 版本控制与团队共享" title="Direct link to 版本控制与团队共享">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>将工作区级别的代理提交到<code>Git</code>仓库</li>
<li>在<code>README</code>中说明代理的用途和使用方法</li>
<li>定期审查和更新代理配置</li>
</ul>
<p><strong>目录结构建议</strong>：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">.github/</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">└── agents/</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    ├── planner.agent.md</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    ├── implementer.agent.md</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    ├── reviewer.agent.md</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    └── README.md  # 说明各代理的用途</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=渐进式采用>渐进式采用<a href=#渐进式采用 class=hash-link aria-label="Direct link to 渐进式采用" title="Direct link to 渐进式采用">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>从最常用的场景开始创建代理</li>
<li>在实践中逐步完善代理配置</li>
<li>收集团队反馈持续优化</li>
</ul>
<p><strong>采用路径</strong>：</p>
<ol>
<li><strong>第一阶段</strong>：创建规划代理和实现代理，建立基础工作流</li>
<li><strong>第二阶段</strong>：添加代码审查代理，提升代码质量</li>
<li><strong>第三阶段</strong>：根据团队需求添加专项代理（如测试、文档、安全等）</li>
<li><strong>第四阶段</strong>：优化<code>handoffs</code>，建立完整的端到端工作流</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=性能优化>性能优化<a href=#性能优化 class=hash-link aria-label="Direct link to 性能优化" title="Direct link to 性能优化">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>避免在代理指令中包含过多冗余内容</li>
<li>合理使用工具筛选，减少不必要的工具调用</li>
<li>对于组织级代理，定期清理不再使用的配置</li>
</ul>
<p><strong>优化检查清单</strong>：</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class=task-list-item><input type=checkbox disabled> <!-- -->指令是否简洁明确？</li>
<li class=task-list-item><input type=checkbox disabled> <!-- -->工具配置是否最小化？</li>
<li class=task-list-item><input type=checkbox disabled> <code>handoffs</code>是否必要且高效？</li>
<li class=task-list-item><input type=checkbox disabled> <!-- -->代理命名是否清晰易识别？</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=监控与迭代>监控与迭代<a href=#监控与迭代 class=hash-link aria-label="Direct link to 监控与迭代" title="Direct link to 监控与迭代">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>定期审查代理的使用情况</li>
<li>收集团队成员的使用反馈</li>
<li>根据实际效果调整代理配置</li>
</ul>
<p><strong>反馈收集维度</strong>：</p>
<ul>
<li>代理是否有效提升了工作效率？</li>
<li>工具配置是否合理？</li>
<li>指令是否清晰易懂？</li>
<li><code>handoffs</code>流程是否流畅？</li>
<li>是否需要新的代理类型？</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安全与权限>安全与权限<a href=#安全与权限 class=hash-link aria-label="Direct link to 安全与权限" title="Direct link to 安全与权限">​</a></h3>
<p><strong>原则</strong>：</p>
<ul>
<li>谨慎配置具有写权限的工具</li>
<li>敏感操作的代理应限制使用范围</li>
<li>审查组织级代理的权限配置</li>
</ul>
<p><strong>安全建议</strong>：</p>
<ul>
<li>规划和审查类代理优先使用只读工具</li>
<li>避免在代理中硬编码敏感信息</li>
<li>定期审计代理的工具使用情况</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=常见问题>常见问题<a href=#常见问题 class=hash-link aria-label="Direct link to 常见问题" title="Direct link to 常见问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=custom-agents和chat-modes有什么区别>Custom Agents和Chat Modes有什么区别？<a href=#custom-agents和chat-modes有什么区别 class=hash-link aria-label="Direct link to Custom Agents和Chat Modes有什么区别？" title="Direct link to Custom Agents和Chat Modes有什么区别？">​</a></h3>
<p><code>Custom Agents</code>是<code>Custom Chat Modes</code>的新名称，功能相同但术语更准确地反映了它们的用途。<code>VS Code</code>仍然识别旧的<code>.chatmode.md</code>文件，并提供快速修复操作将它们迁移到新格式。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=如何知道一个代理来自哪里>如何知道一个代理来自哪里？<a href=#如何知道一个代理来自哪里 class=hash-link aria-label="Direct link to 如何知道一个代理来自哪里？" title="Direct link to 如何知道一个代理来自哪里？">​</a></h3>
<p>在代理下拉菜单中选择<code>Configure Custom Agents</code>，然后将鼠标悬停在代理上，工具提示会显示来源：内置、用户配置文件、工作区、组织或扩展。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=可以同时使用多个代理吗>可以同时使用多个代理吗？<a href=#可以同时使用多个代理吗 class=hash-link aria-label="Direct link to 可以同时使用多个代理吗？" title="Direct link to 可以同时使用多个代理吗？">​</a></h3>
<p>不可以，每次只能激活一个代理。但你可以通过<code>handoffs</code>在代理之间快速切换，并且可以在<code>Prompt</code>文件中引用特定的代理。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=如果指定的工具不可用会怎样>如果指定的工具不可用会怎样？<a href=#如果指定的工具不可用会怎样 class=hash-link aria-label="Direct link to 如果指定的工具不可用会怎样？" title="Direct link to 如果指定的工具不可用会怎样？">​</a></h3>
<p>如果配置的工具在使用时不可用，它会被忽略，代理使用其他可用的工具。建议配置前确认工具的可用性。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=组织级代理如何启用>组织级代理如何启用？<a href=#组织级代理如何启用 class=hash-link aria-label="Direct link to 组织级代理如何启用？" title="Direct link to 组织级代理如何启用？">​</a></h3>
<p>需要将设置<code>github.copilot.chat.customAgents.showOrganizationAndEnterpriseAgents</code>设置为<code>true</code>，然后<code>VS Code</code>会自动发现你有权访问的组织级代理。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=可以在代理中引用mcp服务器吗>可以在代理中引用MCP服务器吗？<a href=#可以在代理中引用mcp服务器吗 class=hash-link aria-label="Direct link to 可以在代理中引用MCP服务器吗？" title="Direct link to 可以在代理中引用MCP服务器吗？">​</a></h3>
<p>可以，在<code>tools</code>配置中使用<code>&lt;server-name>/*</code>格式可以包含整个<code>MCP</code>服务器的所有工具，或者单独指定<code>MCP</code>工具名称。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=handoffs的prompt可以包含变量吗>Handoffs的prompt可以包含变量吗？<a href=#handoffs的prompt可以包含变量吗 class=hash-link aria-label="Direct link to Handoffs的prompt可以包含变量吗？" title="Direct link to Handoffs的prompt可以包含变量吗？">​</a></h3>
<p>当前<code>handoffs</code>的<code>prompt</code>是静态文本，但它会继承当前对话的上下文，所以可以通过上下文传递动态信息。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=如何调试自定义代理>如何调试自定义代理？<a href=#如何调试自定义代理 class=hash-link aria-label="Direct link to 如何调试自定义代理？" title="Direct link to 如何调试自定义代理？">​</a></h3>
<ul>
<li>检查代理文件的<code>YAML</code>语法是否正确</li>
<li>验证配置的工具名称是否存在</li>
<li>测试代理的指令是否按预期工作</li>
<li>查看<code>VS Code</code>的输出面板获取错误信息</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=可以为代理配置快捷键吗>可以为代理配置快捷键吗？<a href=#可以为代理配置快捷键吗 class=hash-link aria-label="Direct link to 可以为代理配置快捷键吗？" title="Direct link to 可以为代理配置快捷键吗？">​</a></h3>
<p>目前<code>VS Code</code>不直接支持为代理配置快捷键，但你可以使用键盘导航：使用<code>Tab</code>键在代理下拉菜单中切换，使用<code>Enter</code>选择。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=代理会影响性能吗>代理会影响性能吗？<a href=#代理会影响性能吗 class=hash-link aria-label="Direct link to 代�理会影响性能吗？" title="Direct link to 代理会影响性能吗？">​</a></h3>
<p>代理本身不会显著影响性能。性能主要取决于所使用的工具和模型。合理配置工具集可以提升响应速度。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=参考资料>参考资料<a href=#参考资料 class=hash-link aria-label="Direct link to 参考资料" title="Direct link to 参考资料">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=官方文档>官方文档<a href=#官方文档 class=hash-link aria-label="Direct link to 官方文档" title="Direct link to 官方文档">​</a></h3>
<ul>
<li><a href=https://code.visualstudio.com/docs/copilot/customization/custom-agents target=_blank rel="noopener noreferrer">VS Code Custom Agents官方文档</a></li>
<li><a href=https://code.visualstudio.com/docs/copilot/customization/custom-instructions target=_blank rel="noopener noreferrer">Copilot Instructions使用指南</a></li>
<li><a href=https://code.visualstudio.com/docs/copilot/customization/prompt-files target=_blank rel="noopener noreferrer">Prompt Files文档</a></li>
<li><a href=https://code.visualstudio.com/docs/copilot/chat/chat-tools target=_blank rel="noopener noreferrer">Chat Tools文档</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=社区资源>社区资源<a href=#社区资源 class=hash-link aria-label="Direct link to 社区资源" title="Direct link to 社区资源">​</a></h3>
<ul>
<li><a href=https://github.com/github/awesome-copilot/tree/main target=_blank rel="noopener noreferrer">Awesome Copilot Repository</a>：社区贡献的自定义代理示例</li>
<li><a href=https://github.com/microsoft/vscode/issues target=_blank rel="noopener noreferrer">VS Code GitHub Issues</a>：报告问题和功能请求</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=扩展阅读>扩展阅读<a href=#扩展阅读 class=hash-link aria-label="Direct link to 扩展阅读" title="Direct link to 扩展阅读">​</a></h3>
<ul>
<li><a href=https://code.visualstudio.com/docs/copilot/agents/background-agents target=_blank rel="noopener noreferrer">Background Agents</a>：后台代理功能</li>
<li><a href=https://code.visualstudio.com/docs/copilot/agents/cloud-agents target=_blank rel="noopener noreferrer">Cloud Agents</a>：云端代理功能</li>
<li><a href=https://code.visualstudio.com/docs/copilot/chat/chat-sessions#_use-a-custom-agent-with-subagents-experimental target=_blank rel="noopener noreferrer">Subagents with Custom Agents</a>：在子代理中使用自定义代理（实验性）</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/ai/copilot-instructions-guide><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Copilot Instructions使用指南</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/ai/ai-code-editor-comparison><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>AI代码开发工具选型指南</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#前言 class="table-of-contents__link toc-highlight">前言</a><li><a href=#copilot-custom-agents是什么 class="table-of-contents__link toc-highlight">Copilot Custom Agents是什么</a><ul><li><a href=#核心特点 class="table-of-contents__link toc-highlight">核心特点</a><li><a href=#与内置代理的区别 class="table-of-contents__link toc-highlight">与内置代理的区别</a><li><a href=#关键概念 class="table-of-contents__link toc-highlight">关键概念</a></ul><li><a href=#解决什么问题 class="table-of-contents__link toc-highlight">解决什么问题</a><ul><li><a href=#任务模式切换困��难 class="table-of-contents__link toc-highlight">任务模式切换困难</a><li><a href=#工具使用混乱 class="table-of-contents__link toc-highlight">工具使用混乱</a><li><a href=#重复配置工作 class="table-of-contents__link toc-highlight">重复配置工作</a><li><a href=#工作流不连贯 class="table-of-contents__link toc-highlight">工作流不连贯</a><li><a href=#团队协作不一致 class="table-of-contents__link toc-highlight">团队协作不一致</a></ul><li><a href=#核心功能 class="table-of-contents__link toc-highlight">核心功能</a><ul><li><a href=#代理定义与配置 class="table-of-contents__link toc-highlight">代理定义与配置</a><li><a href=#handoffs工作流 class="table-of-contents__link toc-highlight">Handoffs工作流</a><li><a href=#工具优先级 class="table-of-contents__link toc-highlight">工具优先级</a><li><a href=#代理作用域 class="table-of-contents__link toc-highlight">代理作用域</a></ul><li><a href=#使用方法 class="table-of-contents__link toc-highlight">使用方法</a><ul><li><a href=#创建自定义代理 class="table-of-contents__link toc-highlight">创建自定义代理</a><li><a href=#使用自定义代理 class="table-of-contents__link toc-highlight">使用自定义代理</a><li><a href=#管理自定义代理 class="table-of-contents__link toc-highlight">管理自定义代理</a><li><a href=#迁移旧的chat-modes class="table-of-contents__link toc-highlight">迁移旧的Chat Modes</a></ul><li><a href=#应用场景 class="table-of-contents__link toc-highlight">应用场景</a><ul><li><a href=#规划代理planning-agent class="table-of-contents__link toc-highlight">规划代理（Planning Agent）</a><li><a href=#实现代理implementation-agent class="table-of-contents__link toc-highlight">实现代理（Implementation Agent）</a><li><a href=#代码审查代理code-review-agent class="table-of-contents__link toc-highlight">代码审查代理（Code Review Agent）</a><li><a href=#重构代理refactoring-agent class="table-of-contents__link toc-highlight">重构代理（Refactoring Agent）</a><li><a href=#测试代理test-first-agent class="table-of-contents__link toc-highlight">测试代理（Test-First Agent）</a><li><a href=#文档编写代理documentation-agent class="table-of-contents__link toc-highlight">文档编写代理（Documentation Agent）</a><li><a href=#安全审查代理security-audit-agent class="table-of-contents__link toc-highlight">安全审查代理（Security Audit Agent）</a></ul><li><a href=#最佳实践 class="table-of-contents__link toc-highlight">最佳实践</a><ul><li><a href=#合理设计工作流 class="table-of-contents__link toc-highlight">合理设计工作流</a><li><a href=#精准配置工具集 class="table-of-contents__link toc-highlight">精准配置工具集</a><li><a href=#编写清晰的指令 class="table-of-contents__link toc-highlight">编写清晰的指令</a><li><a href=#保持代理专注 class="table-of-contents__link toc-highlight">保持代理专注</a><li><a href=#利用模型选择 class="table-of-contents__link toc-highlight">利用模型选择</a><li><a href=#版本控制与团队共享 class="table-of-contents__link toc-highlight">版本控制与团队共享</a><li><a href=#渐进式采用 class="table-of-contents__link toc-highlight">渐进式采用</a><li><a href=#性能优化 class="table-of-contents__link toc-highlight">性能优化</a><li><a href=#监控与迭代 class="table-of-contents__link toc-highlight">监控与迭代</a><li><a href=#安全与权限 class="table-of-contents__link toc-highlight">安全与权限</a></ul><li><a href=#常见问题 class="table-of-contents__link toc-highlight">常见问题</a><ul><li><a href=#custom-agents和chat-modes有什么区别 class="table-of-contents__link toc-highlight">Custom Agents和Chat Modes有什么区别？</a><li><a href=#如何知道一个代理来自哪里 class="table-of-contents__link toc-highlight">如何知道一个代理来自哪里？</a><li><a href=#可以同时使用多个代理吗 class="table-of-contents__link toc-highlight">可以同时使用多个代理吗？</a><li><a href=#如果指定的工具不可用会怎样 class="table-of-contents__link toc-highlight">如果指定的工具不可用会怎样？</a><li><a href=#组织级代理如何启用 class="table-of-contents__link toc-highlight">组织级代理如何启用？</a><li><a href=#可以在代理中引用mcp服务器吗 class="table-of-contents__link toc-highlight">可以在代理中引用MCP服务器吗？</a><li><a href=#handoffs的prompt可以包含变量吗 class="table-of-contents__link toc-highlight">Handoffs的prompt可以包含变量吗？</a><li><a href=#如何调试自定义代理 class="table-of-contents__link toc-highlight">如何调试自定义代理？</a><li><a href=#可以为代理配置快捷键吗 class="table-of-contents__link toc-highlight">可以为代理配置快捷键吗？</a><li><a href=#代理会影响性能吗 class="table-of-contents__link toc-highlight">代理会影响性能吗？</a></ul><li><a href=#参考资料 class="table-of-contents__link toc-highlight">参考资料</a><ul><li><a href=#官方文档 class="table-of-contents__link toc-highlight">官方文档</a><li><a href=#社区资源 class="table-of-contents__link toc-highlight">社区资源</a><li><a href=#扩展阅读 class="table-of-contents__link toc-highlight">扩展阅读</a></ul></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright 2026 johng.cn</div></div></div></footer></div>